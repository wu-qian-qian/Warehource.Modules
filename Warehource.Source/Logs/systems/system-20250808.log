2025-08-08 15:45:44.963 +08:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:45:45.046 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-08 15:45:45.075 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:45:45.109 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-08 15:45:45.141 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 15:45:45.163 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 15:45:45.190 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:45:45.195 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-08 15:45:45.198 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:45:45.202 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-08 15:45:45.209 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 15:45:45.211 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 15:45:45.289 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:45:45.292 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-08 15:45:45.294 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:45:45.296 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-08 15:45:45.302 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 15:45:45.400 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 15:45:45.719 +08:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-08 15:45:45.854 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-08 15:45:45.913 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Presentation.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-08 15:45:45.918 +08:00 [INF] Configured endpoint PlcMapDataIntegrationEvent, Consumer: Wcs.Presentation.Custom.PlcMapDataIntegrationEventConsumer
2025-08-08 15:45:45.920 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Presentation.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-08 15:45:45.922 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Presentation.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-08 15:45:45.926 +08:00 [INF] Configured endpoint PlcMapEventCommit, Consumer: Plc.Presentation.Custom.PlcMapEventCommitConsumer
2025-08-08 15:47:17.051 +08:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:47:17.124 +08:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-08 15:47:17.131 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:47:17.141 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-08 15:47:17.161 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 15:47:17.181 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 15:47:17.211 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:47:17.216 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-08 15:47:17.227 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:47:17.232 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-08 15:47:17.239 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 15:47:17.244 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 15:47:17.334 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:47:17.339 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-08 15:47:17.344 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:47:17.349 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-08 15:47:17.356 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 15:47:17.369 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 15:47:17.670 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-08 15:47:17.763 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-08 15:47:17.841 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Presentation.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-08 15:47:17.859 +08:00 [INF] Configured endpoint PlcMapDataIntegrationEvent, Consumer: Wcs.Presentation.Custom.PlcMapDataIntegrationEventConsumer
2025-08-08 15:47:17.868 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Presentation.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-08 15:47:17.873 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Presentation.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-08 15:47:17.877 +08:00 [INF] Configured endpoint PlcMapEventCommit, Consumer: Plc.Presentation.Custom.PlcMapEventCommitConsumer
2025-08-08 15:48:08.471 +08:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:48:08.545 +08:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-08 15:48:08.553 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:48:08.558 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-08 15:48:08.574 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 15:48:08.594 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 15:48:08.632 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:48:08.637 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-08 15:48:08.643 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:48:08.647 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-08 15:48:08.654 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 15:48:08.661 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 15:48:08.744 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:48:08.749 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-08 15:48:08.755 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:48:08.759 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-08 15:48:08.766 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 15:48:08.776 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 15:48:09.072 +08:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-08 15:48:09.176 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-08 15:48:09.244 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Presentation.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-08 15:48:09.249 +08:00 [INF] Configured endpoint PlcMapDataIntegrationEvent, Consumer: Wcs.Presentation.Custom.PlcMapDataIntegrationEventConsumer
2025-08-08 15:48:09.253 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Presentation.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-08 15:48:09.257 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Presentation.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-08 15:48:09.263 +08:00 [INF] Configured endpoint PlcMapEventCommit, Consumer: Plc.Presentation.Custom.PlcMapEventCommitConsumer
2025-08-08 15:53:14.000 +08:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:53:14.075 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-08 15:53:14.087 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:53:14.092 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-08 15:53:14.106 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 15:53:14.127 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 15:53:14.159 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:53:14.163 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-08 15:53:14.168 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:53:14.174 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-08 15:53:14.181 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 15:53:14.185 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 15:53:14.285 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:53:14.296 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-08 15:53:14.300 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:53:14.316 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-08 15:53:14.322 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 15:53:14.336 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 15:53:14.660 +08:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-08 15:53:14.837 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-08 15:53:14.912 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Presentation.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-08 15:53:14.921 +08:00 [INF] Configured endpoint PlcMapDataIntegrationEvent, Consumer: Wcs.Presentation.Custom.PlcMapDataIntegrationEventConsumer
2025-08-08 15:53:14.925 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Presentation.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-08 15:53:14.929 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Presentation.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-08 15:53:14.932 +08:00 [INF] Configured endpoint PlcMapEventCommit, Consumer: Plc.Presentation.Custom.PlcMapEventCommitConsumer
2025-08-08 15:53:14.993 +08:00 [INF] Configured endpoint PlcMapState, Saga: Plc.Presentation.Saga.PlcMapState, State Machine: Plc.Presentation.Saga.PlcMapSaga
2025-08-08 15:53:15.316 +08:00 [DBG] Starting bus instances: IBus
2025-08-08 15:53:15.321 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-08 15:53:15.385 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-08 15:53:15.385 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapState"
2025-08-08 15:53:15.385 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapDataIntegrationEvent"
2025-08-08 15:53:15.385 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_zbjyyyrronegka5rbdq7cwfbd7"
2025-08-08 15:53:15.385 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-08 15:53:15.385 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-08 15:53:15.385 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapEventCommit"
2025-08-08 15:53:15.388 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-08 15:53:15.540 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-08 15:53:15.568 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-08 15:53:15.867 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-08 15:53:15.872 +08:00 [INF] Hosting environment: Development
2025-08-08 15:53:15.877 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-08 15:53:16.090 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-08 15:53:16.417 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 340.4518ms
2025-08-08 15:53:16.610 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-08 15:53:16.610 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-08 15:53:16.628 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 17.5616ms
2025-08-08 15:53:16.665 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.2115ms
2025-08-08 15:53:16.737 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-08 15:53:16.780 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 42.514ms
2025-08-08 15:55:46.464 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:55:46.537 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-08 15:55:46.544 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:55:46.551 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-08 15:55:46.565 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 15:55:46.581 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 15:55:46.615 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:55:46.621 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-08 15:55:46.626 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:55:46.630 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-08 15:55:46.637 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 15:55:46.643 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 15:55:46.739 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:55:46.747 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-08 15:55:46.752 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 15:55:46.760 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-08 15:55:46.772 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 15:55:46.786 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 15:55:47.139 +08:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-08 15:55:47.240 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-08 15:55:47.323 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Presentation.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-08 15:55:47.329 +08:00 [INF] Configured endpoint PlcMapDataIntegrationEvent, Consumer: Wcs.Presentation.Custom.PlcMapDataIntegrationEventConsumer
2025-08-08 15:55:47.332 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Presentation.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-08 15:55:47.337 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Presentation.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-08 15:55:47.340 +08:00 [INF] Configured endpoint PlcMapEventCommit, Consumer: Plc.Presentation.Custom.PlcMapEventCommitConsumer
2025-08-08 16:10:24.182 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:10:24.253 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-08 16:10:24.262 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:10:24.270 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-08 16:10:24.285 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 16:10:24.301 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 16:10:24.344 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:10:24.364 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-08 16:10:24.370 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:10:24.374 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-08 16:10:24.379 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 16:10:24.384 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 16:10:24.478 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:10:24.482 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-08 16:10:24.488 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:10:24.492 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-08 16:10:24.499 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 16:10:24.512 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 16:10:24.830 +08:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-08 16:10:24.938 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-08 16:10:25.003 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Presentation.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-08 16:10:25.008 +08:00 [INF] Configured endpoint PlcMapDataIntegrationEvent, Consumer: Wcs.Presentation.Custom.PlcMapDataIntegrationEventConsumer
2025-08-08 16:10:25.012 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Presentation.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-08 16:10:25.016 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Presentation.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-08 16:10:25.020 +08:00 [INF] Configured endpoint PlcMapEventCommit, Consumer: Plc.Presentation.Custom.PlcMapEventCommitConsumer
2025-08-08 16:10:25.091 +08:00 [INF] Configured endpoint PlcMapState, Saga: Plc.Presentation.Saga.PlcMapState, State Machine: Plc.Presentation.Saga.PlcMapSaga
2025-08-08 16:10:25.340 +08:00 [DBG] Starting bus instances: IBus
2025-08-08 16:10:25.346 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-08 16:10:25.402 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapState"
2025-08-08 16:10:25.402 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-08 16:10:25.402 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapDataIntegrationEvent"
2025-08-08 16:10:25.402 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapEventCommit"
2025-08-08 16:10:25.402 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-08 16:10:25.402 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-08 16:10:25.402 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_anooyyrronegmk3kbdq7cwa8d3"
2025-08-08 16:10:25.404 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-08 16:10:25.512 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-08 16:10:25.521 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-08 16:10:25.776 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-08 16:10:25.784 +08:00 [INF] Hosting environment: Development
2025-08-08 16:10:25.793 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-08 16:10:25.891 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-08 16:10:26.159 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 277.4039ms
2025-08-08 16:10:26.560 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-08 16:10:26.569 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 8.9864ms
2025-08-08 16:10:26.646 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-08 16:10:26.682 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.016ms
2025-08-08 16:10:27.048 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-08 16:10:27.087 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 38.8835ms
2025-08-08 16:12:35.480 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/plc/add-allplc-config - multipart/form-data; boundary=----WebKitFormBoundarySlpLkRDBOBVBn04c 11021
2025-08-08 16:12:35.506 +08:00 [INF] CORS policy execution successful.
2025-08-08 16:12:35.579 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-08 16:12:36.995 +08:00 [INF] Executing endpoint 'HTTP: POST plc/add-allplc-config'
2025-08-08 16:20:12.714 +08:00 [INF] Executed DbCommand (333ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [Wcs.Source];
2025-08-08 16:20:12.844 +08:00 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [Wcs.Source] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-08-08 16:20:12.882 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:20:12.946 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK_Wcs.__EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-08-08 16:20:12.950 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:20:12.966 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-08 16:20:12.974 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 16:20:12.997 +08:00 [INF] Applying migration '20250808081441_InitialCreate'.
2025-08-08 16:20:13.078 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.Device] (
    [Id] uniqueidentifier NOT NULL,
    [DeviceType] int NOT NULL,
    [DeviceName] nvarchar(450) NOT NULL,
    [Description] nvarchar(100) NULL,
    [Config] nvarchar(512) NOT NULL,
    [Enable] bit NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(20) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.Device] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-08 16:20:13.084 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.JobConfig] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(50) NULL,
    [JobType] nvarchar(50) NOT NULL,
    [TimeOut] int NOT NULL,
    [Timer] int NOT NULL,
    [IsStart] bit NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(20) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.JobConfig] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-08 16:20:13.089 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.PlcMap] (
    [Id] uniqueidentifier NOT NULL,
    [DeviceName] nvarchar(32) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [PlcName] nvarchar(32) NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(32) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.PlcMap] PRIMARY KEY ([Id])
);
2025-08-08 16:20:13.093 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.Region] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(20) NOT NULL,
    [Description] nvarchar(50) NULL,
    [CurrentNum] int NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(20) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.Region] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-08 16:20:13.099 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.TaskExecuteStep] (
    [Id] uniqueidentifier NOT NULL,
    [IsSend] bit NOT NULL,
    [Description] nvarchar(50) NULL,
    [PathNodeGroup] nvarchar(50) NULL,
    [ExecuteNodePath] uniqueidentifier NULL,
    [Version] rowversion NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(20) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.TaskExecuteStep] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-08 16:20:13.104 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.ExecuteNodePath] (
    [Id] uniqueidentifier NOT NULL,
    [PahtNodeGroup] nvarchar(max) NOT NULL,
    [CurrentDeviceType] int NOT NULL,
    [TaskType] int NOT NULL,
    [CurrentDeviceName] nvarchar(20) NULL,
    [NextDeviceName] nvarchar(max) NULL,
    [RegionId] uniqueidentifier NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(20) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.ExecuteNodePath] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Wcs.ExecuteNodePath_Wcs.Region_RegionId] FOREIGN KEY ([RegionId]) REFERENCES [Wcs.Region] ([Id])
);
2025-08-08 16:20:13.111 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.WcsTask] (
    [Id] uniqueidentifier NOT NULL,
    [TaskCode] nvarchar(50) NULL,
    [SerialNumber] int NOT NULL IDENTITY(4000, 1),
    [Container] nvarchar(50) NOT NULL,
    [TaskType] int NOT NULL,
    [TaskStatus] int NOT NULL,
    [CreatorSystemType] int NOT NULL,
    [Description] nvarchar(max) NULL,
    [GetLocation_GetTunnel] nvarchar(10) NULL,
    [GetLocation_GetFloor] nvarchar(10) NULL,
    [GetLocation_GetRow] nvarchar(10) NULL,
    [GetLocation_GetColumn] nvarchar(10) NULL,
    [GetLocation_GetDepth] nvarchar(10) NULL,
    [PutLocation_PutTunnel] nvarchar(10) NULL,
    [PutLocation_PutFloor] nvarchar(10) NULL,
    [PutLocation_PutRow] nvarchar(10) NULL,
    [PutLocation_PutColumn] nvarchar(10) NULL,
    [PutLocation_PutDepth] nvarchar(10) NULL,
    [StockOutPosition] nvarchar(max) NULL,
    [RegionId] uniqueidentifier NULL,
    [TaskExecuteStepId] uniqueidentifier NOT NULL,
    [Version] rowversion NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(20) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.WcsTask] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Wcs.WcsTask_Wcs.TaskExecuteStep_TaskExecuteStepId] FOREIGN KEY ([TaskExecuteStepId]) REFERENCES [Wcs.TaskExecuteStep] ([Id]) ON DELETE CASCADE
);
2025-08-08 16:20:13.116 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.Device_DeviceName] ON [Wcs.Device] ([DeviceName]);
2025-08-08 16:20:13.119 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Wcs.ExecuteNodePath_RegionId] ON [Wcs.ExecuteNodePath] ([RegionId]);
2025-08-08 16:20:13.122 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.JobConfig_Name] ON [Wcs.JobConfig] ([Name]);
2025-08-08 16:20:13.124 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.Region_Code] ON [Wcs.Region] ([Code]);
2025-08-08 16:20:13.126 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.WcsTask_SerialNumber] ON [Wcs.WcsTask] ([SerialNumber]);
2025-08-08 16:20:13.130 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.WcsTask_TaskCode] ON [Wcs.WcsTask] ([TaskCode]) WHERE [TaskCode] IS NOT NULL;
2025-08-08 16:20:13.132 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.WcsTask_TaskExecuteStepId] ON [Wcs.WcsTask] ([TaskExecuteStepId]);
2025-08-08 16:20:13.136 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [Wcs.__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250808081441_InitialCreate', N'8.0.0');
2025-08-08 16:20:13.179 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:20:13.182 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-08 16:20:13.184 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:20:13.191 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Identity.__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK_Identity.__EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-08-08 16:20:13.194 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:20:13.197 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-08 16:20:13.201 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 16:20:13.204 +08:00 [INF] Applying migration '20250807024903_InitialCreate'.
2025-08-08 16:20:13.217 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Identity.Role] (
    [Id] uniqueidentifier NOT NULL,
    [RoleName] nvarchar(50) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Identity.Role] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-08 16:20:13.224 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Identity.User] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [Phone] nvarchar(max) NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(20) NOT NULL,
    [LockoutEnd] datetimeoffset NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Identity.User] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Identity.User_Identity.Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Identity.Role] ([Id]) ON DELETE CASCADE
);
2025-08-08 16:20:13.228 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE NONCLUSTERED INDEX [IX_Identity.Role_RoleName] ON [Identity.Role] ([RoleName]);
2025-08-08 16:20:13.230 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Identity.User_RoleId] ON [Identity.User] ([RoleId]);
2025-08-08 16:20:13.233 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE NONCLUSTERED INDEX [IX_Identity.User_Username] ON [Identity.User] ([Username]);
2025-08-08 16:20:13.236 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [Identity.__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250807024903_InitialCreate', N'8.0.0');
2025-08-08 16:20:13.326 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:20:13.328 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-08 16:20:13.330 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:20:13.338 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Plc.__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK_Plc.__EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-08-08 16:20:13.341 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:20:13.344 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-08 16:20:13.347 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 16:20:13.359 +08:00 [INF] Applying migration '20250804021810_InitialCreate'.
2025-08-08 16:20:13.374 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Plc.S7NetConfig] (
    [Id] uniqueidentifier NOT NULL,
    [S7Type] int NOT NULL,
    [Solt] smallint NOT NULL,
    [Rack] smallint NOT NULL,
    [ReadTimeOut] int NOT NULL,
    [WriteTimeOut] int NOT NULL,
    [IsUse] bit NOT NULL,
    [ReadHeart] nvarchar(20) NULL,
    [WriteHeart] nvarchar(20) NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    [Ip] nvarchar(max) NOT NULL,
    [Port] int NOT NULL,
    CONSTRAINT [PK_Plc.S7NetConfig] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-08 16:20:13.381 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Plc.S7EntityItem] (
    [Id] uniqueidentifier NOT NULL,
    [Ip] nvarchar(20) NOT NULL,
    [S7DataType] int NOT NULL,
    [DBAddress] int NOT NULL,
    [DataOffset] int NOT NULL,
    [BitOffset] tinyint NULL,
    [S7BlockType] int NOT NULL,
    [Index] int NOT NULL,
    [Description] nvarchar(50) NULL,
    [Name] nvarchar(20) NOT NULL,
    [ArrtypeLength] tinyint NULL,
    [DeviceName] nvarchar(max) NOT NULL,
    [IsUse] bit NOT NULL,
    [NetGuid] uniqueidentifier NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Plc.S7EntityItem] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Plc.S7EntityItem_Plc.S7NetConfig_NetGuid] FOREIGN KEY ([NetGuid]) REFERENCES [Plc.S7NetConfig] ([Id]) ON DELETE CASCADE
);
2025-08-08 16:20:13.385 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Plc.S7EntityItem_NetGuid] ON [Plc.S7EntityItem] ([NetGuid]);
2025-08-08 16:20:13.389 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [Plc.__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250804021810_InitialCreate', N'8.0.0');
2025-08-08 16:20:13.690 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-08 16:20:13.802 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-08 16:20:13.860 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Presentation.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-08 16:20:13.866 +08:00 [INF] Configured endpoint PlcMapDataIntegrationEvent, Consumer: Wcs.Presentation.Custom.PlcMapDataIntegrationEventConsumer
2025-08-08 16:20:13.868 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Presentation.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-08 16:20:13.871 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Presentation.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-08 16:20:13.874 +08:00 [INF] Configured endpoint PlcMapEventCommit, Consumer: Plc.Presentation.Custom.PlcMapEventCommitConsumer
2025-08-08 16:20:13.929 +08:00 [INF] Configured endpoint PlcMapState, Saga: Plc.Presentation.Saga.PlcMapState, State Machine: Plc.Presentation.Saga.PlcMapSaga
2025-08-08 16:20:14.185 +08:00 [DBG] Starting bus instances: IBus
2025-08-08 16:20:14.190 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-08 16:20:14.258 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapDataIntegrationEvent"
2025-08-08 16:20:14.258 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_io6yyyrronegkyu1bdq7cidgdu"
2025-08-08 16:20:14.258 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-08 16:20:14.258 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-08 16:20:14.258 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-08 16:20:14.258 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapEventCommit"
2025-08-08 16:20:14.258 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapState"
2025-08-08 16:20:14.261 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-08 16:20:14.374 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-08 16:20:14.383 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-08 16:20:14.684 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-08 16:20:14.686 +08:00 [INF] Hosting environment: Development
2025-08-08 16:20:14.688 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-08 16:20:14.812 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-08 16:20:15.083 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 283.9906ms
2025-08-08 16:20:15.098 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-08 16:20:15.103 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 5.6664ms
2025-08-08 16:20:15.266 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-08 16:20:15.321 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 54.61ms
2025-08-08 16:20:15.394 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-08 16:20:15.423 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 29.2326ms
2025-08-08 16:22:29.508 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/add-adminrole - null 0
2025-08-08 16:22:29.516 +08:00 [INF] CORS policy execution successful.
2025-08-08 16:22:29.532 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-08 16:22:29.587 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminrole'
2025-08-08 16:22:44.064 +08:00 [INF] Executed DbCommand (176ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[RoleName]
FROM [Identity.Role] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[RoleName] = @__roleName_0
2025-08-08 16:22:44.214 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 20), @p6='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Identity.Role] ([Id], [CreationTime], [Description], [IsDeleted], [LastModificationTime], [LastModifierUser], [RoleName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-08-08 16:22:44.236 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminrole'
2025-08-08 16:22:44.248 +08:00 [INF] HTTP POST /user/add-adminrole responded 200 in 14711.2533 ms
2025-08-08 16:22:44.350 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/add-adminrole - 200 null application/json; charset=utf-8 14842.2069ms
2025-08-08 16:35:34.841 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/add-adminuser - null 0
2025-08-08 16:35:34.866 +08:00 [INF] CORS policy execution successful.
2025-08-08 16:35:34.872 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-08-08 16:35:35.277 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[Email], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[LockoutEnd], [i].[Name], [i].[Password], [i].[Phone], [i].[RoleId], [i].[Username]
FROM [Identity.User] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[Username] = @__userName_0
2025-08-08 16:35:35.300 +08:00 [INF] Executed DbCommand (15ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[RoleName]
FROM [Identity.Role] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[RoleName] = @__roleName_0
2025-08-08 16:35:35.379 +08:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 20), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 4000), @p9='?' (Size = 20), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Identity.User] ([Id], [CreationTime], [Description], [Email], [IsDeleted], [LastModificationTime], [LastModifierUser], [LockoutEnd], [Name], [Password], [Phone], [RoleId], [Username])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-08 16:35:35.410 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-08-08 16:35:35.413 +08:00 [INF] HTTP POST /user/add-adminuser responded 200 in 541.7553 ms
2025-08-08 16:35:35.551 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/add-adminuser - 200 null application/json; charset=utf-8 710.7584ms
2025-08-08 16:36:14.802 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/plc/add-allplc-config - multipart/form-data; boundary=----WebKitFormBoundarywBKclYeezZ7m7Vqu 11021
2025-08-08 16:36:14.818 +08:00 [INF] CORS policy execution successful.
2025-08-08 16:36:14.928 +08:00 [INF] Executing endpoint 'HTTP: POST plc/add-allplc-config'
2025-08-08 16:36:27.085 +08:00 [DBG] Create send transport: "loopback://localhost/urn:message:Plc.CustomEvents.Saga:PlcMap+PlcMapCreated"
2025-08-08 16:36:27.154 +08:00 [DBG] SEND "loopback://localhost/urn:message:Plc.CustomEvents.Saga:PlcMap+PlcMapCreated" "ac3c0000-8480-9065-216c-08ddd656aa69" Plc.CustomEvents.Saga.PlcMap+PlcMapCreated
2025-08-08 16:36:27.210 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 20), @p7='?' (DbType = Int32), @p8='?' (DbType = Int16), @p9='?' (Size = 20), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int16), @p13='?' (Size = 20), @p14='?' (DbType = Int32), @p15='?' (DbType = Guid), @p16='?' (DbType = Byte), @p17='?' (Size = 1) (DbType = Byte), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (Size = 20), @p25='?' (DbType = Boolean), @p26='?' (DbType = Boolean), @p27='?' (DbType = DateTime2), @p28='?' (Size = 20), @p29='?' (Size = 20), @p30='?' (DbType = Guid), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (DbType = Guid), @p34='?' (DbType = Byte), @p35='?' (DbType = Byte), @p36='?' (DbType = DateTime2), @p37='?' (DbType = Int32), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Size = 4000), @p41='?' (DbType = Int32), @p42='?' (Size = 20), @p43='?' (DbType = Boolean), @p44='?' (DbType = Boolean), @p45='?' (DbType = DateTime2), @p46='?' (Size = 20), @p47='?' (Size = 20), @p48='?' (DbType = Guid), @p49='?' (DbType = Int32), @p50='?' (DbType = Int32), @p51='?' (DbType = Guid), @p52='?' (DbType = Byte), @p53='?' (DbType = Byte), @p54='?' (DbType = DateTime2), @p55='?' (DbType = Int32), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Size = 4000), @p59='?' (DbType = Int32), @p60='?' (Size = 20), @p61='?' (DbType = Boolean), @p62='?' (DbType = Boolean), @p63='?' (DbType = DateTime2), @p64='?' (Size = 20), @p65='?' (Size = 20), @p66='?' (DbType = Guid), @p67='?' (DbType = Int32), @p68='?' (DbType = Int32), @p69='?' (DbType = Guid), @p70='?' (DbType = Byte), @p71='?' (DbType = Byte), @p72='?' (DbType = DateTime2), @p73='?' (DbType = Int32), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Size = 4000), @p77='?' (DbType = Int32), @p78='?' (Size = 20), @p79='?' (DbType = Boolean), @p80='?' (DbType = Boolean), @p81='?' (DbType = DateTime2), @p82='?' (Size = 20), @p83='?' (Size = 20), @p84='?' (DbType = Guid), @p85='?' (DbType = Int32), @p86='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Plc.S7NetConfig] ([Id], [CreationTime], [Ip], [IsDeleted], [IsUse], [LastModificationTime], [LastModifierUser], [Port], [Rack], [ReadHeart], [ReadTimeOut], [S7Type], [Solt], [WriteHeart], [WriteTimeOut])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
INSERT INTO [Plc.S7EntityItem] ([Id], [ArrtypeLength], [BitOffset], [CreationTime], [DBAddress], [DataOffset], [Description], [DeviceName], [Index], [Ip], [IsDeleted], [IsUse], [LastModificationTime], [LastModifierUser], [Name], [NetGuid], [S7BlockType], [S7DataType])
VALUES (@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32),
(@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50),
(@p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68),
(@p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86);
2025-08-08 16:36:27.223 +08:00 [DBG] SAGA:Plc.Presentation.Saga.PlcMapState:"4769a0e7-af21-4ac3-87d4-182be811cf93" Created Plc.CustomEvents.Saga.PlcMap+PlcMapCreated
2025-08-08 16:36:27.243 +08:00 [DBG] SAGA:Plc.Presentation.Saga.PlcMapState:"4769a0e7-af21-4ac3-87d4-182be811cf93" Added Plc.CustomEvents.Saga.PlcMap+PlcMapCreated
2025-08-08 16:36:27.245 +08:00 [INF] Executed endpoint 'HTTP: POST plc/add-allplc-config'
2025-08-08 16:36:27.251 +08:00 [INF] HTTP POST /plc/add-allplc-config responded 200 in 12427.0040 ms
2025-08-08 16:36:27.275 +08:00 [DBG] Create send transport: "loopback://localhost/urn:message:Wcs.CustomEvents:PlcMapDataIntegrationEvent"
2025-08-08 16:36:27.395 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/plc/add-allplc-config - 200 null application/json; charset=utf-8 12592.3877ms
2025-08-08 16:36:27.409 +08:00 [DBG] SEND "loopback://localhost/urn:message:Wcs.CustomEvents:PlcMapDataIntegrationEvent" "ac3c0000-8480-9065-f978-08ddd656aa95" Wcs.CustomEvents.PlcMapDataIntegrationEvent
2025-08-08 16:36:27.502 +08:00 [DBG] RECEIVE "loopback://localhost/PlcMapState" "ac3c0000-8480-9065-216c-08ddd656aa69" Plc.CustomEvents.Saga.PlcMap+PlcMapCreated Plc.Presentation.Saga.PlcMapState("00:00:00.2891852")
2025-08-08 16:36:27.538 +08:00 [DBG] Create send transport: "loopback://localhost/urn:message:MassTransit:ReceiveFault"
2025-08-08 16:36:27.552 +08:00 [DBG] SEND "loopback://localhost/urn:message:MassTransit:ReceiveFault" "ac3c0000-8480-9065-e2ce-08ddd656aaab" MassTransit.ReceiveFault
2025-08-08 16:36:27.558 +08:00 [ERR] R-FAULT "loopback://localhost/PlcMapDataIntegrationEvent" ac3c0000-8480-9065-f978-08ddd656aa95 "00:00:00.1465777"
System.NotSupportedException: Deserialization of types without a parameterless constructor, a singular parameterized constructor, or a parameterized constructor annotated with 'JsonConstructorAttribute' is not supported. Type 'Wcs.CustomEvents.PlcMapDataIntegrationEvent'. Path: $ | LineNumber: 0 | BytePositionInLine: 1.
 ---> System.NotSupportedException: Deserialization of types without a parameterless constructor, a singular parameterized constructor, or a parameterized constructor annotated with 'JsonConstructorAttribute' is not supported. Type 'Wcs.CustomEvents.PlcMapDataIntegrationEvent'.
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException(ReadStack& state, Utf8JsonReader& reader, Exception innerException)
   at System.Text.Json.ThrowHelper.ThrowNotSupportedException_DeserializeNoConstructor(JsonTypeInfo typeInfo, Utf8JsonReader& reader, ReadStack& state)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.Deserialize(Utf8JsonReader& reader, ReadStack& state)
   at System.Text.Json.JsonSerializer.ReadFromSpan[TValue](ReadOnlySpan`1 utf8Json, JsonTypeInfo`1 jsonTypeInfo, Nullable`1 actualByteCount)
   at System.Text.Json.JsonSerializer.Deserialize[TValue](JsonElement element, JsonSerializerOptions options)
   at MassTransit.Serialization.SystemTextJsonSerializerContext.TryGetMessage[T](T& message) in /_/src/MassTransit/Serialization/SystemTextJsonSerializerContext.cs:line 50
   at MassTransit.Serialization.BodyConsumeContext.TryGetMessage[T](ConsumeContext`1& message) in /_/src/MassTransit/Serialization/BodyConsumeContext.cs:line 49
   at MassTransit.Middleware.ConsumeContextOutputMessageTypeFilter`1.Send(ConsumeContext context, IPipe`1 next) in /_/src/MassTransit/Middleware/ConsumeContextOutputMessageTypeFilter.cs:line 38
   at MassTransit.Middleware.ConsumeContextMessageTypeFilter.OutputFilter`1.Send(ConsumeContext context, IPipe`1 next) in /_/src/MassTransit/Middleware/MessageTypeFilter.cs:line 138
   at MassTransit.Middleware.ConsumeContextMessageTypeFilter.Send(ConsumeContext context, IPipe`1 next) in /_/src/MassTransit/Middleware/MessageTypeFilter.cs:line 62
   at MassTransit.Configuration.PipeConfigurator`1.LastPipe.Send(TContext context) in /_/src/MassTransit.Abstractions/Middleware/Configuration/PipeBuilder.cs:line 123
   at MassTransit.Middleware.ConsumePipe.Send(ConsumeContext context) in /_/src/MassTransit/Middleware/ConsumePipe.cs:line 43
   at MassTransit.Middleware.DeserializeFilter.Send(ReceiveContext context, IPipe`1 next) in /_/src/MassTransit/Middleware/DeserializeFilter.cs:line 40
   at MassTransit.Middleware.RescueFilter`2.MassTransit.IFilter<TContext>.Send(TContext context, IPipe`1 next) in /_/src/MassTransit/Middleware/RescueFilter.cs:line 43
2025-08-08 16:39:09.843 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:39:09.901 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-08 16:39:09.908 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:39:09.917 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-08 16:39:09.946 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 16:39:09.967 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 16:39:10.005 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:39:10.010 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-08 16:39:10.015 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:39:10.018 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-08 16:39:10.024 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 16:39:10.027 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 16:39:10.109 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:39:10.113 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-08 16:39:10.117 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:39:10.121 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-08 16:39:10.128 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 16:39:10.137 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-08 16:39:10.480 +08:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-08 16:39:10.691 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-08 16:39:10.775 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Presentation.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-08 16:39:10.781 +08:00 [INF] Configured endpoint PlcMapDataIntegrationEvent, Consumer: Wcs.Presentation.Custom.PlcMapDataIntegrationEventConsumer
2025-08-08 16:39:10.784 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Presentation.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-08 16:39:10.786 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Presentation.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-08 16:39:10.788 +08:00 [INF] Configured endpoint PlcMapEventCommit, Consumer: Plc.Presentation.Custom.PlcMapEventCommitConsumer
2025-08-08 16:39:10.838 +08:00 [INF] Configured endpoint PlcMapState, Saga: Plc.Presentation.Saga.PlcMapState, State Machine: Plc.Presentation.Saga.PlcMapSaga
2025-08-08 16:39:11.048 +08:00 [DBG] Starting bus instances: IBus
2025-08-08 16:39:11.052 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-08 16:39:11.195 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-08 16:39:11.195 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-08 16:39:11.195 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapDataIntegrationEvent"
2025-08-08 16:39:11.195 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapEventCommit"
2025-08-08 16:39:11.195 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapState"
2025-08-08 16:39:11.195 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_t1uyyyrronegkx6zbdq7ciacys"
2025-08-08 16:39:11.195 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-08 16:39:11.199 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-08 16:39:11.352 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-08 16:39:11.358 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-08 16:39:11.568 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-08 16:39:11.571 +08:00 [INF] Hosting environment: Development
2025-08-08 16:39:11.572 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-08 16:39:11.843 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-08 16:39:12.154 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 319.3981ms
2025-08-08 16:39:12.182 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-08 16:39:12.258 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 76.9123ms
2025-08-08 16:39:12.321 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-08 16:39:12.426 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 105.0636ms
2025-08-08 16:39:12.490 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-08 16:39:12.513 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 23.0516ms
2025-08-08 16:40:06.871 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/plc/add-allplc-config - multipart/form-data; boundary=----WebKitFormBoundarydI2rfpdE2ZBsLceZ 11021
2025-08-08 16:40:06.891 +08:00 [INF] CORS policy execution successful.
2025-08-08 16:40:06.915 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-08 16:40:07.049 +08:00 [INF] Executing endpoint 'HTTP: POST plc/add-allplc-config'
2025-08-08 16:40:15.536 +08:00 [DBG] Create send transport: "loopback://localhost/urn:message:Plc.CustomEvents.Saga:PlcMap+PlcMapCreated"
2025-08-08 16:40:15.588 +08:00 [DBG] SEND "loopback://localhost/urn:message:Plc.CustomEvents.Saga:PlcMap+PlcMapCreated" "8ca60000-8480-9065-9e3d-08ddd6573292" Plc.CustomEvents.Saga.PlcMap+PlcMapCreated
2025-08-08 16:40:18.176 +08:00 [DBG] SAGA:Plc.Presentation.Saga.PlcMapState:"0166282d-5ae7-428e-99f1-a7057c72a4a0" Created Plc.CustomEvents.Saga.PlcMap+PlcMapCreated
2025-08-08 16:40:18.189 +08:00 [DBG] SAGA:Plc.Presentation.Saga.PlcMapState:"0166282d-5ae7-428e-99f1-a7057c72a4a0" Added Plc.CustomEvents.Saga.PlcMap+PlcMapCreated
2025-08-08 16:40:18.221 +08:00 [DBG] Create send transport: "loopback://localhost/urn:message:Wcs.CustomEvents:PlcMapDataIntegrationEvent"
2025-08-08 16:40:18.238 +08:00 [DBG] SEND "loopback://localhost/urn:message:Wcs.CustomEvents:PlcMapDataIntegrationEvent" "8ca60000-8480-9065-ed67-08ddd657342b" Wcs.CustomEvents.PlcMapDataIntegrationEvent
2025-08-08 16:40:26.577 +08:00 [DBG] RECEIVE "loopback://localhost/PlcMapState" "8ca60000-8480-9065-9e3d-08ddd6573292" Plc.CustomEvents.Saga.PlcMap+PlcMapCreated Plc.Presentation.Saga.PlcMapState("00:00:00.0949800")
2025-08-08 16:40:26.753 +08:00 [INF] Executed DbCommand (28ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 20), @p7='?' (DbType = Int32), @p8='?' (DbType = Int16), @p9='?' (Size = 20), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int16), @p13='?' (Size = 20), @p14='?' (DbType = Int32), @p15='?' (DbType = Guid), @p16='?' (DbType = Byte), @p17='?' (DbType = Byte), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (Size = 20), @p25='?' (DbType = Boolean), @p26='?' (DbType = Boolean), @p27='?' (DbType = DateTime2), @p28='?' (Size = 20), @p29='?' (Size = 20), @p30='?' (DbType = Guid), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (DbType = Guid), @p34='?' (DbType = Byte), @p35='?' (DbType = Byte), @p36='?' (DbType = DateTime2), @p37='?' (DbType = Int32), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Size = 4000), @p41='?' (DbType = Int32), @p42='?' (Size = 20), @p43='?' (DbType = Boolean), @p44='?' (DbType = Boolean), @p45='?' (DbType = DateTime2), @p46='?' (Size = 20), @p47='?' (Size = 20), @p48='?' (DbType = Guid), @p49='?' (DbType = Int32), @p50='?' (DbType = Int32), @p51='?' (DbType = Guid), @p52='?' (DbType = Byte), @p53='?' (DbType = Byte), @p54='?' (DbType = DateTime2), @p55='?' (DbType = Int32), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Size = 4000), @p59='?' (DbType = Int32), @p60='?' (Size = 20), @p61='?' (DbType = Boolean), @p62='?' (DbType = Boolean), @p63='?' (DbType = DateTime2), @p64='?' (Size = 20), @p65='?' (Size = 20), @p66='?' (DbType = Guid), @p67='?' (DbType = Int32), @p68='?' (DbType = Int32), @p69='?' (DbType = Guid), @p70='?' (DbType = Byte), @p71='?' (Size = 1) (DbType = Byte), @p72='?' (DbType = DateTime2), @p73='?' (DbType = Int32), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Size = 4000), @p77='?' (DbType = Int32), @p78='?' (Size = 20), @p79='?' (DbType = Boolean), @p80='?' (DbType = Boolean), @p81='?' (DbType = DateTime2), @p82='?' (Size = 20), @p83='?' (Size = 20), @p84='?' (DbType = Guid), @p85='?' (DbType = Int32), @p86='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Plc.S7NetConfig] ([Id], [CreationTime], [Ip], [IsDeleted], [IsUse], [LastModificationTime], [LastModifierUser], [Port], [Rack], [ReadHeart], [ReadTimeOut], [S7Type], [Solt], [WriteHeart], [WriteTimeOut])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
INSERT INTO [Plc.S7EntityItem] ([Id], [ArrtypeLength], [BitOffset], [CreationTime], [DBAddress], [DataOffset], [Description], [DeviceName], [Index], [Ip], [IsDeleted], [IsUse], [LastModificationTime], [LastModifierUser], [Name], [NetGuid], [S7BlockType], [S7DataType])
VALUES (@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32),
(@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50),
(@p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68),
(@p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86);
2025-08-08 16:40:26.890 +08:00 [ERR] Failed executing DbCommand (110ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 32), @p7='?' (Size = 32), @p8='?' (DbType = Guid), @p9='?' (DbType = DateTime2), @p10='?' (Size = 4000), @p11='?' (Size = 32), @p12='?' (DbType = Boolean), @p13='?' (DbType = DateTime2), @p14='?' (Size = 32), @p15='?' (Size = 32), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime2), @p18='?' (Size = 4000), @p19='?' (Size = 32), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 32), @p23='?' (Size = 32), @p24='?' (DbType = Guid), @p25='?' (DbType = DateTime2), @p26='?' (Size = 4000), @p27='?' (Size = 32), @p28='?' (DbType = Boolean), @p29='?' (DbType = DateTime2), @p30='?' (Size = 32), @p31='?' (Size = 32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.PlcMap] ([Id], [CreationTime], [Description], [DeviceName], [IsDeleted], [LastModificationTime], [LastModifierUser], [PlcName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7),
(@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31);
2025-08-08 16:40:26.933 +08:00 [INF] Executed endpoint 'HTTP: POST plc/add-allplc-config'
2025-08-08 16:40:27.015 +08:00 [INF] HTTP POST /plc/add-allplc-config responded 200 in 20040.7767 ms
2025-08-08 16:40:27.143 +08:00 [ERR] An exception occurred in the database while saving changes for context type 'Wcs.Infrastructure.Database.WCSDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'Description'，表 'Wcs.Source.dbo.Wcs.PlcMap'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:9d9a133a-c626-4434-bb28-82c72527734f
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'Description'，表 'Wcs.Source.dbo.Wcs.PlcMap'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:9d9a133a-c626-4434-bb28-82c72527734f
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-08 16:40:27.311 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/plc/add-allplc-config - 200 null application/json; charset=utf-8 20439.6937ms
2025-08-08 16:46:33.508 +08:00 [INF] Executed DbCommand (269ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [Wcs.Source];
2025-08-08 16:46:33.686 +08:00 [INF] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [Wcs.Source] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-08-08 16:46:33.713 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:46:33.781 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK_Wcs.__EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-08-08 16:46:33.784 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:46:33.799 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-08 16:46:33.806 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 16:46:33.822 +08:00 [INF] Applying migration '20250808084501_InitialCreate'.
2025-08-08 16:46:33.906 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.Device] (
    [Id] uniqueidentifier NOT NULL,
    [DeviceType] int NOT NULL,
    [DeviceName] nvarchar(64) NOT NULL,
    [Description] nvarchar(100) NULL,
    [Config] nvarchar(512) NOT NULL,
    [Enable] bit NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(20) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.Device] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-08 16:46:33.912 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.JobConfig] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(50) NULL,
    [JobType] nvarchar(50) NOT NULL,
    [TimeOut] int NOT NULL,
    [Timer] int NOT NULL,
    [IsStart] bit NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(20) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.JobConfig] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-08 16:46:33.918 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.PlcMap] (
    [Id] uniqueidentifier NOT NULL,
    [DeviceName] nvarchar(32) NOT NULL,
    [Description] nvarchar(64) NULL,
    [PlcName] nvarchar(32) NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(32) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.PlcMap] PRIMARY KEY ([Id])
);
2025-08-08 16:46:33.923 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.Region] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(20) NOT NULL,
    [Description] nvarchar(50) NULL,
    [CurrentNum] int NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(20) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.Region] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-08 16:46:33.931 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.TaskExecuteStep] (
    [Id] uniqueidentifier NOT NULL,
    [IsSend] bit NOT NULL,
    [Description] nvarchar(50) NULL,
    [PathNodeGroup] nvarchar(50) NULL,
    [ExecuteNodePath] uniqueidentifier NULL,
    [Version] rowversion NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(20) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.TaskExecuteStep] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-08 16:46:33.940 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.ExecuteNodePath] (
    [Id] uniqueidentifier NOT NULL,
    [PahtNodeGroup] nvarchar(max) NOT NULL,
    [CurrentDeviceType] int NOT NULL,
    [TaskType] int NOT NULL,
    [CurrentDeviceName] nvarchar(20) NULL,
    [NextDeviceName] nvarchar(max) NULL,
    [RegionId] uniqueidentifier NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(20) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.ExecuteNodePath] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Wcs.ExecuteNodePath_Wcs.Region_RegionId] FOREIGN KEY ([RegionId]) REFERENCES [Wcs.Region] ([Id])
);
2025-08-08 16:46:33.947 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.WcsTask] (
    [Id] uniqueidentifier NOT NULL,
    [TaskCode] nvarchar(50) NULL,
    [SerialNumber] int NOT NULL IDENTITY(4000, 1),
    [Container] nvarchar(50) NOT NULL,
    [TaskType] int NOT NULL,
    [TaskStatus] int NOT NULL,
    [CreatorSystemType] int NOT NULL,
    [Description] nvarchar(max) NULL,
    [GetLocation_GetTunnel] nvarchar(10) NULL,
    [GetLocation_GetFloor] nvarchar(10) NULL,
    [GetLocation_GetRow] nvarchar(10) NULL,
    [GetLocation_GetColumn] nvarchar(10) NULL,
    [GetLocation_GetDepth] nvarchar(10) NULL,
    [PutLocation_PutTunnel] nvarchar(10) NULL,
    [PutLocation_PutFloor] nvarchar(10) NULL,
    [PutLocation_PutRow] nvarchar(10) NULL,
    [PutLocation_PutColumn] nvarchar(10) NULL,
    [PutLocation_PutDepth] nvarchar(10) NULL,
    [StockOutPosition] nvarchar(max) NULL,
    [RegionId] uniqueidentifier NULL,
    [TaskExecuteStepId] uniqueidentifier NOT NULL,
    [Version] rowversion NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(20) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.WcsTask] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Wcs.WcsTask_Wcs.TaskExecuteStep_TaskExecuteStepId] FOREIGN KEY ([TaskExecuteStepId]) REFERENCES [Wcs.TaskExecuteStep] ([Id]) ON DELETE CASCADE
);
2025-08-08 16:46:33.954 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.Device_DeviceName] ON [Wcs.Device] ([DeviceName]);
2025-08-08 16:46:33.957 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Wcs.ExecuteNodePath_RegionId] ON [Wcs.ExecuteNodePath] ([RegionId]);
2025-08-08 16:46:33.960 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.JobConfig_Name] ON [Wcs.JobConfig] ([Name]);
2025-08-08 16:46:33.963 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.Region_Code] ON [Wcs.Region] ([Code]);
2025-08-08 16:46:33.967 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.WcsTask_SerialNumber] ON [Wcs.WcsTask] ([SerialNumber]);
2025-08-08 16:46:33.972 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.WcsTask_TaskCode] ON [Wcs.WcsTask] ([TaskCode]) WHERE [TaskCode] IS NOT NULL;
2025-08-08 16:46:33.975 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.WcsTask_TaskExecuteStepId] ON [Wcs.WcsTask] ([TaskExecuteStepId]);
2025-08-08 16:46:33.979 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [Wcs.__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250808084501_InitialCreate', N'8.0.0');
2025-08-08 16:46:34.024 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:46:34.027 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-08 16:46:34.030 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:46:34.038 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Identity.__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK_Identity.__EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-08-08 16:46:34.041 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:46:34.044 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-08 16:46:34.047 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 16:46:34.052 +08:00 [INF] Applying migration '20250807024903_InitialCreate'.
2025-08-08 16:46:34.071 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Identity.Role] (
    [Id] uniqueidentifier NOT NULL,
    [RoleName] nvarchar(50) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Identity.Role] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-08 16:46:34.076 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Identity.User] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [Phone] nvarchar(max) NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(20) NOT NULL,
    [LockoutEnd] datetimeoffset NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Identity.User] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Identity.User_Identity.Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Identity.Role] ([Id]) ON DELETE CASCADE
);
2025-08-08 16:46:34.090 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE NONCLUSTERED INDEX [IX_Identity.Role_RoleName] ON [Identity.Role] ([RoleName]);
2025-08-08 16:46:34.099 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Identity.User_RoleId] ON [Identity.User] ([RoleId]);
2025-08-08 16:46:34.105 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE NONCLUSTERED INDEX [IX_Identity.User_Username] ON [Identity.User] ([Username]);
2025-08-08 16:46:34.109 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [Identity.__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250807024903_InitialCreate', N'8.0.0');
2025-08-08 16:46:34.194 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:46:34.197 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-08 16:46:34.201 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:46:34.208 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Plc.__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK_Plc.__EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-08-08 16:46:34.211 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-08 16:46:34.213 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-08 16:46:34.217 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-08 16:46:34.226 +08:00 [INF] Applying migration '20250804021810_InitialCreate'.
2025-08-08 16:46:34.239 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Plc.S7NetConfig] (
    [Id] uniqueidentifier NOT NULL,
    [S7Type] int NOT NULL,
    [Solt] smallint NOT NULL,
    [Rack] smallint NOT NULL,
    [ReadTimeOut] int NOT NULL,
    [WriteTimeOut] int NOT NULL,
    [IsUse] bit NOT NULL,
    [ReadHeart] nvarchar(20) NULL,
    [WriteHeart] nvarchar(20) NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    [Ip] nvarchar(max) NOT NULL,
    [Port] int NOT NULL,
    CONSTRAINT [PK_Plc.S7NetConfig] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-08 16:46:34.245 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Plc.S7EntityItem] (
    [Id] uniqueidentifier NOT NULL,
    [Ip] nvarchar(20) NOT NULL,
    [S7DataType] int NOT NULL,
    [DBAddress] int NOT NULL,
    [DataOffset] int NOT NULL,
    [BitOffset] tinyint NULL,
    [S7BlockType] int NOT NULL,
    [Index] int NOT NULL,
    [Description] nvarchar(50) NULL,
    [Name] nvarchar(20) NOT NULL,
    [ArrtypeLength] tinyint NULL,
    [DeviceName] nvarchar(max) NOT NULL,
    [IsUse] bit NOT NULL,
    [NetGuid] uniqueidentifier NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Plc.S7EntityItem] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Plc.S7EntityItem_Plc.S7NetConfig_NetGuid] FOREIGN KEY ([NetGuid]) REFERENCES [Plc.S7NetConfig] ([Id]) ON DELETE CASCADE
);
2025-08-08 16:46:34.251 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Plc.S7EntityItem_NetGuid] ON [Plc.S7EntityItem] ([NetGuid]);
2025-08-08 16:46:34.256 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [Plc.__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250804021810_InitialCreate', N'8.0.0');
2025-08-08 16:46:34.574 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-08 16:46:34.698 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-08 16:46:34.762 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Presentation.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-08 16:46:34.767 +08:00 [INF] Configured endpoint PlcMapDataIntegrationEvent, Consumer: Wcs.Presentation.Custom.PlcMapDataIntegrationEventConsumer
2025-08-08 16:46:34.769 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Presentation.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-08 16:46:34.771 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Presentation.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-08 16:46:34.774 +08:00 [INF] Configured endpoint PlcMapEventCommit, Consumer: Plc.Presentation.Custom.PlcMapEventCommitConsumer
2025-08-08 16:46:34.842 +08:00 [INF] Configured endpoint PlcMapState, Saga: Plc.Presentation.Saga.PlcMapState, State Machine: Plc.Presentation.Saga.PlcMapSaga
2025-08-08 16:46:35.096 +08:00 [DBG] Starting bus instances: IBus
2025-08-08 16:46:35.100 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-08 16:46:35.191 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapDataIntegrationEvent"
2025-08-08 16:46:35.191 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_g1gyyyrronegkcgrbdq7csywf9"
2025-08-08 16:46:35.191 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapState"
2025-08-08 16:46:35.191 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-08 16:46:35.191 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapEventCommit"
2025-08-08 16:46:35.191 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-08 16:46:35.191 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-08 16:46:35.194 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-08 16:46:35.337 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-08 16:46:35.346 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-08 16:46:35.603 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-08 16:46:35.604 +08:00 [INF] Hosting environment: Development
2025-08-08 16:46:35.606 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-08 16:46:35.784 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-08 16:46:36.130 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 356.849ms
2025-08-08 16:46:36.926 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-08 16:46:36.931 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 5.2624ms
2025-08-08 16:46:37.014 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-08 16:46:37.053 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.0901ms
2025-08-08 16:46:37.481 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-08 16:46:37.502 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.9237ms
2025-08-08 16:47:09.150 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/add-adminrole - null 0
2025-08-08 16:47:09.176 +08:00 [INF] CORS policy execution successful.
2025-08-08 16:47:09.219 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-08 16:47:09.409 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminrole'
2025-08-08 16:47:13.566 +08:00 [INF] Executed DbCommand (26ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[RoleName]
FROM [Identity.Role] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[RoleName] = @__roleName_0
2025-08-08 16:47:13.789 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 20), @p6='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Identity.Role] ([Id], [CreationTime], [Description], [IsDeleted], [LastModificationTime], [LastModifierUser], [RoleName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-08-08 16:47:13.856 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminrole'
2025-08-08 16:47:13.894 +08:00 [INF] HTTP POST /user/add-adminrole responded 200 in 4645.6483 ms
2025-08-08 16:47:14.033 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/add-adminrole - 200 null application/json; charset=utf-8 4882.6577ms
2025-08-08 16:47:18.848 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/add-adminuser - null 0
2025-08-08 16:47:18.863 +08:00 [INF] CORS policy execution successful.
2025-08-08 16:47:18.868 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-08-08 16:47:19.232 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[Email], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[LockoutEnd], [i].[Name], [i].[Password], [i].[Phone], [i].[RoleId], [i].[Username]
FROM [Identity.User] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[Username] = @__userName_0
2025-08-08 16:47:19.251 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[RoleName]
FROM [Identity.Role] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[RoleName] = @__roleName_0
2025-08-08 16:47:19.318 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 20), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 4000), @p9='?' (Size = 20), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Identity.User] ([Id], [CreationTime], [Description], [Email], [IsDeleted], [LastModificationTime], [LastModifierUser], [LockoutEnd], [Name], [Password], [Phone], [RoleId], [Username])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-08 16:47:19.353 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-08-08 16:47:19.359 +08:00 [INF] HTTP POST /user/add-adminuser responded 200 in 492.3448 ms
2025-08-08 16:47:19.484 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/add-adminuser - 200 null application/json; charset=utf-8 635.4228ms
2025-08-08 16:47:43.458 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/plc/add-allplc-config - multipart/form-data; boundary=----WebKitFormBoundaryWVvC8uwQHJgfLDAc 11021
2025-08-08 16:47:43.479 +08:00 [INF] CORS policy execution successful.
2025-08-08 16:47:43.622 +08:00 [INF] Executing endpoint 'HTTP: POST plc/add-allplc-config'
2025-08-08 16:47:47.840 +08:00 [DBG] Create send transport: "loopback://localhost/urn:message:Plc.CustomEvents.Saga:PlcMap+PlcMapCreated"
2025-08-08 16:47:47.944 +08:00 [DBG] SEND "loopback://localhost/urn:message:Plc.CustomEvents.Saga:PlcMap+PlcMapCreated" "348c0000-8480-9065-387d-08ddd658402c" Plc.CustomEvents.Saga.PlcMap+PlcMapCreated
2025-08-08 16:47:48.027 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 20), @p7='?' (DbType = Int32), @p8='?' (DbType = Int16), @p9='?' (Size = 20), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int16), @p13='?' (Size = 20), @p14='?' (DbType = Int32), @p15='?' (DbType = Guid), @p16='?' (DbType = Byte), @p17='?' (DbType = Byte), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (Size = 20), @p25='?' (DbType = Boolean), @p26='?' (DbType = Boolean), @p27='?' (DbType = DateTime2), @p28='?' (Size = 20), @p29='?' (Size = 20), @p30='?' (DbType = Guid), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (DbType = Guid), @p34='?' (DbType = Byte), @p35='?' (Size = 1) (DbType = Byte), @p36='?' (DbType = DateTime2), @p37='?' (DbType = Int32), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Size = 4000), @p41='?' (DbType = Int32), @p42='?' (Size = 20), @p43='?' (DbType = Boolean), @p44='?' (DbType = Boolean), @p45='?' (DbType = DateTime2), @p46='?' (Size = 20), @p47='?' (Size = 20), @p48='?' (DbType = Guid), @p49='?' (DbType = Int32), @p50='?' (DbType = Int32), @p51='?' (DbType = Guid), @p52='?' (DbType = Byte), @p53='?' (DbType = Byte), @p54='?' (DbType = DateTime2), @p55='?' (DbType = Int32), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Size = 4000), @p59='?' (DbType = Int32), @p60='?' (Size = 20), @p61='?' (DbType = Boolean), @p62='?' (DbType = Boolean), @p63='?' (DbType = DateTime2), @p64='?' (Size = 20), @p65='?' (Size = 20), @p66='?' (DbType = Guid), @p67='?' (DbType = Int32), @p68='?' (DbType = Int32), @p69='?' (DbType = Guid), @p70='?' (DbType = Byte), @p71='?' (DbType = Byte), @p72='?' (DbType = DateTime2), @p73='?' (DbType = Int32), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Size = 4000), @p77='?' (DbType = Int32), @p78='?' (Size = 20), @p79='?' (DbType = Boolean), @p80='?' (DbType = Boolean), @p81='?' (DbType = DateTime2), @p82='?' (Size = 20), @p83='?' (Size = 20), @p84='?' (DbType = Guid), @p85='?' (DbType = Int32), @p86='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Plc.S7NetConfig] ([Id], [CreationTime], [Ip], [IsDeleted], [IsUse], [LastModificationTime], [LastModifierUser], [Port], [Rack], [ReadHeart], [ReadTimeOut], [S7Type], [Solt], [WriteHeart], [WriteTimeOut])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
INSERT INTO [Plc.S7EntityItem] ([Id], [ArrtypeLength], [BitOffset], [CreationTime], [DBAddress], [DataOffset], [Description], [DeviceName], [Index], [Ip], [IsDeleted], [IsUse], [LastModificationTime], [LastModifierUser], [Name], [NetGuid], [S7BlockType], [S7DataType])
VALUES (@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32),
(@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50),
(@p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68),
(@p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86);
2025-08-08 16:47:48.043 +08:00 [DBG] SAGA:Plc.Presentation.Saga.PlcMapState:"b580f488-a3d7-4b84-ac69-47b4e2c108b3" Created Plc.CustomEvents.Saga.PlcMap+PlcMapCreated
2025-08-08 16:47:48.100 +08:00 [INF] Executed endpoint 'HTTP: POST plc/add-allplc-config'
2025-08-08 16:47:48.113 +08:00 [DBG] SAGA:Plc.Presentation.Saga.PlcMapState:"b580f488-a3d7-4b84-ac69-47b4e2c108b3" Added Plc.CustomEvents.Saga.PlcMap+PlcMapCreated
2025-08-08 16:47:48.124 +08:00 [INF] HTTP POST /plc/add-allplc-config responded 200 in 4632.1654 ms
2025-08-08 16:47:48.223 +08:00 [DBG] Create send transport: "loopback://localhost/urn:message:Wcs.CustomEvents:PlcMapDataIntegrationEvent"
2025-08-08 16:47:48.485 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/plc/add-allplc-config - 200 null application/json; charset=utf-8 5027.4719ms
2025-08-08 16:47:48.508 +08:00 [DBG] SEND "loopback://localhost/urn:message:Wcs.CustomEvents:PlcMapDataIntegrationEvent" "348c0000-8480-9065-60e5-08ddd658408c" Wcs.CustomEvents.PlcMapDataIntegrationEvent
2025-08-08 16:47:48.614 +08:00 [DBG] RECEIVE "loopback://localhost/PlcMapState" "348c0000-8480-9065-387d-08ddd658402c" Plc.CustomEvents.Saga.PlcMap+PlcMapCreated Plc.Presentation.Saga.PlcMapState("00:00:00.5122113")
2025-08-08 16:47:48.782 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 64), @p3='?' (Size = 32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 32), @p7='?' (Size = 32), @p8='?' (DbType = Guid), @p9='?' (DbType = DateTime2), @p10='?' (Size = 64), @p11='?' (Size = 32), @p12='?' (DbType = Boolean), @p13='?' (DbType = DateTime2), @p14='?' (Size = 32), @p15='?' (Size = 32), @p16='?' (DbType = Guid), @p17='?' (DbType = DateTime2), @p18='?' (Size = 64), @p19='?' (Size = 32), @p20='?' (DbType = Boolean), @p21='?' (DbType = DateTime2), @p22='?' (Size = 32), @p23='?' (Size = 32), @p24='?' (DbType = Guid), @p25='?' (DbType = DateTime2), @p26='?' (Size = 64), @p27='?' (Size = 32), @p28='?' (DbType = Boolean), @p29='?' (DbType = DateTime2), @p30='?' (Size = 32), @p31='?' (Size = 32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.PlcMap] ([Id], [CreationTime], [Description], [DeviceName], [IsDeleted], [LastModificationTime], [LastModifierUser], [PlcName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7),
(@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31);
2025-08-08 16:47:48.796 +08:00 [DBG] Create send transport: "loopback://localhost/urn:message:Plc.CustomEvents.Saga:PlcMap+PlcMapDataIntegrationCompleted"
2025-08-08 16:47:48.808 +08:00 [DBG] SEND "loopback://localhost/urn:message:Plc.CustomEvents.Saga:PlcMap+PlcMapDataIntegrationCompleted" "348c0000-8480-9065-ef20-08ddd65840bb" Plc.CustomEvents.Saga.PlcMap+PlcMapDataIntegrationCompleted
2025-08-08 16:47:48.816 +08:00 [DBG] RECEIVE "loopback://localhost/PlcMapDataIntegrationEvent" "348c0000-8480-9065-60e5-08ddd658408c" Wcs.CustomEvents.PlcMapDataIntegrationEvent Wcs.Presentation.Custom.PlcMapDataIntegrationEventConsumer("00:00:00.3006138")
2025-08-08 16:47:48.829 +08:00 [DBG] SAGA:Plc.Presentation.Saga.PlcMapState:"b580f488-a3d7-4b84-ac69-47b4e2c108b3" Used Plc.CustomEvents.Saga.PlcMap+PlcMapDataIntegrationCompleted
2025-08-08 16:47:48.837 +08:00 [DBG] Create send transport: "loopback://localhost/urn:message:Plc.CustomEvents.Saga:PlcMap+PlcMapProcessed"
2025-08-08 16:47:48.849 +08:00 [DBG] SEND "loopback://localhost/urn:message:Plc.CustomEvents.Saga:PlcMap+PlcMapProcessed" "348c0000-8480-9065-5d48-08ddd65840c2" Plc.CustomEvents.Saga.PlcMap+PlcMapProcessed
2025-08-08 16:47:48.857 +08:00 [DBG] RECEIVE "loopback://localhost/PlcMapState" "348c0000-8480-9065-ef20-08ddd65840bb" Plc.CustomEvents.Saga.PlcMap+PlcMapDataIntegrationCompleted Plc.Presentation.Saga.PlcMapState("00:00:00.0454718")
2025-08-08 16:47:48.864 +08:00 [DBG] SAGA:Plc.Presentation.Saga.PlcMapState:"b580f488-a3d7-4b84-ac69-47b4e2c108b3" Used Plc.CustomEvents.Saga.PlcMap+PlcMapProcessed
2025-08-08 16:47:48.874 +08:00 [DBG] Create send transport: "loopback://localhost/urn:message:Plc.CustomEvents:PlcMapEventCommitEvent"
2025-08-08 16:47:48.886 +08:00 [DBG] SEND "loopback://localhost/urn:message:Plc.CustomEvents:PlcMapEventCommitEvent" "348c0000-8480-9065-0693-08ddd65840c8" Plc.CustomEvents.PlcMapEventCommitEvent
2025-08-08 16:47:48.895 +08:00 [DBG] RECEIVE "loopback://localhost/PlcMapState" "348c0000-8480-9065-5d48-08ddd65840c2" Plc.CustomEvents.Saga.PlcMap+PlcMapProcessed Plc.Presentation.Saga.PlcMapState("00:00:00.0446720")
2025-08-08 16:47:48.911 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__deviceName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[ArrtypeLength], [p].[BitOffset], [p].[CreationTime], [p].[DBAddress], [p].[DataOffset], [p].[Description], [p].[DeviceName], [p].[Index], [p].[Ip], [p].[IsDeleted], [p].[IsUse], [p].[LastModificationTime], [p].[LastModifierUser], [p].[Name], [p].[NetGuid], [p].[S7BlockType], [p].[S7DataType]
FROM [Plc.S7EntityItem] AS [p]
WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[DeviceName] = @__deviceName_0 AND [p].[IsUse] = CAST(1 AS bit)
2025-08-08 16:47:48.928 +08:00 [DBG] RECEIVE "loopback://localhost/PlcMapEventCommit" "348c0000-8480-9065-0693-08ddd65840c8" Plc.CustomEvents.PlcMapEventCommitEvent Plc.Presentation.Custom.PlcMapEventCommitConsumer("00:00:00.0411509")
2025-08-08 16:50:34.052 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/plc/add-allplc-config - multipart/form-data; boundary=----WebKitFormBoundarySO7R3LNjQsTiOAcy 11021
2025-08-08 16:50:34.072 +08:00 [INF] CORS policy execution successful.
2025-08-08 16:50:34.075 +08:00 [INF] Executing endpoint 'HTTP: POST plc/add-allplc-config'
2025-08-08 16:50:34.756 +08:00 [DBG] SEND "loopback://localhost/urn:message:Plc.CustomEvents.Saga:PlcMap+PlcMapCreated" "348c0000-8480-9065-be46-08ddd658a3a6" Plc.CustomEvents.Saga.PlcMap+PlcMapCreated
2025-08-08 16:50:34.761 +08:00 [DBG] SAGA:Plc.Presentation.Saga.PlcMapState:"b580f488-a3d7-4b84-ac69-47b4e2c108b3" Used Plc.CustomEvents.Saga.PlcMap+PlcMapCreated
2025-08-08 16:50:34.778 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 20), @p7='?' (DbType = Int32), @p8='?' (DbType = Int16), @p9='?' (Size = 20), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int16), @p13='?' (Size = 20), @p14='?' (DbType = Int32), @p15='?' (DbType = Guid), @p16='?' (DbType = Byte), @p17='?' (Size = 1) (DbType = Byte), @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (Size = 50), @p22='?' (Size = 4000), @p23='?' (DbType = Int32), @p24='?' (Size = 20), @p25='?' (DbType = Boolean), @p26='?' (DbType = Boolean), @p27='?' (DbType = DateTime2), @p28='?' (Size = 20), @p29='?' (Size = 20), @p30='?' (DbType = Guid), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (DbType = Guid), @p34='?' (DbType = Byte), @p35='?' (DbType = Byte), @p36='?' (DbType = DateTime2), @p37='?' (DbType = Int32), @p38='?' (DbType = Int32), @p39='?' (Size = 50), @p40='?' (Size = 4000), @p41='?' (DbType = Int32), @p42='?' (Size = 20), @p43='?' (DbType = Boolean), @p44='?' (DbType = Boolean), @p45='?' (DbType = DateTime2), @p46='?' (Size = 20), @p47='?' (Size = 20), @p48='?' (DbType = Guid), @p49='?' (DbType = Int32), @p50='?' (DbType = Int32), @p51='?' (DbType = Guid), @p52='?' (DbType = Byte), @p53='?' (DbType = Byte), @p54='?' (DbType = DateTime2), @p55='?' (DbType = Int32), @p56='?' (DbType = Int32), @p57='?' (Size = 50), @p58='?' (Size = 4000), @p59='?' (DbType = Int32), @p60='?' (Size = 20), @p61='?' (DbType = Boolean), @p62='?' (DbType = Boolean), @p63='?' (DbType = DateTime2), @p64='?' (Size = 20), @p65='?' (Size = 20), @p66='?' (DbType = Guid), @p67='?' (DbType = Int32), @p68='?' (DbType = Int32), @p69='?' (DbType = Guid), @p70='?' (DbType = Byte), @p71='?' (DbType = Byte), @p72='?' (DbType = DateTime2), @p73='?' (DbType = Int32), @p74='?' (DbType = Int32), @p75='?' (Size = 50), @p76='?' (Size = 4000), @p77='?' (DbType = Int32), @p78='?' (Size = 20), @p79='?' (DbType = Boolean), @p80='?' (DbType = Boolean), @p81='?' (DbType = DateTime2), @p82='?' (Size = 20), @p83='?' (Size = 20), @p84='?' (DbType = Guid), @p85='?' (DbType = Int32), @p86='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Plc.S7NetConfig] ([Id], [CreationTime], [Ip], [IsDeleted], [IsUse], [LastModificationTime], [LastModifierUser], [Port], [Rack], [ReadHeart], [ReadTimeOut], [S7Type], [Solt], [WriteHeart], [WriteTimeOut])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
INSERT INTO [Plc.S7EntityItem] ([Id], [ArrtypeLength], [BitOffset], [CreationTime], [DBAddress], [DataOffset], [Description], [DeviceName], [Index], [Ip], [IsDeleted], [IsUse], [LastModificationTime], [LastModifierUser], [Name], [NetGuid], [S7BlockType], [S7DataType])
VALUES (@p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32),
(@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50),
(@p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68),
(@p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86);
2025-08-08 16:50:35.135 +08:00 [INF] Executed endpoint 'HTTP: POST plc/add-allplc-config'
2025-08-08 16:50:35.212 +08:00 [INF] HTTP POST /plc/add-allplc-config responded 200 in 1137.7325 ms
2025-08-08 16:50:35.323 +08:00 [DBG] Create send transport: "loopback://localhost/urn:message:MassTransit:Fault[[Plc.CustomEvents.Saga:PlcMap+PlcMapCreated]]"
2025-08-08 16:50:35.441 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/plc/add-allplc-config - 200 null application/json; charset=utf-8 1388.5222ms
2025-08-08 16:50:35.454 +08:00 [DBG] SEND "loopback://localhost/urn:message:MassTransit:Fault[[Plc.CustomEvents.Saga:PlcMap+PlcMapCreated]]" "348c0000-8480-9065-84c7-08ddd658a40f" MassTransit.Fault<Plc.CustomEvents.Saga.PlcMap+PlcMapCreated>
2025-08-08 16:50:35.457 +08:00 [ERR] R-FAULT "loopback://localhost/PlcMapState" "348c0000-8480-9065-be46-08ddd658a3a6" Plc.CustomEvents.Saga.PlcMap+PlcMapCreated Plc.Presentation.Saga.PlcMapState("00:00:00.5029209")
MassTransit.NotAcceptedStateMachineException: Plc.Presentation.Saga.PlcMapState(b580f488-a3d7-4b84-ac69-47b4e2c108b3) Saga exception on receipt of Plc.CustomEvents.Saga.PlcMap+PlcMapCreated: Not accepted in state Final
 ---> MassTransit.UnhandledEventException: The PlcMapCreated event is not handled during the Final state for the PlcMapSaga state machine
   at MassTransit.MassTransitStateMachine`1.DefaultUnhandledEventCallback(UnhandledEventContext`1 context) in /_/src/MassTransit/SagaStateMachine/MassTransitStateMachine.cs:line 222
   at MassTransit.MassTransitStateMachine`1.UnhandledEvent(BehaviorContext`1 context, State state) in /_/src/MassTransit/SagaStateMachine/MassTransitStateMachine.cs:line 1266
   at MassTransit.MassTransitStateMachine`1.<.ctor>b__19_2(BehaviorContext`1 context, State state) in /_/src/MassTransit/SagaStateMachine/MassTransitStateMachine.cs:line 55
   at MassTransit.MassTransitStateMachine`1.StateMachineState.MassTransit.State<TInstance>.Raise[T](BehaviorContext`2 context) in /_/src/MassTransit/SagaStateMachine/SagaStateMachine/StateMachineState.cs:line 165
   at MassTransit.MassTransitStateMachine`1.MassTransit.StateMachine<TInstance>.RaiseEvent[T](BehaviorContext`2 context) in /_/src/MassTransit/SagaStateMachine/MassTransitStateMachine.cs:line 135
   at MassTransit.Middleware.StateMachineSagaMessageFilter`2.Send(SagaConsumeContext`2 context, IPipe`1 next) in /_/src/MassTransit/Middleware/StateMachineSagaMessageFilter.cs:line 66
   --- End of inner exception stack trace ---
   at MassTransit.Middleware.StateMachineSagaMessageFilter`2.Send(SagaConsumeContext`2 context, IPipe`1 next) in /_/src/MassTransit/Middleware/StateMachineSagaMessageFilter.cs:line 81
   at MassTransit.Middleware.StateMachineSagaMessageFilter`2.Send(SagaConsumeContext`2 context, IPipe`1 next) in /_/src/MassTransit/Middleware/StateMachineSagaMessageFilter.cs:line 104
   at MassTransit.Middleware.SendQuerySagaPipe`2.<>c__DisplayClass4_0.<<Send>g__SendToInstance|0>d.MoveNext() in /_/src/MassTransit/Middleware/SendQuerySagaPipe.cs:line 40
--- End of stack trace from previous location ---
   at MassTransit.Middleware.SendQuerySagaPipe`2.<>c__DisplayClass4_0.<<Send>g__SendToInstance|0>d.MoveNext() in /_/src/MassTransit/Middleware/SendQuerySagaPipe.cs:line 64
--- End of stack trace from previous location ---
   at MassTransit.Middleware.SendQuerySagaPipe`2.Send(SagaRepositoryQueryContext`2 context) in /_/src/MassTransit/Middleware/SendQuerySagaPipe.cs:line 72
   at MassTransit.Saga.InMemorySagaRepositoryContextFactory`1.SendQuery[T](ConsumeContext`1 context, ISagaQuery`1 query, IPipe`1 next) in /_/src/MassTransit/Sagas/Saga/InMemoryRepository/InMemorySagaRepositoryContextFactory.cs:line 68
   at MassTransit.DependencyInjection.DependencyInjectionSagaRepositoryContextFactory`1.Send[T](ConsumeContext`1 context, Func`3 send) in /_/src/MassTransit/DependencyInjection/DependencyInjection/DependencyInjectionSagaRepositoryContextFactory.cs:line 87
   at MassTransit.DependencyInjection.DependencyInjectionSagaRepositoryContextFactory`1.Send[T](ConsumeContext`1 context, Func`3 send) in /_/src/MassTransit/DependencyInjection/DependencyInjection/DependencyInjectionSagaRepositoryContextFactory.cs:line 96
   at MassTransit.Middleware.QuerySagaFilter`2.Send(ConsumeContext`1 context, IPipe`1 next) in /_/src/MassTransit/Middleware/QuerySagaFilter.cs:line 50
2025-08-08 16:52:52.376 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Presentation.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-08 16:52:52.421 +08:00 [INF] Configured endpoint PlcMapDataIntegrationEvent, Consumer: Wcs.Presentation.Custom.PlcMapDataIntegrationEventConsumer
2025-08-08 16:52:52.425 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Presentation.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-08 16:52:52.428 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Presentation.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-08 16:52:52.430 +08:00 [INF] Configured endpoint PlcMapEventCommit, Consumer: Plc.Presentation.Custom.PlcMapEventCommitConsumer
2025-08-08 16:52:52.497 +08:00 [INF] Configured endpoint PlcMapState, Saga: Plc.Presentation.Saga.PlcMapState, State Machine: Plc.Presentation.Saga.PlcMapSaga
2025-08-08 16:52:52.753 +08:00 [DBG] Starting bus instances: IBus
2025-08-08 16:52:52.762 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-08 16:52:52.832 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapState"
2025-08-08 16:52:52.832 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-08 16:52:52.832 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapDataIntegrationEvent"
2025-08-08 16:52:52.832 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_6ofoyyrronegkf4pbdq7cs8ig3"
2025-08-08 16:52:52.832 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-08 16:52:52.834 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapEventCommit"
2025-08-08 16:52:52.834 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-08 16:52:52.841 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-08 16:53:00.965 +08:00 [INF] HTTP POST /user/add-adminrole responded 200 in 718.1699 ms
2025-08-08 16:53:12.870 +08:00 [INF] HTTP POST /user/add-adminrole responded 200 in 31.0219 ms
2025-08-08 16:53:20.841 +08:00 [INF] HTTP POST /user/add-adminuser responded 200 in 422.5841 ms
2025-08-08 16:53:34.850 +08:00 [INF] HTTP POST /user/add-adminrole responded 200 in 17.6995 ms
2025-08-08 16:53:40.054 +08:00 [INF] HTTP POST /user/add-adminuser responded 200 in 13.9287 ms
2025-08-08 16:55:11.041 +08:00 [INF] HTTP POST /user/add-adminrole responded 200 in 33.8132 ms
2025-08-08 16:55:27.728 +08:00 [DBG] Create send transport: "loopback://localhost/urn:message:Plc.CustomEvents.Saga:PlcMap+PlcMapCreated"
2025-08-08 16:55:27.799 +08:00 [DBG] SEND "loopback://localhost/urn:message:Plc.CustomEvents.Saga:PlcMap+PlcMapCreated" "f40b0000-8480-9065-50f0-08ddd6595248" Plc.CustomEvents.Saga.PlcMap+PlcMapCreated
2025-08-08 16:55:27.856 +08:00 [DBG] SAGA:Plc.Presentation.Saga.PlcMapState:"bf69040e-260c-4837-b190-7fa1f7ef74f9" Created Plc.CustomEvents.Saga.PlcMap+PlcMapCreated
2025-08-08 16:55:27.865 +08:00 [DBG] SAGA:Plc.Presentation.Saga.PlcMapState:"bf69040e-260c-4837-b190-7fa1f7ef74f9" Added Plc.CustomEvents.Saga.PlcMap+PlcMapCreated
2025-08-08 16:55:27.893 +08:00 [DBG] Create send transport: "loopback://localhost/urn:message:Wcs.CustomEvents:PlcMapDataIntegrationEvent"
2025-08-08 16:55:27.901 +08:00 [INF] HTTP POST /plc/add-allplc-config responded 200 in 1552.6631 ms
2025-08-08 16:55:27.903 +08:00 [DBG] SEND "loopback://localhost/urn:message:Wcs.CustomEvents:PlcMapDataIntegrationEvent" "f40b0000-8480-9065-4810-08ddd6595260" Wcs.CustomEvents.PlcMapDataIntegrationEvent
2025-08-08 16:55:27.993 +08:00 [DBG] RECEIVE "loopback://localhost/PlcMapState" "f40b0000-8480-9065-50f0-08ddd6595248" Plc.CustomEvents.Saga.PlcMap+PlcMapCreated Plc.Presentation.Saga.PlcMapState("00:00:00.0798075")
2025-08-08 16:55:28.430 +08:00 [DBG] Create send transport: "loopback://localhost/urn:message:Plc.CustomEvents.Saga:PlcMap+PlcMapDataIntegrationCompleted"
2025-08-08 16:55:28.442 +08:00 [DBG] SEND "loopback://localhost/urn:message:Plc.CustomEvents.Saga:PlcMap+PlcMapDataIntegrationCompleted" "f40b0000-8480-9065-f512-08ddd65952b2" Plc.CustomEvents.Saga.PlcMap+PlcMapDataIntegrationCompleted
2025-08-08 16:55:28.449 +08:00 [DBG] RECEIVE "loopback://localhost/PlcMapDataIntegrationEvent" "f40b0000-8480-9065-4810-08ddd6595260" Wcs.CustomEvents.PlcMapDataIntegrationEvent Wcs.Presentation.Custom.PlcMapDataIntegrationEventConsumer("00:00:00.5414024")
2025-08-08 16:55:28.454 +08:00 [DBG] SAGA:Plc.Presentation.Saga.PlcMapState:"bf69040e-260c-4837-b190-7fa1f7ef74f9" Used Plc.CustomEvents.Saga.PlcMap+PlcMapDataIntegrationCompleted
2025-08-08 16:55:28.462 +08:00 [DBG] Create send transport: "loopback://localhost/urn:message:Plc.CustomEvents.Saga:PlcMap+PlcMapProcessed"
2025-08-08 16:55:28.476 +08:00 [DBG] SEND "loopback://localhost/urn:message:Plc.CustomEvents.Saga:PlcMap+PlcMapProcessed" "f40b0000-8480-9065-140b-08ddd65952b8" Plc.CustomEvents.Saga.PlcMap+PlcMapProcessed
2025-08-08 16:55:28.485 +08:00 [DBG] RECEIVE "loopback://localhost/PlcMapState" "f40b0000-8480-9065-f512-08ddd65952b2" Plc.CustomEvents.Saga.PlcMap+PlcMapDataIntegrationCompleted Plc.Presentation.Saga.PlcMapState("00:00:00.0405674")
2025-08-08 16:55:28.490 +08:00 [DBG] SAGA:Plc.Presentation.Saga.PlcMapState:"bf69040e-260c-4837-b190-7fa1f7ef74f9" Used Plc.CustomEvents.Saga.PlcMap+PlcMapProcessed
2025-08-08 16:55:28.495 +08:00 [DBG] Create send transport: "loopback://localhost/urn:message:Plc.CustomEvents:PlcMapEventCommitEvent"
2025-08-08 16:55:28.501 +08:00 [DBG] SEND "loopback://localhost/urn:message:Plc.CustomEvents:PlcMapEventCommitEvent" "f40b0000-8480-9065-2ed9-08ddd65952bc" Plc.CustomEvents.PlcMapEventCommitEvent
2025-08-08 16:55:28.507 +08:00 [DBG] RECEIVE "loopback://localhost/PlcMapState" "f40b0000-8480-9065-140b-08ddd65952b8" Plc.CustomEvents.Saga.PlcMap+PlcMapProcessed Plc.Presentation.Saga.PlcMapState("00:00:00.0305170")
2025-08-08 16:55:28.519 +08:00 [DBG] RECEIVE "loopback://localhost/PlcMapEventCommit" "f40b0000-8480-9065-2ed9-08ddd65952bc" Plc.CustomEvents.PlcMapEventCommitEvent Plc.Presentation.Custom.PlcMapEventCommitConsumer("00:00:00.0169284")
2025-08-08 16:55:56.579 +08:00 [DBG] SEND "loopback://localhost/urn:message:Plc.CustomEvents.Saga:PlcMap+PlcMapCreated" "f40b0000-8480-9065-0258-08ddd6596379" Plc.CustomEvents.Saga.PlcMap+PlcMapCreated
2025-08-08 16:55:56.580 +08:00 [DBG] SAGA:Plc.Presentation.Saga.PlcMapState:"bf69040e-260c-4837-b190-7fa1f7ef74f9" Used Plc.CustomEvents.Saga.PlcMap+PlcMapCreated
2025-08-08 16:55:56.693 +08:00 [INF] HTTP POST /plc/add-allplc-config responded 200 in 817.7121 ms
2025-08-08 16:55:57.440 +08:00 [DBG] Create send transport: "loopback://localhost/urn:message:MassTransit:Fault[[Plc.CustomEvents.Saga:PlcMap+PlcMapCreated]]"
2025-08-08 16:55:57.464 +08:00 [DBG] SEND "loopback://localhost/urn:message:MassTransit:Fault[[Plc.CustomEvents.Saga:PlcMap+PlcMapCreated]]" "f40b0000-8480-9065-29a6-08ddd65963fd" MassTransit.Fault<Plc.CustomEvents.Saga.PlcMap+PlcMapCreated>
2025-08-08 16:55:57.472 +08:00 [ERR] R-FAULT "loopback://localhost/PlcMapState" "f40b0000-8480-9065-0258-08ddd6596379" Plc.CustomEvents.Saga.PlcMap+PlcMapCreated Plc.Presentation.Saga.PlcMapState("00:00:00.5570522")
MassTransit.NotAcceptedStateMachineException: Plc.Presentation.Saga.PlcMapState(bf69040e-260c-4837-b190-7fa1f7ef74f9) Saga exception on receipt of Plc.CustomEvents.Saga.PlcMap+PlcMapCreated: Not accepted in state Final
 ---> MassTransit.UnhandledEventException: The PlcMapCreated event is not handled during the Final state for the PlcMapSaga state machine
   at MassTransit.MassTransitStateMachine`1.DefaultUnhandledEventCallback(UnhandledEventContext`1 context) in /_/src/MassTransit/SagaStateMachine/MassTransitStateMachine.cs:line 222
   at MassTransit.MassTransitStateMachine`1.UnhandledEvent(BehaviorContext`1 context, State state) in /_/src/MassTransit/SagaStateMachine/MassTransitStateMachine.cs:line 1266
   at MassTransit.MassTransitStateMachine`1.<.ctor>b__19_2(BehaviorContext`1 context, State state) in /_/src/MassTransit/SagaStateMachine/MassTransitStateMachine.cs:line 55
   at MassTransit.MassTransitStateMachine`1.StateMachineState.MassTransit.State<TInstance>.Raise[T](BehaviorContext`2 context) in /_/src/MassTransit/SagaStateMachine/SagaStateMachine/StateMachineState.cs:line 165
   at MassTransit.MassTransitStateMachine`1.MassTransit.StateMachine<TInstance>.RaiseEvent[T](BehaviorContext`2 context) in /_/src/MassTransit/SagaStateMachine/MassTransitStateMachine.cs:line 135
   at MassTransit.Middleware.StateMachineSagaMessageFilter`2.Send(SagaConsumeContext`2 context, IPipe`1 next) in /_/src/MassTransit/Middleware/StateMachineSagaMessageFilter.cs:line 66
   --- End of inner exception stack trace ---
   at MassTransit.Middleware.StateMachineSagaMessageFilter`2.Send(SagaConsumeContext`2 context, IPipe`1 next) in /_/src/MassTransit/Middleware/StateMachineSagaMessageFilter.cs:line 81
   at MassTransit.Middleware.StateMachineSagaMessageFilter`2.Send(SagaConsumeContext`2 context, IPipe`1 next) in /_/src/MassTransit/Middleware/StateMachineSagaMessageFilter.cs:line 104
   at MassTransit.Middleware.SendQuerySagaPipe`2.<>c__DisplayClass4_0.<<Send>g__SendToInstance|0>d.MoveNext() in /_/src/MassTransit/Middleware/SendQuerySagaPipe.cs:line 40
--- End of stack trace from previous location ---
   at MassTransit.Middleware.SendQuerySagaPipe`2.<>c__DisplayClass4_0.<<Send>g__SendToInstance|0>d.MoveNext() in /_/src/MassTransit/Middleware/SendQuerySagaPipe.cs:line 64
--- End of stack trace from previous location ---
   at MassTransit.Middleware.SendQuerySagaPipe`2.Send(SagaRepositoryQueryContext`2 context) in /_/src/MassTransit/Middleware/SendQuerySagaPipe.cs:line 72
   at MassTransit.Saga.InMemorySagaRepositoryContextFactory`1.SendQuery[T](ConsumeContext`1 context, ISagaQuery`1 query, IPipe`1 next) in /_/src/MassTransit/Sagas/Saga/InMemoryRepository/InMemorySagaRepositoryContextFactory.cs:line 68
   at MassTransit.DependencyInjection.DependencyInjectionSagaRepositoryContextFactory`1.Send[T](ConsumeContext`1 context, Func`3 send) in /_/src/MassTransit/DependencyInjection/DependencyInjection/DependencyInjectionSagaRepositoryContextFactory.cs:line 87
   at MassTransit.DependencyInjection.DependencyInjectionSagaRepositoryContextFactory`1.Send[T](ConsumeContext`1 context, Func`3 send) in /_/src/MassTransit/DependencyInjection/DependencyInjection/DependencyInjectionSagaRepositoryContextFactory.cs:line 96
   at MassTransit.Middleware.QuerySagaFilter`2.Send(ConsumeContext`1 context, IPipe`1 next) in /_/src/MassTransit/Middleware/QuerySagaFilter.cs:line 50
2025-08-08 16:56:15.427 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Presentation.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-08 16:56:15.472 +08:00 [INF] Configured endpoint PlcMapDataIntegrationEvent, Consumer: Wcs.Presentation.Custom.PlcMapDataIntegrationEventConsumer
2025-08-08 16:56:15.476 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Presentation.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-08 16:56:15.480 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Presentation.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-08 16:56:15.483 +08:00 [INF] Configured endpoint PlcMapEventCommit, Consumer: Plc.Presentation.Custom.PlcMapEventCommitConsumer
2025-08-08 16:56:15.538 +08:00 [INF] Configured endpoint PlcMapState, Saga: Plc.Presentation.Saga.PlcMapState, State Machine: Plc.Presentation.Saga.PlcMapSaga
2025-08-08 16:56:15.828 +08:00 [DBG] Starting bus instances: IBus
2025-08-08 16:56:15.833 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-08 16:56:15.884 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapState"
2025-08-08 16:56:15.884 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-08 16:56:15.884 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapDataIntegrationEvent"
2025-08-08 16:56:15.884 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapEventCommit"
2025-08-08 16:56:15.884 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_yowyyyrronegkxqcbdq7csmq8r"
2025-08-08 16:56:15.884 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-08 16:56:15.904 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-08 16:56:15.909 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-08 16:58:39.414 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Presentation.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-08 16:58:39.472 +08:00 [INF] Configured endpoint PlcMapDataIntegrationEvent, Consumer: Wcs.Presentation.Custom.PlcMapDataIntegrationEventConsumer
2025-08-08 16:58:39.486 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Presentation.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-08 16:58:39.494 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Presentation.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-08 16:58:39.499 +08:00 [INF] Configured endpoint PlcMapEventCommit, Consumer: Plc.Presentation.Custom.PlcMapEventCommitConsumer
2025-08-08 16:58:39.563 +08:00 [INF] Configured endpoint PlcMapState, Saga: Plc.Presentation.Saga.PlcMapState, State Machine: Plc.Presentation.Saga.PlcMapSaga
2025-08-08 16:58:39.835 +08:00 [DBG] Starting bus instances: IBus
2025-08-08 16:58:39.842 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-08 16:58:39.898 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-08 16:58:39.899 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-08 16:58:39.898 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapDataIntegrationEvent"
2025-08-08 16:58:39.898 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapEventCommit"
2025-08-08 16:58:39.898 +08:00 [DBG] Endpoint Ready: "loopback://localhost/PlcMapState"
2025-08-08 16:58:39.898 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_hyayyyrronegk84sbdq7csqrf3"
2025-08-08 16:58:39.900 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-08 16:58:39.904 +08:00 [INF] Bus started: "loopback://localhost/"

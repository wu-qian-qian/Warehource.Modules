2025-07-26 10:24:50.699 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:24:50.753 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-07-26 10:24:50.756 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:24:50.758 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-07-26 10:24:50.768 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:24:50.778 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 10:24:50.799 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:24:50.829 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-07-26 10:24:50.838 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:24:50.842 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-07-26 10:24:50.847 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:24:50.851 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 10:24:50.910 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:24:50.915 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-07-26 10:24:50.919 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:24:50.923 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-07-26 10:24:50.928 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:24:51.103 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 10:24:51.190 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-26 10:24:51.207 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-26 10:24:51.209 +08:00 [INF] Quartz Scheduler created
2025-07-26 10:24:51.211 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-26 10:24:51.212 +08:00 [INF] RAMJobStore initialized.
2025-07-26 10:24:51.214 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '-879364956' initialized
2025-07-26 10:24:51.215 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-26 10:24:51.217 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-26 10:24:51.226 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-26 10:24:51.407 +08:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-26 10:24:51.579 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-26 10:24:51.625 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-07-26 10:24:51.630 +08:00 [INF] Configured endpoint S7CacheMemoryEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7CacheMemoryEvent>
2025-07-26 10:24:51.872 +08:00 [DBG] Starting bus instances: IBus
2025-07-26 10:24:51.881 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-26 10:24:51.920 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-07-26 10:24:51.920 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7CacheMemoryEvent"
2025-07-26 10:24:51.920 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_mueyyyb8piqsmgi9bdqhz4h383"
2025-07-26 10:24:51.932 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-26 10:24:52.031 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-26 10:24:52.041 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-26 10:24:52.177 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-26 10:24:52.179 +08:00 [INF] Scheduler JobScheduler_$_-879364956 started.
2025-07-26 10:24:52.180 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:24:52.200 +08:00 [INF] Hosting environment: Development
2025-07-26 10:24:52.207 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-26 10:24:52.439 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-07-26 10:24:52.634 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 203.8425ms
2025-07-26 10:24:52.664 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-07-26 10:24:52.670 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 5.9218ms
2025-07-26 10:24:52.785 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-07-26 10:24:52.835 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 49.975ms
2025-07-26 10:24:52.905 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-07-26 10:24:52.919 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.373ms
2025-07-26 10:25:03.574 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/plc/get-allplc - null null
2025-07-26 10:25:03.596 +08:00 [WRN] Failed to determine the https port for redirect.
2025-07-26 10:25:05.078 +08:00 [INF] Executing endpoint 'HTTP: GET plc/get-allplc'
2025-07-26 10:25:09.971 +08:00 [INF] Executed endpoint 'HTTP: GET plc/get-allplc'
2025-07-26 10:25:11.730 +08:00 [ERR] An unhandled exception has occurred while executing the request.
FluentValidation.ValidationException: Validation failed: 
 -- : ip和设备编号必须存在一个 Severity: Error
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 21
   at Plc.Presentation.S7Plc.Net.GetS7NetConfig.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Plc.Presentation\S7Plc\Net\GetS7NetConfig.cs:line 17
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-26 10:25:11.834 +08:00 [ERR] HTTP GET /plc/get-allplc responded 500 in 8229.6822 ms
2025-07-26 10:25:11.853 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/plc/get-allplc - 500 null application/json; charset=utf-8 8278.7128ms
2025-07-26 10:25:19.556 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:25:45.355 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:25:46.320 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-07-26 10:25:46.326 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 5.4222ms
2025-07-26 10:25:46.370 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-07-26 10:25:46.371 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-07-26 10:25:46.382 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.7036ms
2025-07-26 10:25:46.383 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 12.7449ms
2025-07-26 10:25:46.602 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-07-26 10:25:46.611 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.729ms
2025-07-26 10:25:51.759 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/plc/get-allplc - null null
2025-07-26 10:25:51.766 +08:00 [INF] Executing endpoint 'HTTP: GET plc/get-allplc'
2025-07-26 10:25:53.529 +08:00 [INF] Executed endpoint 'HTTP: GET plc/get-allplc'
2025-07-26 10:25:53.577 +08:00 [ERR] An unhandled exception has occurred while executing the request.
FluentValidation.ValidationException: Validation failed: 
 -- : ip和设备编号必须存在一个 Severity: Error
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 21
   at Plc.Presentation.S7Plc.Net.GetS7NetConfig.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Plc.Presentation\S7Plc\Net\GetS7NetConfig.cs:line 17
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-26 10:25:53.583 +08:00 [ERR] HTTP GET /plc/get-allplc responded 500 in 1818.7940 ms
2025-07-26 10:25:53.586 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/plc/get-allplc - 500 null application/json; charset=utf-8 1827.1618ms
2025-07-26 10:26:09.595 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-07-26 10:26:09.600 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 5.3255ms
2025-07-26 10:26:09.636 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-07-26 10:26:09.637 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-07-26 10:26:09.644 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.3115ms
2025-07-26 10:26:09.645 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 7.6916ms
2025-07-26 10:26:09.820 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-07-26 10:26:09.829 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.319ms
2025-07-26 10:26:12.540 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:26:21.952 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/plc/get-allplc - null null
2025-07-26 10:26:21.965 +08:00 [INF] Executing endpoint 'HTTP: GET plc/get-allplc'
2025-07-26 10:26:23.618 +08:00 [ERR] Failed executing DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CreationTime], [p].[Ip], [p].[IsDeleted], [p].[IsUse], [p].[LastModificationTime], [p].[LastModifierUser], [p].[Port], [p].[Rack], [p].[ReadTimeOut], [p].[S7Type], [p].[Solt], [p].[WriteTimeOut], [t].[Id], [t].[ArrtypeLength], [t].[BitOffset], [t].[CreationTime], [t].[DBAddress], [t].[DataOffset], [t].[Description], [t].[DeviceName], [t].[Index], [t].[IsDeleted], [t].[IsUse], [t].[LastModificationTime], [t].[LastModifierUser], [t].[Name], [t].[NetGuid], [t].[S7BlockType], [t].[S7DataType]
FROM [Plc.S7NetConfig] AS [p]
LEFT JOIN (
    SELECT [p0].[Id], [p0].[ArrtypeLength], [p0].[BitOffset], [p0].[CreationTime], [p0].[DBAddress], [p0].[DataOffset], [p0].[Description], [p0].[DeviceName], [p0].[Index], [p0].[IsDeleted], [p0].[IsUse], [p0].[LastModificationTime], [p0].[LastModifierUser], [p0].[Name], [p0].[NetGuid], [p0].[S7BlockType], [p0].[S7DataType]
    FROM [Plc.S7EntityItem] AS [p0]
    WHERE [p0].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [p].[Id] = [t].[NetGuid]
WHERE [p].[IsDeleted] = CAST(0 AS bit)
ORDER BY [p].[Id]
2025-07-26 10:26:23.765 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Plc.Infrastructure.Database.PlcDBContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'IsUse' 无效。
列名 'IsUse' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:3bd4ca22-a163-46bb-925a-924d05cfac89
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'IsUse' 无效。
列名 'IsUse' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:3bd4ca22-a163-46bb-925a-924d05cfac89
Error Number:207,State:1,Class:16
2025-07-26 10:26:23.987 +08:00 [INF] Executed endpoint 'HTTP: GET plc/get-allplc'
2025-07-26 10:26:24.029 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): 列名 'IsUse' 无效。
列名 'IsUse' 无效。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Plc.Application.S7Plc.Get.Net.GetS7NetQueryHandler.Handle(GetS7NetQuery request, CancellationToken cancellationToken)
   at Plc.Infrastructure.S7Net.S7NetService.Initialization(ISender sender) in D:\Program\仓库\Warehource.Modules\Plc.Infrastructure\S7Net\S7NetService.cs:line 25
   at Plc.Infrastructure.PlcInfrastructureConfigurator.<>c.<AddPlcInfrastructureModule>b__0_0(IServiceProvider sp) in D:\Program\仓库\Warehource.Modules\Plc.Infrastructure\PlcInfrastructureConfigurator.cs:line 33
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Plc.Presentation.S7Plc.Net.GetS7NetConfig.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Plc.Presentation\S7Plc\Net\GetS7NetConfig.cs:line 17
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:3bd4ca22-a163-46bb-925a-924d05cfac89
Error Number:207,State:1,Class:16
2025-07-26 10:26:24.049 +08:00 [ERR] HTTP GET /plc/get-allplc responded 500 in 2086.3155 ms
2025-07-26 10:26:24.052 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/plc/get-allplc - 500 null application/json; charset=utf-8 2099.158ms
2025-07-26 10:33:41.500 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:33:41.546 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-07-26 10:33:41.552 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:33:41.559 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-07-26 10:33:41.570 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:33:41.581 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 10:33:41.603 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:33:41.606 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-07-26 10:33:41.610 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:33:41.612 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-07-26 10:33:41.615 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:33:41.617 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 10:33:41.684 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:33:41.688 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-07-26 10:33:41.690 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:33:41.692 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-07-26 10:33:41.695 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:33:41.706 +08:00 [INF] Applying migration '20250726022735_InitialCreate'.
2025-07-26 10:33:41.746 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Plc.S7NetConfig] (
    [Id] uniqueidentifier NOT NULL,
    [S7Type] int NOT NULL,
    [Solt] smallint NOT NULL,
    [Rack] smallint NOT NULL,
    [ReadTimeOut] int NOT NULL,
    [WriteTimeOut] int NOT NULL,
    [IsUse] bit NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    [Ip] nvarchar(max) NOT NULL,
    [Port] int NOT NULL,
    CONSTRAINT [PK_Plc.S7NetConfig] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-07-26 10:33:41.753 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Plc.S7EntityItem] (
    [Id] uniqueidentifier NOT NULL,
    [S7DataType] int NOT NULL,
    [DBAddress] int NOT NULL,
    [DataOffset] int NOT NULL,
    [BitOffset] int NULL,
    [S7BlockType] int NOT NULL,
    [Index] int NOT NULL,
    [Description] nvarchar(50) NULL,
    [Name] nvarchar(20) NULL,
    [ArrtypeLength] int NULL,
    [DeviceName] nvarchar(max) NOT NULL,
    [IsUse] bit NOT NULL,
    [NetGuid] uniqueidentifier NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Plc.S7EntityItem] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Plc.S7EntityItem_Plc.S7NetConfig_NetGuid] FOREIGN KEY ([NetGuid]) REFERENCES [Plc.S7NetConfig] ([Id])
);
2025-07-26 10:33:41.760 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Plc.S7EntityItem_NetGuid] ON [Plc.S7EntityItem] ([NetGuid]);
2025-07-26 10:33:41.765 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [Plc.__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250726022735_InitialCreate', N'8.0.0');
2025-07-26 10:33:41.854 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-26 10:33:41.867 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-26 10:33:41.868 +08:00 [INF] Quartz Scheduler created
2025-07-26 10:33:41.870 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-26 10:33:41.872 +08:00 [INF] RAMJobStore initialized.
2025-07-26 10:33:41.874 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '1385017318' initialized
2025-07-26 10:33:41.874 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-26 10:33:41.875 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-26 10:33:41.883 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-26 10:33:42.040 +08:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-26 10:33:42.190 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-26 10:33:42.248 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-07-26 10:33:42.255 +08:00 [INF] Configured endpoint S7CacheMemoryEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7CacheMemoryEvent>
2025-07-26 10:33:42.534 +08:00 [DBG] Starting bus instances: IBus
2025-07-26 10:33:42.538 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-26 10:33:42.592 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_mnjoyyb8piqsmabmbdqhz5gsnx"
2025-07-26 10:33:42.592 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-07-26 10:33:42.592 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7CacheMemoryEvent"
2025-07-26 10:33:42.595 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-26 10:33:42.686 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-26 10:33:42.691 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-26 10:33:42.815 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-26 10:33:42.817 +08:00 [INF] Hosting environment: Development
2025-07-26 10:33:42.818 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-26 10:33:42.819 +08:00 [INF] Scheduler JobScheduler_$_1385017318 started.
2025-07-26 10:33:42.821 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:33:43.109 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-07-26 10:33:43.301 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 204.7399ms
2025-07-26 10:33:43.472 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-07-26 10:33:43.472 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-07-26 10:33:43.479 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 7.6399ms
2025-07-26 10:33:43.515 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.969ms
2025-07-26 10:33:43.573 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-07-26 10:33:43.594 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.3667ms
2025-07-26 10:34:09.536 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:34:16.871 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/plc/add-allplc-config - multipart/form-data; boundary=----WebKitFormBoundaryrZzFrAMmtdON6zDS 11021
2025-07-26 10:34:16.893 +08:00 [WRN] Failed to determine the https port for redirect.
2025-07-26 10:34:16.958 +08:00 [INF] Executing endpoint 'HTTP: POST plc/add-allplc-config'
2025-07-26 10:34:19.193 +08:00 [INF] Executed DbCommand (30ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (DbType = Int16), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int16), @p12='?' (DbType = Int32), @p13='?' (DbType = Guid), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime2), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (Size = 50), @p20='?' (Size = 4000), @p21='?' (DbType = Int32), @p22='?' (DbType = Boolean), @p23='?' (DbType = Boolean), @p24='?' (DbType = DateTime2), @p25='?' (Size = 4000), @p26='?' (Size = 20), @p27='?' (DbType = Guid), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (DbType = Guid), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (DbType = DateTime2), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (Size = 50), @p37='?' (Size = 4000), @p38='?' (DbType = Int32), @p39='?' (DbType = Boolean), @p40='?' (DbType = Boolean), @p41='?' (DbType = DateTime2), @p42='?' (Size = 4000), @p43='?' (Size = 20), @p44='?' (DbType = Guid), @p45='?' (DbType = Int32), @p46='?' (DbType = Int32), @p47='?' (DbType = Guid), @p48='?' (DbType = Int32), @p49='?' (DbType = Int32), @p50='?' (DbType = DateTime2), @p51='?' (DbType = Int32), @p52='?' (DbType = Int32), @p53='?' (Size = 50), @p54='?' (Size = 4000), @p55='?' (DbType = Int32), @p56='?' (DbType = Boolean), @p57='?' (DbType = Boolean), @p58='?' (DbType = DateTime2), @p59='?' (Size = 4000), @p60='?' (Size = 20), @p61='?' (DbType = Guid), @p62='?' (DbType = Int32), @p63='?' (DbType = Int32), @p64='?' (DbType = Guid), @p65='?' (DbType = Int32), @p66='?' (DbType = Int32), @p67='?' (DbType = DateTime2), @p68='?' (DbType = Int32), @p69='?' (DbType = Int32), @p70='?' (Size = 50), @p71='?' (Size = 4000), @p72='?' (DbType = Int32), @p73='?' (DbType = Boolean), @p74='?' (DbType = Boolean), @p75='?' (DbType = DateTime2), @p76='?' (Size = 4000), @p77='?' (Size = 20), @p78='?' (DbType = Guid), @p79='?' (DbType = Int32), @p80='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Plc.S7NetConfig] ([Id], [CreationTime], [Ip], [IsDeleted], [IsUse], [LastModificationTime], [LastModifierUser], [Port], [Rack], [ReadTimeOut], [S7Type], [Solt], [WriteTimeOut])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
INSERT INTO [Plc.S7EntityItem] ([Id], [ArrtypeLength], [BitOffset], [CreationTime], [DBAddress], [DataOffset], [Description], [DeviceName], [Index], [IsDeleted], [IsUse], [LastModificationTime], [LastModifierUser], [Name], [NetGuid], [S7BlockType], [S7DataType])
VALUES (@p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29),
(@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46),
(@p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80);
2025-07-26 10:34:19.226 +08:00 [INF] Executed endpoint 'HTTP: POST plc/add-allplc-config'
2025-07-26 10:34:19.230 +08:00 [INF] HTTP POST /plc/add-allplc-config responded 200 in 2332.6217 ms
2025-07-26 10:34:19.244 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/plc/add-allplc-config - 200 null application/json; charset=utf-8 2373.3151ms
2025-07-26 10:34:38.883 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:34:53.114 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/plc/get-allplc - null null
2025-07-26 10:34:53.125 +08:00 [INF] Executing endpoint 'HTTP: GET plc/get-allplc'
2025-07-26 10:34:53.424 +08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CreationTime], [p].[Ip], [p].[IsDeleted], [p].[IsUse], [p].[LastModificationTime], [p].[LastModifierUser], [p].[Port], [p].[Rack], [p].[ReadTimeOut], [p].[S7Type], [p].[Solt], [p].[WriteTimeOut], [t].[Id], [t].[ArrtypeLength], [t].[BitOffset], [t].[CreationTime], [t].[DBAddress], [t].[DataOffset], [t].[Description], [t].[DeviceName], [t].[Index], [t].[IsDeleted], [t].[IsUse], [t].[LastModificationTime], [t].[LastModifierUser], [t].[Name], [t].[NetGuid], [t].[S7BlockType], [t].[S7DataType]
FROM [Plc.S7NetConfig] AS [p]
LEFT JOIN (
    SELECT [p0].[Id], [p0].[ArrtypeLength], [p0].[BitOffset], [p0].[CreationTime], [p0].[DBAddress], [p0].[DataOffset], [p0].[Description], [p0].[DeviceName], [p0].[Index], [p0].[IsDeleted], [p0].[IsUse], [p0].[LastModificationTime], [p0].[LastModifierUser], [p0].[Name], [p0].[NetGuid], [p0].[S7BlockType], [p0].[S7DataType]
    FROM [Plc.S7EntityItem] AS [p0]
    WHERE [p0].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [p].[Id] = [t].[NetGuid]
WHERE [p].[IsDeleted] = CAST(0 AS bit)
ORDER BY [p].[Id]
2025-07-26 10:35:03.375 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:35:06.887 +08:00 [INF] Executed endpoint 'HTTP: GET plc/get-allplc'
2025-07-26 10:35:09.938 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Plc.Application.S7Plc.ReadPlc.ReadlPlcEventHandle.Handle(PlcEventCommand request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Plc.Application\Net\ReadPlc\ReadlPlcEventHandle.cs:line 31
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Plc.Presentation.S7Plc.Net.GetS7NetConfig.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Plc.Presentation\S7Plc\Net\GetS7NetConfig.cs:line 17
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-26 10:35:09.999 +08:00 [ERR] HTTP GET /plc/get-allplc responded 500 in 16875.0350 ms
2025-07-26 10:35:10.002 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/plc/get-allplc - 500 null application/json; charset=utf-8 16888.1561ms
2025-07-26 10:35:31.699 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:35:59.390 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:36:25.534 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:36:51.309 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:49:48.166 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:49:48.223 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-07-26 10:49:48.227 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:49:48.230 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-07-26 10:49:48.245 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:49:48.258 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 10:49:48.281 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:49:48.284 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-07-26 10:49:48.287 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:49:48.290 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-07-26 10:49:48.295 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:49:48.298 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 10:49:48.360 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:49:48.364 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-07-26 10:49:48.368 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:49:48.373 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-07-26 10:49:48.377 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:49:48.387 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 10:49:48.470 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-26 10:49:48.479 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-26 10:49:48.482 +08:00 [INF] Quartz Scheduler created
2025-07-26 10:49:48.483 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-26 10:49:48.485 +08:00 [INF] RAMJobStore initialized.
2025-07-26 10:49:48.486 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '-1953675882' initialized
2025-07-26 10:49:48.488 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-26 10:49:48.489 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-26 10:49:48.499 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-26 10:49:48.652 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-26 10:49:48.789 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-26 10:49:48.843 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-07-26 10:49:48.862 +08:00 [INF] Configured endpoint S7CacheMemoryEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7CacheMemoryEvent>
2025-07-26 10:49:49.082 +08:00 [DBG] Starting bus instances: IBus
2025-07-26 10:49:49.086 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-26 10:49:49.143 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7CacheMemoryEvent"
2025-07-26 10:49:49.143 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-07-26 10:49:49.143 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_3yeyyyb8piqsmw1tbdqhz5asdm"
2025-07-26 10:49:49.146 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-26 10:49:49.231 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-26 10:49:49.236 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-26 10:49:49.359 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-26 10:49:49.361 +08:00 [INF] Hosting environment: Development
2025-07-26 10:49:49.361 +08:00 [INF] Scheduler JobScheduler_$_-1953675882 started.
2025-07-26 10:49:49.362 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-26 10:49:49.362 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:49:49.897 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-07-26 10:49:50.113 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 223.8324ms
2025-07-26 10:49:50.130 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-07-26 10:49:50.137 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 7.1225ms
2025-07-26 10:49:50.280 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-07-26 10:49:50.310 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.564ms
2025-07-26 10:49:50.373 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-07-26 10:49:50.398 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 25.4503ms
2025-07-26 10:50:00.243 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/plc/get-allplc - null null
2025-07-26 10:50:00.257 +08:00 [WRN] Failed to determine the https port for redirect.
2025-07-26 10:50:00.434 +08:00 [INF] Executing endpoint 'HTTP: GET plc/get-allplc'
2025-07-26 10:50:08.519 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:50:08.566 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-07-26 10:50:08.570 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:50:08.573 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-07-26 10:50:08.581 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:50:08.592 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 10:50:08.614 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:50:08.618 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-07-26 10:50:08.622 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:50:08.625 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-07-26 10:50:08.629 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:50:08.635 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 10:50:08.697 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:50:08.703 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-07-26 10:50:08.709 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:50:08.713 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-07-26 10:50:08.719 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:50:08.727 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 10:50:08.810 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-26 10:50:08.820 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-26 10:50:08.822 +08:00 [INF] Quartz Scheduler created
2025-07-26 10:50:08.823 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-26 10:50:08.825 +08:00 [INF] RAMJobStore initialized.
2025-07-26 10:50:08.826 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '-55077613' initialized
2025-07-26 10:50:08.828 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-26 10:50:08.829 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-26 10:50:08.839 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-26 10:50:08.990 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-26 10:50:09.125 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-26 10:50:09.172 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-07-26 10:50:09.182 +08:00 [INF] Configured endpoint S7CacheMemoryEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7CacheMemoryEvent>
2025-07-26 10:50:09.385 +08:00 [DBG] Starting bus instances: IBus
2025-07-26 10:50:09.390 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-26 10:50:09.447 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_b1zyyyb8piqsk69mbdqhz53nrf"
2025-07-26 10:50:09.447 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-07-26 10:50:09.447 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7CacheMemoryEvent"
2025-07-26 10:50:09.450 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-26 10:50:09.543 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-26 10:50:09.552 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-26 10:50:09.763 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-26 10:50:09.766 +08:00 [INF] Hosting environment: Development
2025-07-26 10:50:09.766 +08:00 [INF] Scheduler JobScheduler_$_-55077613 started.
2025-07-26 10:50:09.767 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-26 10:50:09.768 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:50:09.994 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-07-26 10:50:10.195 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 208.9564ms
2025-07-26 10:50:10.350 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-07-26 10:50:10.350 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-07-26 10:50:10.360 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 10.794ms
2025-07-26 10:50:10.393 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.9252ms
2025-07-26 10:50:10.464 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-07-26 10:50:10.488 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 24.5249ms
2025-07-26 10:50:35.134 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:50:41.272 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/user-login - application/json 50
2025-07-26 10:50:41.286 +08:00 [WRN] Failed to determine the https port for redirect.
2025-07-26 10:50:41.350 +08:00 [INF] Executing endpoint 'HTTP: POST user/user-login'
2025-07-26 10:50:43.525 +08:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[Email], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[LockoutEnd], [i].[Name], [i].[Password], [i].[Phone], [i].[RoleId], [i].[Username], [t].[Id], [t].[CreationTime], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser], [t].[RoleName]
FROM [Identity.User] AS [i]
INNER JOIN (
    SELECT [i0].[Id], [i0].[CreationTime], [i0].[Description], [i0].[IsDeleted], [i0].[LastModificationTime], [i0].[LastModifierUser], [i0].[RoleName]
    FROM [Identity.Role] AS [i0]
    WHERE [i0].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [i].[RoleId] = [t].[Id]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[Username] = @__userName_0
2025-07-26 10:50:43.741 +08:00 [INF] Executed endpoint 'HTTP: POST user/user-login'
2025-07-26 10:50:43.825 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Sequence contains no elements.
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Identity.Domain.UserManager.GetUserAndRoleAsync(String userName) in D:\Program\仓库\Warehource.Modules\User.Domain\UserManager.cs:line 37
   at Identity.Application.LoginHandler.LoginEventHandler.Handle(LoginEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\LoginHandler\LoginEventHandler.cs:line 13
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Identity.Presentation.Login.Login.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\Login\Login.cs:line 20
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfString>g__ExecuteAwaited|134_0(Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-26 10:50:43.928 +08:00 [ERR] HTTP POST /user/user-login responded 500 in 2636.0218 ms
2025-07-26 10:50:43.945 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/user-login - 500 null application/json; charset=utf-8 2673.1571ms
2025-07-26 10:50:55.605 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/user-login - application/json 50
2025-07-26 10:50:55.614 +08:00 [INF] Executing endpoint 'HTTP: POST user/user-login'
2025-07-26 10:51:01.282 +08:00 [INF] Executed DbCommand (31ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[Email], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[LockoutEnd], [i].[Name], [i].[Password], [i].[Phone], [i].[RoleId], [i].[Username], [t].[Id], [t].[CreationTime], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser], [t].[RoleName]
FROM [Identity.User] AS [i]
INNER JOIN (
    SELECT [i0].[Id], [i0].[CreationTime], [i0].[Description], [i0].[IsDeleted], [i0].[LastModificationTime], [i0].[LastModifierUser], [i0].[RoleName]
    FROM [Identity.Role] AS [i0]
    WHERE [i0].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [i].[RoleId] = [t].[Id]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[Username] = @__userName_0
2025-07-26 10:51:01.472 +08:00 [INF] Executed endpoint 'HTTP: POST user/user-login'
2025-07-26 10:51:01.546 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Sequence contains no elements.
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Identity.Domain.UserManager.GetUserAndRoleAsync(String userName) in D:\Program\仓库\Warehource.Modules\User.Domain\UserManager.cs:line 37
   at Identity.Application.LoginHandler.LoginEventHandler.Handle(LoginEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\LoginHandler\LoginEventHandler.cs:line 13
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Identity.Presentation.Login.Login.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\Login\Login.cs:line 20
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfString>g__ExecuteAwaited|134_0(Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-26 10:51:01.563 +08:00 [ERR] HTTP POST /user/user-login responded 500 in 5950.3610 ms
2025-07-26 10:51:01.566 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/user-login - 500 null application/json; charset=utf-8 5961.8115ms
2025-07-26 10:51:04.127 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:51:33.127 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:51:51.877 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-07-26 10:51:51.888 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 11.2496ms
2025-07-26 10:51:51.930 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-07-26 10:51:51.934 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-07-26 10:51:51.943 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 8.6563ms
2025-07-26 10:51:51.954 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.8994ms
2025-07-26 10:51:52.434 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-07-26 10:51:52.458 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 24.2742ms
2025-07-26 10:51:57.276 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/user-login - application/json 50
2025-07-26 10:51:57.283 +08:00 [INF] Executing endpoint 'HTTP: POST user/user-login'
2025-07-26 10:52:01.930 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:52:01.958 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[Email], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[LockoutEnd], [i].[Name], [i].[Password], [i].[Phone], [i].[RoleId], [i].[Username], [t].[Id], [t].[CreationTime], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser], [t].[RoleName]
FROM [Identity.User] AS [i]
INNER JOIN (
    SELECT [i0].[Id], [i0].[CreationTime], [i0].[Description], [i0].[IsDeleted], [i0].[LastModificationTime], [i0].[LastModifierUser], [i0].[RoleName]
    FROM [Identity.Role] AS [i0]
    WHERE [i0].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [i].[RoleId] = [t].[Id]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[Username] = @__userName_0
2025-07-26 10:52:02.126 +08:00 [INF] Executed endpoint 'HTTP: POST user/user-login'
2025-07-26 10:52:02.209 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Common.Application.Exception.CommonException: Application exception
   at Identity.Application.LoginHandler.LoginEventHandler.Handle(LoginEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\LoginHandler\LoginEventHandler.cs:line 16
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Identity.Presentation.Login.Login.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\Login\Login.cs:line 20
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfString>g__ExecuteAwaited|134_0(Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-26 10:52:02.226 +08:00 [ERR] HTTP POST /user/user-login responded 500 in 4945.0773 ms
2025-07-26 10:52:02.236 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/user-login - 500 null application/json; charset=utf-8 4960.4498ms
2025-07-26 10:52:30.666 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:53:00.506 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:53:24.277 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:54:20.532 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:54:20.579 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-07-26 10:54:20.585 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:54:20.588 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-07-26 10:54:20.599 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:54:20.612 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 10:54:20.634 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:54:20.639 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-07-26 10:54:20.642 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:54:20.645 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-07-26 10:54:20.650 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:54:20.654 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 10:54:20.716 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:54:20.721 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-07-26 10:54:20.724 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:54:20.729 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-07-26 10:54:20.734 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:54:20.744 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 10:54:20.834 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-26 10:54:20.844 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-26 10:54:20.847 +08:00 [INF] Quartz Scheduler created
2025-07-26 10:54:20.849 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-26 10:54:20.851 +08:00 [INF] RAMJobStore initialized.
2025-07-26 10:54:20.853 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '-1199208157' initialized
2025-07-26 10:54:20.857 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-26 10:54:20.858 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-26 10:54:20.868 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-26 10:54:21.031 +08:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-26 10:54:21.190 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-26 10:54:21.247 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-07-26 10:54:21.255 +08:00 [INF] Configured endpoint S7CacheMemoryEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7CacheMemoryEvent>
2025-07-26 10:54:21.457 +08:00 [DBG] Starting bus instances: IBus
2025-07-26 10:54:21.462 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-26 10:54:21.519 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-07-26 10:54:21.519 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7CacheMemoryEvent"
2025-07-26 10:54:21.519 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_gttyyyb8piqsmtqkbdqhz57agr"
2025-07-26 10:54:21.522 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-26 10:54:21.610 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-26 10:54:21.618 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-26 10:54:21.831 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-26 10:54:21.834 +08:00 [INF] Hosting environment: Development
2025-07-26 10:54:21.835 +08:00 [INF] Scheduler JobScheduler_$_-1199208157 started.
2025-07-26 10:54:21.836 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:54:21.853 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-26 10:54:21.977 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-07-26 10:54:22.172 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 206.6873ms
2025-07-26 10:54:22.341 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-07-26 10:54:22.341 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-07-26 10:54:22.348 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 7.1857ms
2025-07-26 10:54:22.391 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 49.7068ms
2025-07-26 10:54:22.578 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-07-26 10:54:22.601 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 23.0079ms
2025-07-26 10:54:31.382 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/user-login - application/json 50
2025-07-26 10:54:31.395 +08:00 [WRN] Failed to determine the https port for redirect.
2025-07-26 10:54:31.466 +08:00 [INF] Executing endpoint 'HTTP: POST user/user-login'
2025-07-26 10:54:31.729 +08:00 [INF] Executed DbCommand (22ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[Email], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[LockoutEnd], [i].[Name], [i].[Password], [i].[Phone], [i].[RoleId], [i].[Username], [t].[Id], [t].[CreationTime], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser], [t].[RoleName]
FROM [Identity.User] AS [i]
INNER JOIN (
    SELECT [i0].[Id], [i0].[CreationTime], [i0].[Description], [i0].[IsDeleted], [i0].[LastModificationTime], [i0].[LastModifierUser], [i0].[RoleName]
    FROM [Identity.Role] AS [i0]
    WHERE [i0].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [i].[RoleId] = [t].[Id]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[Username] = @__userName_0
2025-07-26 10:54:31.928 +08:00 [INF] Executed endpoint 'HTTP: POST user/user-login'
2025-07-26 10:54:32.010 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Common.Application.Exception.CommonException: Application exception
   at Identity.Application.LoginHandler.LoginEventHandler.Handle(LoginEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\LoginHandler\LoginEventHandler.cs:line 16
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Identity.Presentation.Login.Login.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\Login\Login.cs:line 20
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfString>g__ExecuteAwaited|134_0(Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-26 10:56:48.890 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:56:49.017 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-07-26 10:56:49.038 +08:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:56:49.046 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-07-26 10:56:49.056 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:56:49.069 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 10:56:49.094 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:56:49.098 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-07-26 10:56:49.101 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:56:49.109 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-07-26 10:56:49.115 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:56:49.125 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 10:56:49.199 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:56:49.202 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-07-26 10:56:49.205 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:56:49.208 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-07-26 10:56:49.214 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:56:49.223 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 10:56:49.307 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-26 10:56:49.316 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-26 10:56:49.319 +08:00 [INF] Quartz Scheduler created
2025-07-26 10:56:49.321 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-26 10:56:49.322 +08:00 [INF] RAMJobStore initialized.
2025-07-26 10:56:49.323 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '-840310864' initialized
2025-07-26 10:56:49.324 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-26 10:56:49.325 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-26 10:56:49.334 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-26 10:56:49.481 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-26 10:56:49.614 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-26 10:56:49.664 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-07-26 10:56:49.672 +08:00 [INF] Configured endpoint S7CacheMemoryEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7CacheMemoryEvent>
2025-07-26 10:56:49.892 +08:00 [DBG] Starting bus instances: IBus
2025-07-26 10:56:49.896 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-26 10:56:49.945 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7CacheMemoryEvent"
2025-07-26 10:56:49.945 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_yoayyyb8piqsmz18bdqhzhytbh"
2025-07-26 10:56:49.945 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-07-26 10:56:49.947 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-26 10:56:50.036 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-26 10:56:50.043 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-26 10:56:50.191 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-26 10:56:50.194 +08:00 [INF] Scheduler JobScheduler_$_-840310864 started.
2025-07-26 10:56:50.195 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:56:50.195 +08:00 [INF] Hosting environment: Development
2025-07-26 10:56:50.206 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-26 10:56:50.335 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-07-26 10:56:50.570 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 242.2579ms
2025-07-26 10:56:50.751 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-07-26 10:56:50.751 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-07-26 10:56:50.766 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 15.0949ms
2025-07-26 10:56:50.789 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 38.1668ms
2025-07-26 10:56:50.858 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-07-26 10:56:50.880 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 21.3071ms
2025-07-26 10:56:55.229 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/user-login - application/json 50
2025-07-26 10:56:55.243 +08:00 [WRN] Failed to determine the https port for redirect.
2025-07-26 10:56:55.328 +08:00 [INF] Executing endpoint 'HTTP: POST user/user-login'
2025-07-26 10:56:55.589 +08:00 [INF] Executed DbCommand (29ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[Email], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[LockoutEnd], [i].[Name], [i].[Password], [i].[Phone], [i].[RoleId], [i].[Username], [t].[Id], [t].[CreationTime], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser], [t].[RoleName]
FROM [Identity.User] AS [i]
INNER JOIN (
    SELECT [i0].[Id], [i0].[CreationTime], [i0].[Description], [i0].[IsDeleted], [i0].[LastModificationTime], [i0].[LastModifierUser], [i0].[RoleName]
    FROM [Identity.Role] AS [i0]
    WHERE [i0].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [i].[RoleId] = [t].[Id]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[Username] = @__userName_0
2025-07-26 10:56:55.762 +08:00 [INF] Executed endpoint 'HTTP: POST user/user-login'
2025-07-26 10:56:55.932 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Common.Application.Exception.CommonException: Application exception
   at Identity.Application.LoginHandler.LoginEventHandler.Handle(LoginEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\LoginHandler\LoginEventHandler.cs:line 16
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Identity.Presentation.Login.Login.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\Login\Login.cs:line 20
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfString>g__ExecuteAwaited|134_0(Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-26 10:56:56.079 +08:00 [ERR] HTTP POST /user/user-login responded 500 in 829.6258 ms
2025-07-26 10:56:56.114 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/user-login - 500 null application/json; charset=utf-8 886.4455ms
2025-07-26 10:57:04.792 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/plc/get-allplc - null null
2025-07-26 10:57:04.807 +08:00 [INF] Executing endpoint 'HTTP: GET plc/get-allplc'
2025-07-26 10:57:12.582 +08:00 [INF] Executed DbCommand (17ms) [Parameters=[@__ip_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreationTime], [t].[Ip], [t].[IsDeleted], [t].[IsUse], [t].[LastModificationTime], [t].[LastModifierUser], [t].[Port], [t].[Rack], [t].[ReadTimeOut], [t].[S7Type], [t].[Solt], [t].[WriteTimeOut], [t0].[Id], [t0].[ArrtypeLength], [t0].[BitOffset], [t0].[CreationTime], [t0].[DBAddress], [t0].[DataOffset], [t0].[Description], [t0].[DeviceName], [t0].[Index], [t0].[IsDeleted], [t0].[IsUse], [t0].[LastModificationTime], [t0].[LastModifierUser], [t0].[Name], [t0].[NetGuid], [t0].[S7BlockType], [t0].[S7DataType]
FROM (
    SELECT TOP(1) [p].[Id], [p].[CreationTime], [p].[Ip], [p].[IsDeleted], [p].[IsUse], [p].[LastModificationTime], [p].[LastModifierUser], [p].[Port], [p].[Rack], [p].[ReadTimeOut], [p].[S7Type], [p].[Solt], [p].[WriteTimeOut]
    FROM [Plc.S7NetConfig] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[Ip] = @__ip_0
) AS [t]
LEFT JOIN (
    SELECT [p0].[Id], [p0].[ArrtypeLength], [p0].[BitOffset], [p0].[CreationTime], [p0].[DBAddress], [p0].[DataOffset], [p0].[Description], [p0].[DeviceName], [p0].[Index], [p0].[IsDeleted], [p0].[IsUse], [p0].[LastModificationTime], [p0].[LastModifierUser], [p0].[Name], [p0].[NetGuid], [p0].[S7BlockType], [p0].[S7DataType]
    FROM [Plc.S7EntityItem] AS [p0]
    WHERE [p0].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[NetGuid]
ORDER BY [t].[Id]
2025-07-26 10:59:49.879 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:59:49.926 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-07-26 10:59:49.932 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:59:49.935 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-07-26 10:59:49.948 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:59:49.964 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 10:59:49.989 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:59:49.993 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-07-26 10:59:49.996 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:59:50.000 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-07-26 10:59:50.009 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:59:50.011 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 10:59:50.083 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:59:50.087 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-07-26 10:59:50.090 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 10:59:50.096 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-07-26 10:59:50.101 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 10:59:50.114 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 10:59:50.205 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-26 10:59:50.217 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-26 10:59:50.219 +08:00 [INF] Quartz Scheduler created
2025-07-26 10:59:50.221 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-26 10:59:50.223 +08:00 [INF] RAMJobStore initialized.
2025-07-26 10:59:50.225 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '1485312160' initialized
2025-07-26 10:59:50.228 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-26 10:59:50.229 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-26 10:59:50.240 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-26 10:59:50.424 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-26 10:59:50.553 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-26 10:59:50.602 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-07-26 10:59:50.612 +08:00 [INF] Configured endpoint S7CacheMemoryEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7CacheMemoryEvent>
2025-07-26 10:59:50.822 +08:00 [DBG] Starting bus instances: IBus
2025-07-26 10:59:50.826 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-26 10:59:50.885 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7CacheMemoryEvent"
2025-07-26 10:59:50.885 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-07-26 10:59:50.885 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_ibjyyyb8piqsmih3bdqhzhd7yw"
2025-07-26 10:59:50.887 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-26 10:59:50.983 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-26 10:59:50.990 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-26 10:59:51.120 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-26 10:59:51.122 +08:00 [INF] Hosting environment: Development
2025-07-26 10:59:51.122 +08:00 [INF] Scheduler JobScheduler_$_1485312160 started.
2025-07-26 10:59:51.123 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-26 10:59:51.123 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 10:59:51.691 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-07-26 10:59:51.872 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 189.0405ms
2025-07-26 10:59:52.024 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-07-26 10:59:52.024 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-07-26 10:59:52.030 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 6.0862ms
2025-07-26 10:59:52.057 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.8925ms
2025-07-26 10:59:52.117 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-07-26 10:59:52.145 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 27.7567ms
2025-07-26 11:00:15.384 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/plc/get-allplc - null null
2025-07-26 11:00:15.403 +08:00 [WRN] Failed to determine the https port for redirect.
2025-07-26 11:00:15.590 +08:00 [INF] Executing endpoint 'HTTP: GET plc/get-allplc'
2025-07-26 11:00:15.829 +08:00 [INF] Executed DbCommand (24ms) [Parameters=[@__ip_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreationTime], [t].[Ip], [t].[IsDeleted], [t].[IsUse], [t].[LastModificationTime], [t].[LastModifierUser], [t].[Port], [t].[Rack], [t].[ReadTimeOut], [t].[S7Type], [t].[Solt], [t].[WriteTimeOut], [t0].[Id], [t0].[ArrtypeLength], [t0].[BitOffset], [t0].[CreationTime], [t0].[DBAddress], [t0].[DataOffset], [t0].[Description], [t0].[DeviceName], [t0].[Index], [t0].[IsDeleted], [t0].[IsUse], [t0].[LastModificationTime], [t0].[LastModifierUser], [t0].[Name], [t0].[NetGuid], [t0].[S7BlockType], [t0].[S7DataType]
FROM (
    SELECT TOP(1) [p].[Id], [p].[CreationTime], [p].[Ip], [p].[IsDeleted], [p].[IsUse], [p].[LastModificationTime], [p].[LastModifierUser], [p].[Port], [p].[Rack], [p].[ReadTimeOut], [p].[S7Type], [p].[Solt], [p].[WriteTimeOut]
    FROM [Plc.S7NetConfig] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[Ip] = @__ip_0
) AS [t]
LEFT JOIN (
    SELECT [p0].[Id], [p0].[ArrtypeLength], [p0].[BitOffset], [p0].[CreationTime], [p0].[DBAddress], [p0].[DataOffset], [p0].[Description], [p0].[DeviceName], [p0].[Index], [p0].[IsDeleted], [p0].[IsUse], [p0].[LastModificationTime], [p0].[LastModifierUser], [p0].[Name], [p0].[NetGuid], [p0].[S7BlockType], [p0].[S7DataType]
    FROM [Plc.S7EntityItem] AS [p0]
    WHERE [p0].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[NetGuid]
ORDER BY [t].[Id]
2025-07-26 11:00:16.005 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CreationTime], [p].[Ip], [p].[IsDeleted], [p].[IsUse], [p].[LastModificationTime], [p].[LastModifierUser], [p].[Port], [p].[Rack], [p].[ReadTimeOut], [p].[S7Type], [p].[Solt], [p].[WriteTimeOut], [t].[Id], [t].[ArrtypeLength], [t].[BitOffset], [t].[CreationTime], [t].[DBAddress], [t].[DataOffset], [t].[Description], [t].[DeviceName], [t].[Index], [t].[IsDeleted], [t].[IsUse], [t].[LastModificationTime], [t].[LastModifierUser], [t].[Name], [t].[NetGuid], [t].[S7BlockType], [t].[S7DataType]
FROM [Plc.S7NetConfig] AS [p]
LEFT JOIN (
    SELECT [p0].[Id], [p0].[ArrtypeLength], [p0].[BitOffset], [p0].[CreationTime], [p0].[DBAddress], [p0].[DataOffset], [p0].[Description], [p0].[DeviceName], [p0].[Index], [p0].[IsDeleted], [p0].[IsUse], [p0].[LastModificationTime], [p0].[LastModifierUser], [p0].[Name], [p0].[NetGuid], [p0].[S7BlockType], [p0].[S7DataType]
    FROM [Plc.S7EntityItem] AS [p0]
    WHERE [p0].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [p].[Id] = [t].[NetGuid]
WHERE [p].[IsDeleted] = CAST(0 AS bit)
ORDER BY [p].[Id]
2025-07-26 11:00:25.766 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 11:00:45.646 +08:00 [INF] Executed endpoint 'HTTP: GET plc/get-allplc'
2025-07-26 11:00:45.732 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'key')
   at System.Collections.Generic.Dictionary`2.FindValue(TKey key)
   at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
   at Plc.Infrastructure.S7Net.S7NetService.ReadAsync(ReadBufferInput input) in D:\Program\仓库\Warehource.Modules\Plc.Infrastructure\S7Net\S7NetService.cs:line 65
   at Plc.Application.S7Plc.ReadPlc.ReadlPlcEventHandle.Handle(PlcEventCommand request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Plc.Application\Net\ReadPlc\ReadlPlcEventHandle.cs:line 33
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Plc.Application.S7Plc.Behaviors.ReadS7PlcPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Plc.Application\Net\Behaviors\ReadS7PlcPipelineBehavior.cs:line 31
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Plc.Presentation.S7Plc.Net.GetS7NetConfig.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Plc.Presentation\S7Plc\Net\GetS7NetConfig.cs:line 17
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-26 11:00:49.064 +08:00 [ERR] An exception was thrown attempting to execute the error handler.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Common.Infrastructure.Middleware.GlobalExceptionHandler.TryHandleAsync(HttpContext httpContext, Exception exception, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalExceptionHandler.cs:line 29
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
2025-07-26 11:00:49.149 +08:00 [ERR] HTTP GET /plc/get-allplc responded 500 in 33739.3123 ms
System.ArgumentNullException: Value cannot be null. (Parameter 'key')
   at System.Collections.Generic.Dictionary`2.FindValue(TKey key)
   at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
   at Plc.Infrastructure.S7Net.S7NetService.ReadAsync(ReadBufferInput input) in D:\Program\仓库\Warehource.Modules\Plc.Infrastructure\S7Net\S7NetService.cs:line 65
   at Plc.Application.S7Plc.ReadPlc.ReadlPlcEventHandle.Handle(PlcEventCommand request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Plc.Application\Net\ReadPlc\ReadlPlcEventHandle.cs:line 33
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Plc.Application.S7Plc.Behaviors.ReadS7PlcPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Plc.Application\Net\Behaviors\ReadS7PlcPipelineBehavior.cs:line 31
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Plc.Presentation.S7Plc.Net.GetS7NetConfig.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Plc.Presentation\S7Plc\Net\GetS7NetConfig.cs:line 17
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-07-26 11:00:49.366 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'key')
   at System.Collections.Generic.Dictionary`2.FindValue(TKey key)
   at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
   at Plc.Infrastructure.S7Net.S7NetService.ReadAsync(ReadBufferInput input) in D:\Program\仓库\Warehource.Modules\Plc.Infrastructure\S7Net\S7NetService.cs:line 65
   at Plc.Application.S7Plc.ReadPlc.ReadlPlcEventHandle.Handle(PlcEventCommand request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Plc.Application\Net\ReadPlc\ReadlPlcEventHandle.cs:line 33
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Plc.Application.S7Plc.Behaviors.ReadS7PlcPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Plc.Application\Net\Behaviors\ReadS7PlcPipelineBehavior.cs:line 31
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Plc.Presentation.S7Plc.Net.GetS7NetConfig.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Plc.Presentation\S7Plc\Net\GetS7NetConfig.cs:line 17
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Common.Infrastructure.Middleware.GlobalEncodingRequestMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalEncodingRequestMiddleware.cs:line 35
   at Common.Infrastructure.Middleware.GlobalResponseMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalResponseMiddleware.cs:line 30
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-26 11:00:49.427 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/plc/get-allplc - 500 null application/problem+json 34043.638ms
2025-07-26 11:01:00.587 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 11:01:29.864 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 11:01:41.530 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/plc/get-allplc - null null
2025-07-26 11:01:41.537 +08:00 [INF] Executing endpoint 'HTTP: GET plc/get-allplc'
2025-07-26 11:01:41.555 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__ip_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreationTime], [t].[Ip], [t].[IsDeleted], [t].[IsUse], [t].[LastModificationTime], [t].[LastModifierUser], [t].[Port], [t].[Rack], [t].[ReadTimeOut], [t].[S7Type], [t].[Solt], [t].[WriteTimeOut], [t0].[Id], [t0].[ArrtypeLength], [t0].[BitOffset], [t0].[CreationTime], [t0].[DBAddress], [t0].[DataOffset], [t0].[Description], [t0].[DeviceName], [t0].[Index], [t0].[IsDeleted], [t0].[IsUse], [t0].[LastModificationTime], [t0].[LastModifierUser], [t0].[Name], [t0].[NetGuid], [t0].[S7BlockType], [t0].[S7DataType]
FROM (
    SELECT TOP(1) [p].[Id], [p].[CreationTime], [p].[Ip], [p].[IsDeleted], [p].[IsUse], [p].[LastModificationTime], [p].[LastModifierUser], [p].[Port], [p].[Rack], [p].[ReadTimeOut], [p].[S7Type], [p].[Solt], [p].[WriteTimeOut]
    FROM [Plc.S7NetConfig] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[Ip] = @__ip_0
) AS [t]
LEFT JOIN (
    SELECT [p0].[Id], [p0].[ArrtypeLength], [p0].[BitOffset], [p0].[CreationTime], [p0].[DBAddress], [p0].[DataOffset], [p0].[Description], [p0].[DeviceName], [p0].[Index], [p0].[IsDeleted], [p0].[IsUse], [p0].[LastModificationTime], [p0].[LastModifierUser], [p0].[Name], [p0].[NetGuid], [p0].[S7BlockType], [p0].[S7DataType]
    FROM [Plc.S7EntityItem] AS [p0]
    WHERE [p0].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[NetGuid]
ORDER BY [t].[Id]
2025-07-26 11:02:28.037 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 11:02:28.086 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-07-26 11:02:28.091 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 11:02:28.094 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-07-26 11:02:28.104 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 11:02:28.115 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 11:02:28.136 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 11:02:28.141 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-07-26 11:02:28.145 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 11:02:28.148 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-07-26 11:02:28.153 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 11:02:28.157 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 11:02:28.217 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 11:02:28.221 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-07-26 11:02:28.225 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 11:02:28.231 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-07-26 11:02:28.235 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 11:02:28.244 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 11:02:28.326 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-26 11:02:28.335 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-26 11:02:28.338 +08:00 [INF] Quartz Scheduler created
2025-07-26 11:02:28.340 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-26 11:02:28.341 +08:00 [INF] RAMJobStore initialized.
2025-07-26 11:02:28.342 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '-1555457737' initialized
2025-07-26 11:02:28.343 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-26 11:02:28.345 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-26 11:02:28.357 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-26 11:02:28.525 +08:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-26 11:02:28.664 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-26 11:02:28.717 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-07-26 11:02:28.725 +08:00 [INF] Configured endpoint S7CacheMemoryEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7CacheMemoryEvent>
2025-07-26 11:02:28.923 +08:00 [DBG] Starting bus instances: IBus
2025-07-26 11:02:28.927 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-26 11:02:28.985 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-07-26 11:02:28.985 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7CacheMemoryEvent"
2025-07-26 11:02:28.985 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_sbdyyyb8piqsmsnybdqhzhg5nt"
2025-07-26 11:02:28.988 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-26 11:02:29.080 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-26 11:02:29.089 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-26 11:02:29.218 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-26 11:02:29.220 +08:00 [INF] Scheduler JobScheduler_$_-1555457737 started.
2025-07-26 11:02:29.220 +08:00 [INF] Hosting environment: Development
2025-07-26 11:02:29.221 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 11:02:29.222 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-26 11:02:29.603 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-07-26 11:02:29.785 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 192.8396ms
2025-07-26 11:02:29.799 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-07-26 11:02:29.806 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 6.8508ms
2025-07-26 11:02:29.944 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-07-26 11:02:29.980 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.4455ms
2025-07-26 11:02:30.040 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-07-26 11:02:30.057 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 16.7612ms
2025-07-26 11:02:42.954 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/plc/get-allplc - null null
2025-07-26 11:02:42.994 +08:00 [WRN] Failed to determine the https port for redirect.
2025-07-26 11:02:43.065 +08:00 [INF] Executing endpoint 'HTTP: GET plc/get-allplc'
2025-07-26 11:02:43.339 +08:00 [INF] Executed DbCommand (30ms) [Parameters=[@__ip_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreationTime], [t].[Ip], [t].[IsDeleted], [t].[IsUse], [t].[LastModificationTime], [t].[LastModifierUser], [t].[Port], [t].[Rack], [t].[ReadTimeOut], [t].[S7Type], [t].[Solt], [t].[WriteTimeOut], [t0].[Id], [t0].[ArrtypeLength], [t0].[BitOffset], [t0].[CreationTime], [t0].[DBAddress], [t0].[DataOffset], [t0].[Description], [t0].[DeviceName], [t0].[Index], [t0].[IsDeleted], [t0].[IsUse], [t0].[LastModificationTime], [t0].[LastModifierUser], [t0].[Name], [t0].[NetGuid], [t0].[S7BlockType], [t0].[S7DataType]
FROM (
    SELECT TOP(1) [p].[Id], [p].[CreationTime], [p].[Ip], [p].[IsDeleted], [p].[IsUse], [p].[LastModificationTime], [p].[LastModifierUser], [p].[Port], [p].[Rack], [p].[ReadTimeOut], [p].[S7Type], [p].[Solt], [p].[WriteTimeOut]
    FROM [Plc.S7NetConfig] AS [p]
    WHERE [p].[IsDeleted] = CAST(0 AS bit) AND [p].[Ip] = @__ip_0
) AS [t]
LEFT JOIN (
    SELECT [p0].[Id], [p0].[ArrtypeLength], [p0].[BitOffset], [p0].[CreationTime], [p0].[DBAddress], [p0].[DataOffset], [p0].[Description], [p0].[DeviceName], [p0].[Index], [p0].[IsDeleted], [p0].[IsUse], [p0].[LastModificationTime], [p0].[LastModifierUser], [p0].[Name], [p0].[NetGuid], [p0].[S7BlockType], [p0].[S7DataType]
    FROM [Plc.S7EntityItem] AS [p0]
    WHERE [p0].[IsDeleted] = CAST(0 AS bit)
) AS [t0] ON [t].[Id] = [t0].[NetGuid]
ORDER BY [t].[Id]
2025-07-26 11:02:43.631 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CreationTime], [p].[Ip], [p].[IsDeleted], [p].[IsUse], [p].[LastModificationTime], [p].[LastModifierUser], [p].[Port], [p].[Rack], [p].[ReadTimeOut], [p].[S7Type], [p].[Solt], [p].[WriteTimeOut], [t].[Id], [t].[ArrtypeLength], [t].[BitOffset], [t].[CreationTime], [t].[DBAddress], [t].[DataOffset], [t].[Description], [t].[DeviceName], [t].[Index], [t].[IsDeleted], [t].[IsUse], [t].[LastModificationTime], [t].[LastModifierUser], [t].[Name], [t].[NetGuid], [t].[S7BlockType], [t].[S7DataType]
FROM [Plc.S7NetConfig] AS [p]
LEFT JOIN (
    SELECT [p0].[Id], [p0].[ArrtypeLength], [p0].[BitOffset], [p0].[CreationTime], [p0].[DBAddress], [p0].[DataOffset], [p0].[Description], [p0].[DeviceName], [p0].[Index], [p0].[IsDeleted], [p0].[IsUse], [p0].[LastModificationTime], [p0].[LastModifierUser], [p0].[Name], [p0].[NetGuid], [p0].[S7BlockType], [p0].[S7DataType]
    FROM [Plc.S7EntityItem] AS [p0]
    WHERE [p0].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [p].[Id] = [t].[NetGuid]
WHERE [p].[IsDeleted] = CAST(0 AS bit)
ORDER BY [p].[Id]
2025-07-26 11:04:05.196 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 11:04:05.254 +08:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CreationTime], [p].[Ip], [p].[IsDeleted], [p].[IsUse], [p].[LastModificationTime], [p].[LastModifierUser], [p].[Port], [p].[Rack], [p].[ReadTimeOut], [p].[S7Type], [p].[Solt], [p].[WriteTimeOut], [t].[Id], [t].[ArrtypeLength], [t].[BitOffset], [t].[CreationTime], [t].[DBAddress], [t].[DataOffset], [t].[Description], [t].[DeviceName], [t].[Index], [t].[IsDeleted], [t].[IsUse], [t].[LastModificationTime], [t].[LastModifierUser], [t].[Name], [t].[NetGuid], [t].[S7BlockType], [t].[S7DataType]
FROM [Plc.S7NetConfig] AS [p]
LEFT JOIN (
    SELECT [p0].[Id], [p0].[ArrtypeLength], [p0].[BitOffset], [p0].[CreationTime], [p0].[DBAddress], [p0].[DataOffset], [p0].[Description], [p0].[DeviceName], [p0].[Index], [p0].[IsDeleted], [p0].[IsUse], [p0].[LastModificationTime], [p0].[LastModifierUser], [p0].[Name], [p0].[NetGuid], [p0].[S7BlockType], [p0].[S7DataType]
    FROM [Plc.S7EntityItem] AS [p0]
    WHERE [p0].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [p].[Id] = [t].[NetGuid]
WHERE [p].[IsDeleted] = CAST(0 AS bit)
ORDER BY [p].[Id]
2025-07-26 11:04:05.301 +08:00 [INF] Executed endpoint 'HTTP: GET plc/get-allplc'
2025-07-26 11:04:05.313 +08:00 [INF] HTTP GET /plc/get-allplc responded 200 in 82311.4783 ms
2025-07-26 11:04:05.341 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/plc/get-allplc - 200 null application/json; charset=utf-8 82385.4203ms
2025-07-26 11:04:30.977 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 12:05:13.831 +08:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 12:05:13.898 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-07-26 12:05:13.902 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 12:05:13.904 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-07-26 12:05:13.917 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 12:05:13.932 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 12:05:13.962 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 12:05:13.965 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-07-26 12:05:13.968 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 12:05:13.972 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-07-26 12:05:13.977 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 12:05:13.980 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 12:05:14.063 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 12:05:14.066 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-07-26 12:05:14.068 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-26 12:05:14.071 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-07-26 12:05:14.076 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-26 12:05:14.177 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-26 12:05:14.271 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-26 12:05:14.279 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-26 12:05:14.281 +08:00 [INF] Quartz Scheduler created
2025-07-26 12:05:14.282 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-26 12:05:14.283 +08:00 [INF] RAMJobStore initialized.
2025-07-26 12:05:14.285 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '923242506' initialized
2025-07-26 12:05:14.286 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-26 12:05:14.287 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-26 12:05:14.295 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-26 12:05:14.498 +08:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-26 12:05:14.703 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-26 12:05:14.874 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-07-26 12:05:14.882 +08:00 [INF] Configured endpoint S7CacheMemoryEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7CacheMemoryEvent>
2025-07-26 12:05:15.032 +08:00 [DBG] Starting bus instances: IBus
2025-07-26 12:05:15.036 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-26 12:05:15.074 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7CacheMemoryEvent"
2025-07-26 12:05:15.074 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_4ybyyynqz1igyh5cbdqhz6pyyq"
2025-07-26 12:05:15.074 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-07-26 12:05:15.079 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-26 12:05:15.124 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-26 12:05:15.126 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-26 12:05:15.127 +08:00 [INF] Hosting environment: Development
2025-07-26 12:05:15.128 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-26 12:05:15.130 +08:00 [INF] Scheduler JobScheduler_$_923242506 started.
2025-07-26 12:05:15.131 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 12:05:15.400 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-07-26 12:05:15.612 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 213.6121ms
2025-07-26 12:05:15.863 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-07-26 12:05:15.875 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-26 12:05:16.001 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 137.4065ms
2025-07-26 12:05:39.848 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 12:06:04.988 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 12:06:31.392 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 12:06:59.573 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 12:07:27.129 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 12:07:54.185 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 12:08:20.304 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 12:08:44.928 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-26 12:09:00.577 +08:00 [INF] Application is shutting down...
2025-07-26 12:09:00.585 +08:00 [DBG] Stopping bus instances: IBus
2025-07-26 12:09:00.590 +08:00 [DBG] Stopping bus: "loopback://localhost/"
2025-07-26 12:09:00.595 +08:00 [DBG] Endpoint Stopping: "loopback://localhost/WcsIntegrationEvent"
2025-07-26 12:09:00.597 +08:00 [DBG] Consumer Stopping: "loopback://localhost/WcsIntegrationEvent" (Stop Receive Transport)
2025-07-26 12:09:00.604 +08:00 [DBG] Endpoint Completed: "loopback://localhost/WcsIntegrationEvent"
2025-07-26 12:09:00.612 +08:00 [DBG] Consumer Completed: "loopback://localhost/WcsIntegrationEvent": 0 received, 0 concurrent
2025-07-26 12:09:00.615 +08:00 [DBG] Endpoint Stopping: "loopback://localhost/S7CacheMemoryEvent"
2025-07-26 12:09:00.616 +08:00 [DBG] Consumer Stopping: "loopback://localhost/S7CacheMemoryEvent" (Stop Receive Transport)
2025-07-26 12:09:00.617 +08:00 [DBG] Endpoint Completed: "loopback://localhost/S7CacheMemoryEvent"
2025-07-26 12:09:00.617 +08:00 [DBG] Consumer Completed: "loopback://localhost/S7CacheMemoryEvent": 0 received, 0 concurrent
2025-07-26 12:09:00.619 +08:00 [DBG] Endpoint Stopping: "loopback://localhost/_WarehourceSource_bus_4ybyyynqz1igyh5cbdqhz6pyyq"
2025-07-26 12:09:00.620 +08:00 [DBG] Consumer Stopping: "loopback://localhost/_WarehourceSource_bus_4ybyyynqz1igyh5cbdqhz6pyyq" (Stop Receive Transport)
2025-07-26 12:09:00.620 +08:00 [DBG] Endpoint Completed: "loopback://localhost/_WarehourceSource_bus_4ybyyynqz1igyh5cbdqhz6pyyq"
2025-07-26 12:09:00.621 +08:00 [DBG] Consumer Completed: "loopback://localhost/_WarehourceSource_bus_4ybyyynqz1igyh5cbdqhz6pyyq": 0 received, 0 concurrent
2025-07-26 12:09:00.631 +08:00 [INF] Bus stopped: "loopback://localhost/"
2025-07-26 12:09:00.634 +08:00 [INF] Scheduler JobScheduler_$_923242506 shutting down.
2025-07-26 12:09:00.635 +08:00 [INF] Scheduler JobScheduler_$_923242506 paused.
2025-07-26 12:09:00.638 +08:00 [DBG] Shutting down threadpool...
2025-07-26 12:09:00.639 +08:00 [DBG] Waiting for 0 threads to complete.
2025-07-26 12:09:00.639 +08:00 [DBG] No executing jobs remaining, all threads stopped.
2025-07-26 12:09:00.640 +08:00 [DBG] Shutdown of threadpool complete.
2025-07-26 12:09:00.642 +08:00 [INF] Scheduler JobScheduler_$_923242506 Shutdown complete.

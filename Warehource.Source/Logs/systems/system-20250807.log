2025-08-07 08:10:19.403 +08:00 [INF] Executed DbCommand (274ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [Wcs.Source];
2025-08-07 08:10:19.619 +08:00 [INF] Executed DbCommand (157ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [Wcs.Source] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-08-07 08:10:19.641 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:10:19.706 +08:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK_Wcs.__EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-08-07 08:10:19.723 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:10:19.765 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 08:10:19.869 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 08:10:19.893 +08:00 [INF] Applying migration '20250806092859_InitialCreate'.
2025-08-07 08:10:19.938 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.Device] (
    [Id] uniqueidentifier NOT NULL,
    [DeviceType] int NOT NULL,
    [DeviceName] nvarchar(450) NOT NULL,
    [Description] nvarchar(100) NULL,
    [Config] nvarchar(512) NOT NULL,
    [Enable] bit NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.Device] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 08:10:19.987 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.JobConfig] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(50) NULL,
    [JobType] nvarchar(50) NOT NULL,
    [TimeOut] int NOT NULL,
    [Timer] int NOT NULL,
    [IsStart] bit NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.JobConfig] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 08:10:20.061 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.Region] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(20) NOT NULL,
    [Description] nvarchar(50) NULL,
    [CurrentNum] int NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.Region] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 08:10:20.096 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.TaskExecuteStep] (
    [Id] uniqueidentifier NOT NULL,
    [IsSend] bit NOT NULL,
    [Description] nvarchar(50) NULL,
    [PathNodeGroup] nvarchar(50) NULL,
    [ExecuteNodePath] uniqueidentifier NULL,
    [Version] rowversion NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.TaskExecuteStep] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 08:10:20.149 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ExecuteNodes] (
    [Id] uniqueidentifier NOT NULL,
    [PahtNodeGroup] nvarchar(max) NOT NULL,
    [CurrentDeviceType] int NOT NULL,
    [TaskType] int NOT NULL,
    [CurrentDeviceName] nvarchar(max) NOT NULL,
    [NextDeviceName] nvarchar(max) NULL,
    [RegionId] uniqueidentifier NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_ExecuteNodes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ExecuteNodes_Wcs.Region_RegionId] FOREIGN KEY ([RegionId]) REFERENCES [Wcs.Region] ([Id])
);
2025-08-07 08:10:20.196 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.WcsTask] (
    [Id] uniqueidentifier NOT NULL,
    [TaskCode] nvarchar(50) NULL,
    [SerialNumber] int NOT NULL IDENTITY(4000, 1),
    [Container] nvarchar(50) NOT NULL,
    [TaskType] int NOT NULL,
    [TaskStatus] int NOT NULL,
    [CreatorSystemType] int NOT NULL,
    [Description] nvarchar(max) NULL,
    [GetLocation_GetTunnel] nvarchar(10) NULL,
    [GetLocation_GetFloor] nvarchar(10) NULL,
    [GetLocation_GetRow] nvarchar(10) NULL,
    [GetLocation_GetColumn] nvarchar(10) NULL,
    [GetLocation_GetDepth] nvarchar(10) NULL,
    [PutLocation_PutTunnel] nvarchar(10) NULL,
    [PutLocation_PutFloor] nvarchar(10) NULL,
    [PutLocation_PutRow] nvarchar(10) NULL,
    [PutLocation_PutColumn] nvarchar(10) NULL,
    [PutLocation_PutDepth] nvarchar(10) NULL,
    [RegionId] uniqueidentifier NULL,
    [TaskExecuteStepId] uniqueidentifier NOT NULL,
    [Version] rowversion NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.WcsTask] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Wcs.WcsTask_Wcs.TaskExecuteStep_TaskExecuteStepId] FOREIGN KEY ([TaskExecuteStepId]) REFERENCES [Wcs.TaskExecuteStep] ([Id]) ON DELETE CASCADE
);
2025-08-07 08:10:20.215 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ExecuteNodes_RegionId] ON [ExecuteNodes] ([RegionId]);
2025-08-07 08:10:20.266 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.Device_DeviceName] ON [Wcs.Device] ([DeviceName]);
2025-08-07 08:10:20.273 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.JobConfig_Name] ON [Wcs.JobConfig] ([Name]);
2025-08-07 08:10:20.277 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.Region_Code] ON [Wcs.Region] ([Code]);
2025-08-07 08:10:20.282 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.WcsTask_SerialNumber] ON [Wcs.WcsTask] ([SerialNumber]);
2025-08-07 08:10:20.286 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.WcsTask_TaskCode] ON [Wcs.WcsTask] ([TaskCode]) WHERE [TaskCode] IS NOT NULL;
2025-08-07 08:10:20.299 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.WcsTask_TaskExecuteStepId] ON [Wcs.WcsTask] ([TaskExecuteStepId]);
2025-08-07 08:10:20.338 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [Wcs.__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250806092859_InitialCreate', N'8.0.0');
2025-08-07 08:10:20.381 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:10:20.389 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 08:10:20.392 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:10:20.398 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Identity.__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK_Identity.__EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-08-07 08:10:20.400 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:10:20.402 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 08:10:20.405 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 08:10:20.407 +08:00 [INF] Applying migration '20250801013315_InitialCreate'.
2025-08-07 08:10:20.417 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Identity.Role] (
    [Id] uniqueidentifier NOT NULL,
    [RoleName] nvarchar(50) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Identity.Role] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 08:10:20.423 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Identity.User] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [Phone] nvarchar(max) NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(20) NOT NULL,
    [LockoutEnd] datetimeoffset NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Identity.User] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Identity.User_Identity.Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Identity.Role] ([Id]) ON DELETE CASCADE
);
2025-08-07 08:10:20.426 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE NONCLUSTERED INDEX [IX_Identity.Role_RoleName] ON [Identity.Role] ([RoleName]);
2025-08-07 08:10:20.429 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Identity.User_RoleId] ON [Identity.User] ([RoleId]);
2025-08-07 08:10:20.472 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE NONCLUSTERED INDEX [IX_Identity.User_Username] ON [Identity.User] ([Username]);
2025-08-07 08:10:20.498 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [Identity.__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250801013315_InitialCreate', N'8.0.0');
2025-08-07 08:10:20.597 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:10:20.647 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 08:10:20.658 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:10:20.665 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Plc.__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK_Plc.__EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-08-07 08:10:20.668 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:10:20.670 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 08:10:20.672 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 08:10:20.768 +08:00 [INF] Applying migration '20250804021810_InitialCreate'.
2025-08-07 08:10:20.782 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Plc.S7NetConfig] (
    [Id] uniqueidentifier NOT NULL,
    [S7Type] int NOT NULL,
    [Solt] smallint NOT NULL,
    [Rack] smallint NOT NULL,
    [ReadTimeOut] int NOT NULL,
    [WriteTimeOut] int NOT NULL,
    [IsUse] bit NOT NULL,
    [ReadHeart] nvarchar(20) NULL,
    [WriteHeart] nvarchar(20) NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    [Ip] nvarchar(max) NOT NULL,
    [Port] int NOT NULL,
    CONSTRAINT [PK_Plc.S7NetConfig] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 08:10:20.789 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Plc.S7EntityItem] (
    [Id] uniqueidentifier NOT NULL,
    [Ip] nvarchar(20) NOT NULL,
    [S7DataType] int NOT NULL,
    [DBAddress] int NOT NULL,
    [DataOffset] int NOT NULL,
    [BitOffset] tinyint NULL,
    [S7BlockType] int NOT NULL,
    [Index] int NOT NULL,
    [Description] nvarchar(50) NULL,
    [Name] nvarchar(20) NOT NULL,
    [ArrtypeLength] tinyint NULL,
    [DeviceName] nvarchar(max) NOT NULL,
    [IsUse] bit NOT NULL,
    [NetGuid] uniqueidentifier NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Plc.S7EntityItem] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Plc.S7EntityItem_Plc.S7NetConfig_NetGuid] FOREIGN KEY ([NetGuid]) REFERENCES [Plc.S7NetConfig] ([Id]) ON DELETE CASCADE
);
2025-08-07 08:10:20.794 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Plc.S7EntityItem_NetGuid] ON [Plc.S7EntityItem] ([NetGuid]);
2025-08-07 08:10:20.796 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [Plc.__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250804021810_InitialCreate', N'8.0.0');
2025-08-07 08:10:21.069 +08:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 08:10:21.311 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 08:10:21.367 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 08:10:21.370 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 08:10:21.372 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 08:10:21.655 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 08:10:21.686 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 08:10:21.752 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 08:10:21.752 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 08:10:21.752 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 08:10:21.752 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_ooeyyyg93sneb1fibdq7ktscfp"
2025-08-07 08:10:21.755 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 08:10:21.875 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 08:10:21.900 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 08:10:22.101 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 08:10:22.102 +08:00 [INF] Hosting environment: Development
2025-08-07 08:10:22.105 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 08:10:22.670 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 08:10:22.940 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 279.5978ms
2025-08-07 08:10:22.975 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 08:10:22.983 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 8.5256ms
2025-08-07 08:10:23.673 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 08:10:23.725 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 51.6799ms
2025-08-07 08:10:23.921 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 08:10:23.938 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 17.3111ms
2025-08-07 08:11:13.174 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/get - application/json 48
2025-08-07 08:11:13.203 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:11:13.255 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 08:11:14.773 +08:00 [INF] Executing endpoint 'HTTP: POST decive/get'
2025-08-07 08:11:15.313 +08:00 [INF] Executed endpoint 'HTTP: POST decive/get'
2025-08-07 08:11:15.416 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to read parameter "DeviceRequest request" from the request body as JSON.
 ---> System.Text.Json.JsonException: The JSON object contains a trailing comma at the end which is not supported in this mode. Change the reader options. Path: $ | LineNumber: 3 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonReaderException: The JSON object contains a trailing comma at the end which is not supported in this mode. Change the reader options. LineNumber: 3 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.ConsumeNextToken(Byte marker)
   at System.Text.Json.Utf8JsonReader.ConsumeNextTokenOrRollback(Byte marker)
   at System.Text.Json.Utf8JsonReader.ReadSingleSegment()
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.InvalidJsonRequestBody(HttpContext httpContext, String parameterTypeName, String parameterName, Exception exception, Boolean shouldThrow)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 08:11:15.577 +08:00 [ERR] HTTP POST /decive/get responded 500 in 2316.2403 ms
2025-08-07 08:11:15.629 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/get - 500 null application/json; charset=utf-8 2455.0191ms
2025-08-07 08:11:59.101 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/get - application/json 48
2025-08-07 08:11:59.124 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:11:59.132 +08:00 [INF] Executing endpoint 'HTTP: POST decive/get'
2025-08-07 08:11:59.405 +08:00 [INF] Executed endpoint 'HTTP: POST decive/get'
2025-08-07 08:11:59.536 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to read parameter "DeviceRequest request" from the request body as JSON.
 ---> System.Text.Json.JsonException: The JSON object contains a trailing comma at the end which is not supported in this mode. Change the reader options. Path: $ | LineNumber: 3 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonReaderException: The JSON object contains a trailing comma at the end which is not supported in this mode. Change the reader options. LineNumber: 3 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.ConsumeNextToken(Byte marker)
   at System.Text.Json.Utf8JsonReader.ConsumeNextTokenOrRollback(Byte marker)
   at System.Text.Json.Utf8JsonReader.ReadSingleSegment()
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.InvalidJsonRequestBody(HttpContext httpContext, String parameterTypeName, String parameterName, Exception exception, Boolean shouldThrow)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 08:11:59.623 +08:00 [ERR] HTTP POST /decive/get responded 500 in 492.7617 ms
2025-08-07 08:11:59.662 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/get - 500 null application/json; charset=utf-8 560.8627ms
2025-08-07 08:13:17.087 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:13:17.145 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 08:13:17.153 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:13:17.163 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 08:13:17.183 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 08:13:17.200 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 08:13:17.238 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:13:17.247 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 08:13:17.252 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:13:17.260 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 08:13:17.265 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 08:13:17.275 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 08:13:17.363 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:13:17.371 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 08:13:17.387 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:13:17.397 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 08:13:17.407 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 08:13:17.418 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 08:13:17.727 +08:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 08:13:17.820 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 08:13:17.903 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 08:13:17.911 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 08:13:17.918 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 08:13:18.154 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 08:13:18.171 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 08:13:18.241 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_zbaoyyg93sneyn1ebdq7kt3i8q"
2025-08-07 08:13:18.241 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 08:13:18.241 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 08:13:18.241 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 08:13:18.244 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 08:13:18.335 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 08:13:18.343 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 08:13:18.593 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 08:13:18.598 +08:00 [INF] Hosting environment: Development
2025-08-07 08:13:18.604 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 08:13:18.753 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 08:13:19.091 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 371.726ms
2025-08-07 08:13:19.276 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 08:13:19.276 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 08:13:19.314 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 38.6186ms
2025-08-07 08:13:19.339 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 63.4549ms
2025-08-07 08:13:19.386 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 08:13:19.430 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 43.7332ms
2025-08-07 08:13:35.043 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/get - application/json 22
2025-08-07 08:13:35.080 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:13:35.104 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 08:13:35.303 +08:00 [INF] Executing endpoint 'HTTP: POST decive/get'
2025-08-07 08:13:35.718 +08:00 [INF] Executed endpoint 'HTTP: POST decive/get'
2025-08-07 08:13:35.829 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to read parameter "DeviceRequest request" from the request body as JSON.
 ---> System.Text.Json.JsonException: The JSON object contains a trailing comma at the end which is not supported in this mode. Change the reader options. Path: $ | LineNumber: 2 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonReaderException: The JSON object contains a trailing comma at the end which is not supported in this mode. Change the reader options. LineNumber: 2 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.ConsumeNextToken(Byte marker)
   at System.Text.Json.Utf8JsonReader.ConsumeNextTokenOrRollback(Byte marker)
   at System.Text.Json.Utf8JsonReader.ReadSingleSegment()
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.InvalidJsonRequestBody(HttpContext httpContext, String parameterTypeName, String parameterName, Exception exception, Boolean shouldThrow)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 08:13:36.024 +08:00 [ERR] HTTP POST /decive/get responded 500 in 912.1030 ms
2025-08-07 08:13:36.083 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/get - 500 null application/json; charset=utf-8 1040.068ms
2025-08-07 08:14:26.028 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/get - application/json 162
2025-08-07 08:14:26.046 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:14:26.056 +08:00 [INF] Executing endpoint 'HTTP: POST decive/get'
2025-08-07 08:14:30.514 +08:00 [INF] Executed DbCommand (133ms) [Parameters=[@__request_DeviceType_0='?' (DbType = Int32), @__request_Enable_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceType] = @__request_DeviceType_0 AND [w].[Enable] = @__request_Enable_1 AND [w].[DeviceType] = @__request_DeviceType_0
2025-08-07 08:14:30.532 +08:00 [INF] Executed endpoint 'HTTP: POST decive/get'
2025-08-07 08:14:30.534 +08:00 [INF] HTTP POST /decive/get responded 200 in 4482.8306 ms
2025-08-07 08:14:30.575 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/get - 200 null application/json; charset=utf-8 4546.6155ms
2025-08-07 08:15:01.819 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/get - application/json 39
2025-08-07 08:15:01.825 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:15:01.837 +08:00 [INF] Executing endpoint 'HTTP: POST decive/get'
2025-08-07 08:15:06.457 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_DeviceType_0='?' (DbType = Int32), @__request_Enable_1='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceType] = @__request_DeviceType_0 AND [w].[Enable] = @__request_Enable_1
2025-08-07 08:15:06.494 +08:00 [INF] Executed endpoint 'HTTP: POST decive/get'
2025-08-07 08:15:06.495 +08:00 [INF] HTTP POST /decive/get responded 200 in 4663.2541 ms
2025-08-07 08:15:06.576 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/get - 200 null application/json; charset=utf-8 4756.9402ms
2025-08-07 08:15:14.611 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/get - application/json 22
2025-08-07 08:15:14.679 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:15:14.681 +08:00 [INF] Executing endpoint 'HTTP: POST decive/get'
2025-08-07 08:15:14.979 +08:00 [INF] Executed endpoint 'HTTP: POST decive/get'
2025-08-07 08:15:15.231 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to read parameter "DeviceRequest request" from the request body as JSON.
 ---> System.Text.Json.JsonException: The JSON object contains a trailing comma at the end which is not supported in this mode. Change the reader options. Path: $ | LineNumber: 2 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonReaderException: The JSON object contains a trailing comma at the end which is not supported in this mode. Change the reader options. LineNumber: 2 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.ConsumeNextToken(Byte marker)
   at System.Text.Json.Utf8JsonReader.ConsumeNextTokenOrRollback(Byte marker)
   at System.Text.Json.Utf8JsonReader.ReadSingleSegment()
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.InvalidJsonRequestBody(HttpContext httpContext, String parameterTypeName, String parameterName, Exception exception, Boolean shouldThrow)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 08:15:15.385 +08:00 [ERR] HTTP POST /decive/get responded 500 in 704.8134 ms
2025-08-07 08:15:15.419 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/get - 500 null application/json; charset=utf-8 808.2954ms
2025-08-07 08:15:24.334 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/get - application/json 20
2025-08-07 08:15:24.347 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:15:24.353 +08:00 [INF] Executing endpoint 'HTTP: POST decive/get'
2025-08-07 08:15:26.267 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_Enable_0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Enable] = @__request_Enable_0
2025-08-07 08:15:26.276 +08:00 [INF] Executed endpoint 'HTTP: POST decive/get'
2025-08-07 08:15:26.278 +08:00 [INF] HTTP POST /decive/get responded 200 in 1925.4879 ms
2025-08-07 08:15:26.306 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/get - 200 null application/json; charset=utf-8 1971.4763ms
2025-08-07 08:16:08.923 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/get - application/json 21
2025-08-07 08:16:08.948 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:16:08.955 +08:00 [INF] Executing endpoint 'HTTP: POST decive/get'
2025-08-07 08:16:10.731 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_DeviceType_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceType] = @__request_DeviceType_0
2025-08-07 08:16:10.756 +08:00 [INF] Executed endpoint 'HTTP: POST decive/get'
2025-08-07 08:16:10.758 +08:00 [INF] HTTP POST /decive/get responded 200 in 1803.8227 ms
2025-08-07 08:16:10.787 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/get - 200 null application/json; charset=utf-8 1864.3427ms
2025-08-07 08:18:22.399 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/get - application/json 19
2025-08-07 08:18:22.422 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:18:22.427 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/get'
2025-08-07 08:18:22.930 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[@__request_TaskType_0='?' (DbType = Int32), @__request_CurrentDeviceType_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[CreationTime], [e].[CurrentDeviceName], [e].[CurrentDeviceType], [e].[IsDeleted], [e].[LastModificationTime], [e].[LastModifierUser], [e].[NextDeviceName], [e].[PahtNodeGroup], [e].[RegionId], [e].[TaskType], [t].[Id], [t].[Code], [t].[CreationTime], [t].[CurrentNum], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser]
FROM [ExecuteNodes] AS [e]
LEFT JOIN (
    SELECT [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
    FROM [Wcs.Region] AS [w]
    WHERE [w].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [e].[RegionId] = [t].[Id]
WHERE [e].[IsDeleted] = CAST(0 AS bit) AND [e].[TaskType] = @__request_TaskType_0 AND [e].[CurrentDeviceType] = @__request_CurrentDeviceType_1
2025-08-07 08:18:22.950 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/get'
2025-08-07 08:18:22.953 +08:00 [INF] HTTP POST /executenode/get responded 200 in 526.0209 ms
2025-08-07 08:18:22.991 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/get - 200 null application/json; charset=utf-8 591.4943ms
2025-08-07 08:18:44.021 +08:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5050/executenode/delete/{id}?request=3fa85f64-5717-4562-b3fc-2c963f66afa6 - null null
2025-08-07 08:18:44.045 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:18:44.058 +08:00 [INF] Executing endpoint 'HTTP: DELETE executenode/delete/{id}'
2025-08-07 08:18:44.323 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[CreationTime], [e].[CurrentDeviceName], [e].[CurrentDeviceType], [e].[IsDeleted], [e].[LastModificationTime], [e].[LastModifierUser], [e].[NextDeviceName], [e].[PahtNodeGroup], [e].[RegionId], [e].[TaskType]
FROM [ExecuteNodes] AS [e]
WHERE [e].[IsDeleted] = CAST(0 AS bit) AND [e].[Id] = @__id_0
2025-08-07 08:18:44.330 +08:00 [INF] Executed endpoint 'HTTP: DELETE executenode/delete/{id}'
2025-08-07 08:18:44.332 +08:00 [INF] HTTP DELETE /executenode/delete/{id} responded 200 in 281.6576 ms
2025-08-07 08:18:44.379 +08:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5050/executenode/delete/{id}?request=3fa85f64-5717-4562-b3fc-2c963f66afa6 - 200 null application/json; charset=utf-8 359.1541ms
2025-08-07 08:19:05.085 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/region/get-region - null 0
2025-08-07 08:19:05.096 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:19:05.102 +08:00 [INF] Executing endpoint 'HTTP: POST region/get-region'
2025-08-07 08:19:05.551 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 08:19:05.564 +08:00 [INF] Executed endpoint 'HTTP: POST region/get-region'
2025-08-07 08:19:05.566 +08:00 [INF] HTTP POST /region/get-region responded 200 in 465.0448 ms
2025-08-07 08:19:05.599 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/region/get-region - 200 null application/json; charset=utf-8 513.6183ms
2025-08-07 08:36:39.802 +08:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:36:39.925 +08:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 08:36:39.929 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:36:39.930 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 08:36:39.955 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 08:36:39.988 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 08:36:40.048 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:36:40.051 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 08:36:40.053 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:36:40.058 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 08:36:40.064 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 08:36:40.066 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 08:36:40.202 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:36:40.205 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 08:36:40.208 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:36:40.212 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 08:36:40.217 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 08:36:40.423 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 08:36:40.948 +08:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 08:36:41.095 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 08:36:41.557 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 08:36:41.585 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 08:36:41.600 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 08:36:41.913 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 08:36:41.920 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 08:36:41.973 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 08:36:41.973 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 08:36:41.973 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_tttoyyg93sneyarjbdq7k1u4r8"
2025-08-07 08:36:41.973 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 08:36:41.981 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 08:36:42.026 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 08:36:42.028 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 08:36:42.032 +08:00 [INF] Hosting environment: Development
2025-08-07 08:36:42.032 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 08:36:42.188 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 08:36:42.775 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 588.624ms
2025-08-07 08:36:42.990 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 08:36:43.001 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 10.4069ms
2025-08-07 08:36:43.053 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/favicon-16x16.png - null null
2025-08-07 08:36:43.080 +08:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2025-08-07 08:36:43.088 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/favicon-16x16.png - 200 665 image/png 35.0415ms
2025-08-07 08:36:43.107 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 08:36:43.132 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 08:36:43.364 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 256.6455ms
2025-08-07 08:37:08.861 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/region/add-region - application/json 45
2025-08-07 08:37:08.870 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:37:08.949 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 08:37:10.957 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2025-08-07 08:37:10.976 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-07 08:37:10.984 +08:00 [INF] HTTP POST /region/add-region responded 401 in 2024.7736 ms
2025-08-07 08:37:11.022 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/region/add-region - 401 0 null 2160.7647ms
2025-08-07 08:37:21.143 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/region/add-region - application/json 45
2025-08-07 08:37:21.150 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:37:21.359 +08:00 [INF] Executing endpoint 'HTTP: POST region/add-region'
2025-08-07 08:37:21.834 +08:00 [INF] Executed DbCommand (131ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Size = 50), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Region] ([Id], [Code], [CreationTime], [CurrentNum], [Description], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-08-07 08:37:21.917 +08:00 [INF] Executed endpoint 'HTTP: POST region/add-region'
2025-08-07 08:37:21.921 +08:00 [INF] HTTP POST /region/add-region responded 200 in 766.6360 ms
2025-08-07 08:37:21.966 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/region/add-region - 200 null application/json; charset=utf-8 823.2071ms
2025-08-07 08:37:41.126 +08:00 [INF] Application is shutting down...
2025-08-07 08:37:41.138 +08:00 [DBG] Stopping bus instances: IBus
2025-08-07 08:37:41.141 +08:00 [DBG] Stopping bus: "loopback://localhost/"
2025-08-07 08:37:41.146 +08:00 [DBG] Endpoint Stopping: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 08:37:41.147 +08:00 [DBG] Consumer Stopping: "loopback://localhost/WcsIntegrationEvent" (Stop Receive Transport)
2025-08-07 08:37:41.153 +08:00 [DBG] Endpoint Completed: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 08:37:41.161 +08:00 [DBG] Consumer Completed: "loopback://localhost/WcsIntegrationEvent": 0 received, 0 concurrent
2025-08-07 08:37:41.164 +08:00 [DBG] Endpoint Stopping: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 08:37:41.164 +08:00 [DBG] Consumer Stopping: "loopback://localhost/S7ReadPlcDataBlockEvent" (Stop Receive Transport)
2025-08-07 08:37:41.165 +08:00 [DBG] Endpoint Completed: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 08:37:41.166 +08:00 [DBG] Consumer Completed: "loopback://localhost/S7ReadPlcDataBlockEvent": 0 received, 0 concurrent
2025-08-07 08:37:41.168 +08:00 [DBG] Endpoint Stopping: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 08:37:41.168 +08:00 [DBG] Consumer Stopping: "loopback://localhost/S7WritePlcDataBlockEvent" (Stop Receive Transport)
2025-08-07 08:37:41.169 +08:00 [DBG] Endpoint Completed: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 08:37:41.169 +08:00 [DBG] Consumer Completed: "loopback://localhost/S7WritePlcDataBlockEvent": 0 received, 0 concurrent
2025-08-07 08:37:41.172 +08:00 [DBG] Endpoint Stopping: "loopback://localhost/_WarehourceSource_bus_tttoyyg93sneyarjbdq7k1u4r8"
2025-08-07 08:37:41.172 +08:00 [DBG] Consumer Stopping: "loopback://localhost/_WarehourceSource_bus_tttoyyg93sneyarjbdq7k1u4r8" (Stop Receive Transport)
2025-08-07 08:37:41.173 +08:00 [DBG] Endpoint Completed: "loopback://localhost/_WarehourceSource_bus_tttoyyg93sneyarjbdq7k1u4r8"
2025-08-07 08:37:41.174 +08:00 [DBG] Consumer Completed: "loopback://localhost/_WarehourceSource_bus_tttoyyg93sneyarjbdq7k1u4r8": 0 received, 0 concurrent
2025-08-07 08:37:41.186 +08:00 [INF] Bus stopped: "loopback://localhost/"
2025-08-07 08:38:44.191 +08:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:38:44.246 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 08:38:44.251 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:38:44.253 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 08:38:44.264 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 08:38:44.277 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 08:38:44.322 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:38:44.326 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 08:38:44.328 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:38:44.331 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 08:38:44.337 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 08:38:44.341 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 08:38:44.439 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:38:44.442 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 08:38:44.445 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:38:44.448 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 08:38:44.454 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 08:38:44.458 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 08:38:44.743 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 08:38:44.786 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 08:38:44.943 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 08:38:44.949 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 08:38:44.953 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 08:38:45.042 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 08:38:45.046 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 08:38:45.080 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 08:38:45.080 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 08:38:45.080 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 08:38:45.080 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_gohoyyg93sneb3wbbdq7k1sryj"
2025-08-07 08:38:45.085 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 08:38:45.112 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 08:38:45.113 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 08:38:45.114 +08:00 [INF] Hosting environment: Development
2025-08-07 08:38:45.115 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 08:38:45.490 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 08:38:45.784 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 294.9748ms
2025-08-07 08:38:46.002 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 08:38:46.014 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 08:38:46.179 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 176.0696ms
2025-08-07 08:38:57.190 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/region/get-region - null 0
2025-08-07 08:38:57.193 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:38:57.199 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 08:38:57.223 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2025-08-07 08:38:57.228 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-07 08:38:57.230 +08:00 [INF] HTTP POST /region/get-region responded 401 in 28.0186 ms
2025-08-07 08:38:57.244 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/region/get-region - 401 0 null 54.169ms
2025-08-07 08:39:06.211 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/region/get-region - null 0
2025-08-07 08:39:06.215 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:39:06.260 +08:00 [INF] Executing endpoint 'HTTP: POST region/get-region'
2025-08-07 08:39:06.279 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 08:39:06.308 +08:00 [INF] Executed endpoint 'HTTP: POST region/get-region'
2025-08-07 08:39:06.309 +08:00 [INF] HTTP POST /region/get-region responded 200 in 93.6822 ms
2025-08-07 08:39:06.314 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/region/get-region - 200 null application/json; charset=utf-8 103.2658ms
2025-08-07 08:39:31.240 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/region/add-region - application/json 93
2025-08-07 08:39:31.242 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:39:31.247 +08:00 [INF] Executing endpoint 'HTTP: POST region/add-region'
2025-08-07 08:39:31.416 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Size = 50), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Region] ([Id], [Code], [CreationTime], [CurrentNum], [Description], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-08-07 08:39:31.433 +08:00 [INF] Executed endpoint 'HTTP: POST region/add-region'
2025-08-07 08:39:31.436 +08:00 [INF] HTTP POST /region/add-region responded 200 in 190.7701 ms
2025-08-07 08:39:31.440 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/region/add-region - 200 null application/json; charset=utf-8 200.1181ms
2025-08-07 08:39:45.120 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/region/add-region - application/json 93
2025-08-07 08:39:45.124 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:39:45.125 +08:00 [INF] Executing endpoint 'HTTP: POST region/add-region'
2025-08-07 08:39:45.140 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Size = 50), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Region] ([Id], [Code], [CreationTime], [CurrentNum], [Description], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-08-07 08:39:45.144 +08:00 [INF] Executed endpoint 'HTTP: POST region/add-region'
2025-08-07 08:39:45.144 +08:00 [INF] HTTP POST /region/add-region responded 200 in 19.7362 ms
2025-08-07 08:39:45.147 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/region/add-region - 200 null application/json; charset=utf-8 26.1602ms
2025-08-07 08:40:18.541 +08:00 [INF] Application is shutting down...
2025-08-07 08:40:18.556 +08:00 [DBG] Stopping bus instances: IBus
2025-08-07 08:40:18.561 +08:00 [DBG] Stopping bus: "loopback://localhost/"
2025-08-07 08:40:18.566 +08:00 [DBG] Endpoint Stopping: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 08:40:18.568 +08:00 [DBG] Consumer Stopping: "loopback://localhost/WcsIntegrationEvent" (Stop Receive Transport)
2025-08-07 08:40:18.576 +08:00 [DBG] Endpoint Completed: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 08:40:18.585 +08:00 [DBG] Consumer Completed: "loopback://localhost/WcsIntegrationEvent": 0 received, 0 concurrent
2025-08-07 08:40:18.588 +08:00 [DBG] Endpoint Stopping: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 08:40:18.588 +08:00 [DBG] Consumer Stopping: "loopback://localhost/S7ReadPlcDataBlockEvent" (Stop Receive Transport)
2025-08-07 08:40:18.589 +08:00 [DBG] Endpoint Completed: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 08:40:18.590 +08:00 [DBG] Consumer Completed: "loopback://localhost/S7ReadPlcDataBlockEvent": 0 received, 0 concurrent
2025-08-07 08:40:18.591 +08:00 [DBG] Endpoint Stopping: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 08:40:18.592 +08:00 [DBG] Consumer Stopping: "loopback://localhost/S7WritePlcDataBlockEvent" (Stop Receive Transport)
2025-08-07 08:40:18.593 +08:00 [DBG] Endpoint Completed: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 08:40:18.593 +08:00 [DBG] Consumer Completed: "loopback://localhost/S7WritePlcDataBlockEvent": 0 received, 0 concurrent
2025-08-07 08:40:18.595 +08:00 [DBG] Endpoint Stopping: "loopback://localhost/_WarehourceSource_bus_gohoyyg93sneb3wbbdq7k1sryj"
2025-08-07 08:40:18.595 +08:00 [DBG] Consumer Stopping: "loopback://localhost/_WarehourceSource_bus_gohoyyg93sneb3wbbdq7k1sryj" (Stop Receive Transport)
2025-08-07 08:40:18.596 +08:00 [DBG] Endpoint Completed: "loopback://localhost/_WarehourceSource_bus_gohoyyg93sneb3wbbdq7k1sryj"
2025-08-07 08:40:18.597 +08:00 [DBG] Consumer Completed: "loopback://localhost/_WarehourceSource_bus_gohoyyg93sneb3wbbdq7k1sryj": 0 received, 0 concurrent
2025-08-07 08:40:18.609 +08:00 [INF] Bus stopped: "loopback://localhost/"
2025-08-07 08:40:27.748 +08:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:40:27.802 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 08:40:27.805 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:40:27.807 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 08:40:27.817 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 08:40:27.829 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 08:40:27.853 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:40:27.855 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 08:40:27.857 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:40:27.858 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 08:40:27.862 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 08:40:27.864 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 08:40:27.935 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:40:27.937 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 08:40:27.939 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 08:40:27.941 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 08:40:27.944 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 08:40:27.946 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 08:40:28.200 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 08:40:28.244 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 08:40:28.407 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 08:40:28.413 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 08:40:28.417 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 08:40:28.504 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 08:40:28.507 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 08:40:28.537 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 08:40:28.537 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_6booyyg93snebnuebdq7k1abfi"
2025-08-07 08:40:28.537 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 08:40:28.537 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 08:40:28.541 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 08:40:28.562 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 08:40:28.565 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 08:40:28.565 +08:00 [INF] Hosting environment: Development
2025-08-07 08:40:28.566 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 08:40:28.919 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 08:40:29.235 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 318.8625ms
2025-08-07 08:40:29.504 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 08:40:29.523 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 08:40:29.780 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 275.563ms
2025-08-07 08:45:00.088 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 123
2025-08-07 08:45:00.100 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:45:00.113 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 08:45:00.155 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2025-08-07 08:45:00.162 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-07 08:45:00.166 +08:00 [INF] HTTP POST /decive/add-or-update responded 401 in 47.2198 ms
2025-08-07 08:45:00.191 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 401 0 null 103.216ms
2025-08-07 08:45:28.617 +08:00 [INF] Usage Telemetry: {"id":"f0610000-dfcd-8480-bc55-08ddd54b01a8","created":"2025-08-07T08:40:28.3579630\u002B08:00","host":{"framework_version":"8.0.11","mass_transit_version":"8.5.0.0","operating_system_version":"Microsoft Windows NT 10.0.26100.0","time_zone_info":"(UTC\u002B08:00) \u5317\u4EAC\uFF0C\u91CD\u5E86\uFF0C\u9999\u6E2F\u7279\u522B\u884C\u653F\u533A\uFF0C\u4E4C\u9C81\u6728\u9F50","commit_hash":"9c1b9ef3228ac000bf2ed0c4e0a669a30f1431ae"},"bus":[{"created":"2025-08-07T08:40:28.3600602\u002B08:00","configured":"2025-08-07T08:40:28.4855662\u002B08:00","started":"2025-08-07T08:40:28.5406937\u002B08:00","name":"IBus","endpoints":[{"name":"WcsIntegrationEvent","type":"InMemory","prefetch_count":32,"consumer_count":1,"message_count":1},{"name":"S7ReadPlcDataBlockEvent","type":"InMemory","prefetch_count":32,"consumer_count":1,"message_count":1},{"name":"S7WritePlcDataBlockEvent","type":"InMemory","prefetch_count":32,"consumer_count":1,"message_count":1},{"name":"_bus_","type":"InMemory","prefetch_count":32}]}]}
2025-08-07 08:45:47.658 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 186
2025-08-07 08:45:47.663 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:45:47.744 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 08:45:47.843 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 08:45:48.157 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 08:45:48.222 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 08:45:48.226 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 561.6428 ms
2025-08-07 08:45:48.245 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 587.1011ms
2025-08-07 08:46:04.710 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 180
2025-08-07 08:46:04.713 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:46:04.727 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 08:46:04.741 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 08:46:04.747 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 08:46:04.752 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 08:46:04.753 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 37.8031 ms
2025-08-07 08:46:04.758 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 47.9607ms
2025-08-07 08:47:26.508 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 181
2025-08-07 08:47:26.512 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:47:26.515 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 08:47:26.533 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 08:47:26.544 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 08:47:26.571 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 08:47:26.574 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 60.8004 ms
2025-08-07 08:47:26.579 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 70.7847ms
2025-08-07 08:47:32.200 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 181
2025-08-07 08:47:32.204 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:47:32.210 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 08:47:32.219 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 08:47:32.226 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 08:47:32.229 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 08:47:32.230 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 20.9190 ms
2025-08-07 08:47:32.235 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 34.8588ms
2025-08-07 08:47:37.750 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 181
2025-08-07 08:47:37.754 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:47:37.756 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 08:47:37.766 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 08:47:37.773 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 08:47:37.777 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 08:47:37.779 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 23.5581 ms
2025-08-07 08:47:37.784 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 33.217ms
2025-08-07 08:47:46.983 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 175
2025-08-07 08:47:46.986 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:47:46.987 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 08:47:46.991 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 08:47:47.017 +08:00 [ERR] Failed executing DbCommand (14ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 08:47:47.077 +08:00 [ERR] An exception occurred in the database while saving changes for context type 'Wcs.Infrastructure.Database.WCSDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 不能在具有唯一索引“IX_Wcs.Device_DeviceName”的对象“dbo.Wcs.Device”中插入重复键的行。重复键值为 (StockOut03)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:454c3ba0-1368-4ecd-a62c-43f649119afa
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 不能在具有唯一索引“IX_Wcs.Device_DeviceName”的对象“dbo.Wcs.Device”中插入重复键的行。重复键值为 (StockOut03)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:454c3ba0-1368-4ecd-a62c-43f649119afa
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-07 08:47:47.102 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 08:47:47.105 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 不能在具有唯一索引“IX_Wcs.Device_DeviceName”的对象“dbo.Wcs.Device”中插入重复键的行。重复键值为 (StockOut03)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:454c3ba0-1368-4ecd-a62c-43f649119afa
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Infrastructure.EF.BaseDbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\BaseDbContext.cs:line 26
   at Wcs.Application.DBHandler.Device.AddOrUpdate.AddOrUpdateDeviceHandler.Handle(AddOrUpdateDeviceEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\Device\AddOrUpdate\AddOrUpdateDeviceHandler.cs:line 30
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.Device.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\Device\InsertOrUpdate.cs:line 20
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 08:47:47.211 +08:00 [ERR] HTTP POST /decive/add-or-update responded 500 in 224.2173 ms
2025-08-07 08:47:47.216 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 500 null application/json; charset=utf-8 233.0165ms
2025-08-07 08:48:10.909 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 175
2025-08-07 08:48:10.913 +08:00 [INF] CORS policy execution successful.
2025-08-07 08:48:10.916 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 08:48:10.921 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 08:48:10.932 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 08:48:10.936 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 08:48:10.938 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 23.7030 ms
2025-08-07 08:48:10.954 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 44.9747ms
2025-08-07 09:11:16.439 +08:00 [INF] Application is shutting down...
2025-08-07 09:11:16.453 +08:00 [DBG] Stopping bus instances: IBus
2025-08-07 09:11:16.459 +08:00 [DBG] Stopping bus: "loopback://localhost/"
2025-08-07 09:11:16.469 +08:00 [DBG] Endpoint Stopping: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 09:11:16.473 +08:00 [DBG] Consumer Stopping: "loopback://localhost/WcsIntegrationEvent" (Stop Receive Transport)
2025-08-07 09:11:16.490 +08:00 [DBG] Endpoint Completed: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 09:11:16.507 +08:00 [DBG] Consumer Completed: "loopback://localhost/WcsIntegrationEvent": 0 received, 0 concurrent
2025-08-07 09:11:16.511 +08:00 [DBG] Endpoint Stopping: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 09:11:16.512 +08:00 [DBG] Consumer Stopping: "loopback://localhost/S7ReadPlcDataBlockEvent" (Stop Receive Transport)
2025-08-07 09:11:16.513 +08:00 [DBG] Endpoint Completed: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 09:11:16.514 +08:00 [DBG] Consumer Completed: "loopback://localhost/S7ReadPlcDataBlockEvent": 0 received, 0 concurrent
2025-08-07 09:11:16.515 +08:00 [DBG] Endpoint Stopping: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 09:11:16.516 +08:00 [DBG] Consumer Stopping: "loopback://localhost/S7WritePlcDataBlockEvent" (Stop Receive Transport)
2025-08-07 09:11:16.517 +08:00 [DBG] Endpoint Completed: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 09:11:16.518 +08:00 [DBG] Consumer Completed: "loopback://localhost/S7WritePlcDataBlockEvent": 0 received, 0 concurrent
2025-08-07 09:11:16.521 +08:00 [DBG] Endpoint Stopping: "loopback://localhost/_WarehourceSource_bus_6booyyg93snebnuebdq7k1abfi"
2025-08-07 09:11:16.522 +08:00 [DBG] Consumer Stopping: "loopback://localhost/_WarehourceSource_bus_6booyyg93snebnuebdq7k1abfi" (Stop Receive Transport)
2025-08-07 09:11:16.523 +08:00 [DBG] Endpoint Completed: "loopback://localhost/_WarehourceSource_bus_6booyyg93snebnuebdq7k1abfi"
2025-08-07 09:11:16.524 +08:00 [DBG] Consumer Completed: "loopback://localhost/_WarehourceSource_bus_6booyyg93snebnuebdq7k1abfi": 0 received, 0 concurrent
2025-08-07 09:11:16.566 +08:00 [INF] Bus stopped: "loopback://localhost/"
2025-08-07 09:12:46.626 +08:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:12:46.740 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 09:12:46.743 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:12:46.746 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 09:12:46.758 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 09:12:46.800 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 09:12:46.872 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:12:46.875 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 09:12:46.878 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:12:46.882 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 09:12:46.889 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 09:12:46.892 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 09:12:47.085 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:12:47.088 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 09:12:47.091 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:12:47.098 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 09:12:47.112 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 09:12:47.202 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 09:12:47.827 +08:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 09:12:48.051 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 09:12:48.882 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 09:12:48.901 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 09:12:48.913 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 09:12:49.154 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 09:12:49.160 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 09:12:49.211 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 09:12:49.211 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_gbmoyyg93snebjatbdq7kuhgn6"
2025-08-07 09:12:49.211 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 09:12:49.211 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 09:12:49.223 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 09:12:49.320 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 09:12:49.324 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 09:12:49.326 +08:00 [INF] Hosting environment: Development
2025-08-07 09:12:49.327 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 09:12:51.669 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 09:12:52.143 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 475.3119ms
2025-08-07 09:12:52.375 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 09:12:52.390 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 09:12:52.602 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 226.4498ms
2025-08-07 09:17:49.257 +08:00 [INF] Usage Telemetry: {"id":"30570000-dfcd-8480-5f70-08ddd54f85f4","created":"2025-08-07T09:12:48.3000432\u002B08:00","host":{"framework_version":"8.0.11","mass_transit_version":"8.5.0.0","operating_system_version":"Microsoft Windows NT 10.0.26100.0","time_zone_info":"(UTC\u002B08:00) \u5317\u4EAC\uFF0C\u91CD\u5E86\uFF0C\u9999\u6E2F\u7279\u522B\u884C\u653F\u533A\uFF0C\u4E4C\u9C81\u6728\u9F50","commit_hash":"9c1b9ef3228ac000bf2ed0c4e0a669a30f1431ae"},"bus":[{"created":"2025-08-07T09:12:48.3058847\u002B08:00","configured":"2025-08-07T09:12:49.1040223\u002B08:00","started":"2025-08-07T09:12:49.2204303\u002B08:00","name":"IBus","endpoints":[{"name":"WcsIntegrationEvent","type":"InMemory","prefetch_count":32,"consumer_count":1,"message_count":1},{"name":"S7ReadPlcDataBlockEvent","type":"InMemory","prefetch_count":32,"consumer_count":1,"message_count":1},{"name":"S7WritePlcDataBlockEvent","type":"InMemory","prefetch_count":32,"consumer_count":1,"message_count":1},{"name":"_bus_","type":"InMemory","prefetch_count":32}]}]}
2025-08-07 09:25:34.032 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 257
2025-08-07 09:25:34.045 +08:00 [INF] CORS policy execution successful.
2025-08-07 09:25:34.058 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 09:25:35.985 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:25:36.043 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:25:36.047 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to read parameter "DeviceRequest request" from the request body as JSON.
 ---> System.Text.Json.JsonException: '0x0A' is invalid within a JSON string. The string should be correctly escaped. Path: $.config | LineNumber: 5 | BytePositionInLine: 14.
 ---> System.Text.Json.JsonReaderException: '0x0A' is invalid within a JSON string. The string should be correctly escaped. LineNumber: 5 | BytePositionInLine: 14.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.ConsumeStringAndValidate(ReadOnlySpan`1 data, Int32 idx)
   at System.Text.Json.Utf8JsonReader.ConsumeString()
   at System.Text.Json.Utf8JsonReader.ConsumeValue(Byte marker)
   at System.Text.Json.Utf8JsonReader.ReadSingleSegment()
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.ReadAheadPropertyValue(ReadStack& state, Utf8JsonReader& reader, JsonPropertyInfo jsonPropertyInfo)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.InvalidJsonRequestBody(HttpContext httpContext, String parameterTypeName, String parameterName, Exception exception, Boolean shouldThrow)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 09:25:36.087 +08:00 [ERR] HTTP POST /decive/add-or-update responded 500 in 2025.3476 ms
2025-08-07 09:25:36.100 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 500 null application/json; charset=utf-8 2068.1646ms
2025-08-07 09:27:06.416 +08:00 [INF] Application is shutting down...
2025-08-07 09:27:06.430 +08:00 [DBG] Stopping bus instances: IBus
2025-08-07 09:27:06.434 +08:00 [DBG] Stopping bus: "loopback://localhost/"
2025-08-07 09:27:06.440 +08:00 [DBG] Endpoint Stopping: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 09:27:06.441 +08:00 [DBG] Consumer Stopping: "loopback://localhost/WcsIntegrationEvent" (Stop Receive Transport)
2025-08-07 09:27:06.447 +08:00 [DBG] Endpoint Completed: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 09:27:06.456 +08:00 [DBG] Consumer Completed: "loopback://localhost/WcsIntegrationEvent": 0 received, 0 concurrent
2025-08-07 09:27:06.460 +08:00 [DBG] Endpoint Stopping: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 09:27:06.461 +08:00 [DBG] Consumer Stopping: "loopback://localhost/S7ReadPlcDataBlockEvent" (Stop Receive Transport)
2025-08-07 09:27:06.462 +08:00 [DBG] Endpoint Completed: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 09:27:06.463 +08:00 [DBG] Consumer Completed: "loopback://localhost/S7ReadPlcDataBlockEvent": 0 received, 0 concurrent
2025-08-07 09:27:06.465 +08:00 [DBG] Endpoint Stopping: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 09:27:06.465 +08:00 [DBG] Consumer Stopping: "loopback://localhost/S7WritePlcDataBlockEvent" (Stop Receive Transport)
2025-08-07 09:27:06.466 +08:00 [DBG] Endpoint Completed: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 09:27:06.467 +08:00 [DBG] Consumer Completed: "loopback://localhost/S7WritePlcDataBlockEvent": 0 received, 0 concurrent
2025-08-07 09:27:06.469 +08:00 [DBG] Endpoint Stopping: "loopback://localhost/_WarehourceSource_bus_gbmoyyg93snebjatbdq7kuhgn6"
2025-08-07 09:27:06.470 +08:00 [DBG] Consumer Stopping: "loopback://localhost/_WarehourceSource_bus_gbmoyyg93snebjatbdq7kuhgn6" (Stop Receive Transport)
2025-08-07 09:27:06.471 +08:00 [DBG] Endpoint Completed: "loopback://localhost/_WarehourceSource_bus_gbmoyyg93snebjatbdq7kuhgn6"
2025-08-07 09:27:06.471 +08:00 [DBG] Consumer Completed: "loopback://localhost/_WarehourceSource_bus_gbmoyyg93snebjatbdq7kuhgn6": 0 received, 0 concurrent
2025-08-07 09:27:06.481 +08:00 [INF] Bus stopped: "loopback://localhost/"
2025-08-07 09:27:55.456 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:27:55.524 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 09:27:55.534 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:27:55.537 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 09:27:55.549 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 09:27:55.561 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 09:27:55.588 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:27:55.591 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 09:27:55.593 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:27:55.595 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 09:27:55.599 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 09:27:55.601 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 09:27:55.686 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:27:55.690 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 09:27:55.693 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:27:55.695 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 09:27:55.699 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 09:27:55.707 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 09:27:56.006 +08:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 09:27:56.110 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 09:27:56.172 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 09:27:56.177 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 09:27:56.179 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 09:27:56.389 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 09:27:56.393 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 09:27:56.468 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 09:27:56.468 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 09:27:56.468 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_rb7oyyg93sney5rnbdq7kwpdbc"
2025-08-07 09:27:56.468 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 09:27:56.469 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 09:27:56.561 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 09:27:56.567 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 09:27:56.829 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 09:27:56.831 +08:00 [INF] Hosting environment: Development
2025-08-07 09:27:56.832 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 09:27:57.010 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 09:27:57.278 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 281.5347ms
2025-08-07 09:27:57.464 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 09:27:57.464 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 09:27:57.472 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 10.7495ms
2025-08-07 09:27:57.543 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 78.7907ms
2025-08-07 09:27:57.589 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 09:27:57.620 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.1884ms
2025-08-07 09:29:38.271 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 235
2025-08-07 09:29:38.283 +08:00 [INF] CORS policy execution successful.
2025-08-07 09:29:38.362 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 09:29:38.437 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2025-08-07 09:29:38.444 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-07 09:29:38.467 +08:00 [INF] HTTP POST /decive/add-or-update responded 401 in 100.9467 ms
2025-08-07 09:29:38.603 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 401 0 null 331.4583ms
2025-08-07 09:29:45.654 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 235
2025-08-07 09:29:45.662 +08:00 [INF] CORS policy execution successful.
2025-08-07 09:29:45.728 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:29:46.110 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:29:46.199 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to read parameter "DeviceRequest request" from the request body as JSON.
 ---> System.Text.Json.JsonException: 'r' is invalid after a value. Expected either ',', '}', or ']'. Path: $ | LineNumber: 5 | BytePositionInLine: 15.
 ---> System.Text.Json.JsonReaderException: 'r' is invalid after a value. Expected either ',', '}', or ']'. LineNumber: 5 | BytePositionInLine: 15.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.ConsumeNextToken(Byte marker)
   at System.Text.Json.Utf8JsonReader.ConsumeNextTokenOrRollback(Byte marker)
   at System.Text.Json.Utf8JsonReader.ReadSingleSegment()
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.InvalidJsonRequestBody(HttpContext httpContext, String parameterTypeName, String parameterName, Exception exception, Boolean shouldThrow)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 09:29:46.419 +08:00 [ERR] HTTP POST /decive/add-or-update responded 500 in 749.9295 ms
2025-08-07 09:29:46.530 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 500 null application/json; charset=utf-8 876.4397ms
2025-08-07 09:38:20.628 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:38:20.684 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 09:38:20.690 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:38:20.693 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 09:38:20.707 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 09:38:20.720 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 09:38:20.747 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:38:20.750 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 09:38:20.753 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:38:20.757 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 09:38:20.761 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 09:38:20.766 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 09:38:20.852 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:38:20.862 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 09:38:20.868 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:38:20.874 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 09:38:20.881 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 09:38:20.893 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 09:38:21.217 +08:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 09:38:21.317 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 09:38:21.380 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 09:38:21.386 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 09:38:21.391 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 09:38:21.605 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 09:38:21.611 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 09:38:21.692 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 09:38:21.692 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 09:38:21.692 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 09:38:21.692 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_abcyyyg93snebxwzbdq7kwazgu"
2025-08-07 09:38:21.696 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 09:38:21.810 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 09:38:21.818 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 09:38:22.104 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 09:38:22.108 +08:00 [INF] Hosting environment: Development
2025-08-07 09:38:22.107 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 09:38:22.111 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 09:38:22.367 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 286.4725ms
2025-08-07 09:38:22.388 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 09:38:22.396 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 7.848ms
2025-08-07 09:38:22.530 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 09:38:22.588 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 58.0559ms
2025-08-07 09:38:22.650 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 09:38:22.687 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 36.7829ms
2025-08-07 09:38:41.023 +08:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:38:41.136 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 09:38:41.142 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:38:41.364 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 09:38:41.425 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 09:38:41.476 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 09:38:41.514 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:38:41.552 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 09:38:41.570 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:38:41.576 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 09:38:41.587 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 09:38:41.591 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 09:38:41.704 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:38:41.708 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 09:38:41.713 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 09:38:41.717 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 09:38:41.723 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 09:38:41.734 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 09:38:42.055 +08:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 09:38:42.182 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 09:38:42.278 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 09:38:42.294 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 09:38:42.299 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 09:38:42.562 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 09:38:42.585 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 09:38:42.678 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 09:38:42.678 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 09:38:42.678 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_qbpyyyg93sneytctbdq7kw3rnq"
2025-08-07 09:38:42.678 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 09:38:42.684 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 09:38:42.811 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 09:38:42.821 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 09:38:43.076 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 09:38:43.078 +08:00 [INF] Hosting environment: Development
2025-08-07 09:38:43.080 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 09:38:43.484 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 09:38:43.729 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 258.0073ms
2025-08-07 09:38:43.905 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 09:38:43.905 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 09:38:43.925 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 20.0497ms
2025-08-07 09:38:43.961 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.8313ms
2025-08-07 09:38:44.037 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 09:38:44.074 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 36.9882ms
2025-08-07 09:40:35.282 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 232
2025-08-07 09:40:35.303 +08:00 [INF] CORS policy execution successful.
2025-08-07 09:40:35.328 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 09:40:35.423 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2025-08-07 09:40:35.434 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-07 09:40:35.439 +08:00 [INF] HTTP POST /decive/add-or-update responded 401 in 104.2301 ms
2025-08-07 09:40:35.504 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 401 0 null 223.0092ms
2025-08-07 09:40:48.509 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 232
2025-08-07 09:40:48.527 +08:00 [INF] CORS policy execution successful.
2025-08-07 09:40:48.601 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:40:59.505 +08:00 [INF] Executed DbCommand (133ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 09:40:59.778 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 09:40:59.833 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:40:59.837 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 11304.6094 ms
2025-08-07 09:40:59.923 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 11413.124ms
2025-08-07 09:41:30.744 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 232
2025-08-07 09:41:30.751 +08:00 [INF] CORS policy execution successful.
2025-08-07 09:41:30.768 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:41:36.604 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 09:41:36.621 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 09:41:36.637 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:41:36.640 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 5874.8429 ms
2025-08-07 09:41:36.703 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 5959.176ms
2025-08-07 09:42:07.471 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 232
2025-08-07 09:42:07.502 +08:00 [INF] CORS policy execution successful.
2025-08-07 09:42:07.511 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:42:07.532 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 09:42:07.554 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 09:42:07.573 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:42:07.576 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 66.4862 ms
2025-08-07 09:42:07.655 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 184.3743ms
2025-08-07 09:42:47.200 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 233
2025-08-07 09:42:47.216 +08:00 [INF] CORS policy execution successful.
2025-08-07 09:42:47.221 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:42:47.232 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 09:42:47.251 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 09:42:47.258 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:42:47.259 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 38.7333 ms
2025-08-07 09:42:47.341 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 141.4344ms
2025-08-07 09:44:35.889 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 233
2025-08-07 09:44:35.949 +08:00 [INF] CORS policy execution successful.
2025-08-07 09:44:35.954 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:44:35.964 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 09:44:35.983 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 09:44:35.993 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:44:35.995 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 41.7244 ms
2025-08-07 09:44:36.067 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 178.4885ms
2025-08-07 09:45:07.977 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 233
2025-08-07 09:45:07.982 +08:00 [INF] CORS policy execution successful.
2025-08-07 09:45:07.985 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:45:07.997 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 09:45:08.019 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 09:45:08.034 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:45:08.051 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 66.0291 ms
2025-08-07 09:45:08.130 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 152.6127ms
2025-08-07 09:50:49.020 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 171
2025-08-07 09:50:49.035 +08:00 [INF] CORS policy execution successful.
2025-08-07 09:50:49.041 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:50:49.446 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:50:49.552 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to read parameter "DeviceRequest request" from the request body as JSON.
 ---> System.Text.Json.JsonException: 's' is an invalid start of a value. Path: $.config | LineNumber: 5 | BytePositionInLine: 12.
 ---> System.Text.Json.JsonReaderException: 's' is an invalid start of a value. LineNumber: 5 | BytePositionInLine: 12.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.ConsumeValue(Byte marker)
   at System.Text.Json.Utf8JsonReader.ReadSingleSegment()
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.ReadAheadPropertyValue(ReadStack& state, Utf8JsonReader& reader, JsonPropertyInfo jsonPropertyInfo)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.InvalidJsonRequestBody(HttpContext httpContext, String parameterTypeName, String parameterName, Exception exception, Boolean shouldThrow)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 09:50:49.721 +08:00 [ERR] HTTP POST /decive/add-or-update responded 500 in 680.6331 ms
2025-08-07 09:50:49.761 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 500 null application/json; charset=utf-8 741.0019ms
2025-08-07 09:51:09.149 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 167
2025-08-07 09:51:09.159 +08:00 [INF] CORS policy execution successful.
2025-08-07 09:51:09.169 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:51:09.180 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 09:51:09.201 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 09:51:09.221 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:51:09.225 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 57.4393 ms
2025-08-07 09:51:09.350 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 202.0344ms
2025-08-07 09:51:31.446 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 167
2025-08-07 09:51:31.451 +08:00 [INF] CORS policy execution successful.
2025-08-07 09:51:31.459 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:51:31.472 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 09:51:31.668 +08:00 [ERR] Failed executing DbCommand (181ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 09:51:32.135 +08:00 [ERR] An exception occurred in the database while saving changes for context type 'Wcs.Infrastructure.Database.WCSDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 不能在具有唯一索引“IX_Wcs.Device_DeviceName”的对象“dbo.Wcs.Device”中插入重复键的行。重复键值为 (Stacker)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bfa1bbd3-3200-4ed9-9230-e8f2432388db
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 不能在具有唯一索引“IX_Wcs.Device_DeviceName”的对象“dbo.Wcs.Device”中插入重复键的行。重复键值为 (Stacker)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bfa1bbd3-3200-4ed9-9230-e8f2432388db
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-07 09:51:32.829 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:51:33.135 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 不能在具有唯一索引“IX_Wcs.Device_DeviceName”的对象“dbo.Wcs.Device”中插入重复键的行。重复键值为 (Stacker)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:bfa1bbd3-3200-4ed9-9230-e8f2432388db
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Infrastructure.EF.BaseDbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\BaseDbContext.cs:line 26
   at Wcs.Application.DBHandler.Device.AddOrUpdate.AddOrUpdateDeviceHandler.Handle(AddOrUpdateDeviceEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\Device\AddOrUpdate\AddOrUpdateDeviceHandler.cs:line 30
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.Device.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\Device\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 09:51:33.365 +08:00 [ERR] HTTP POST /decive/add-or-update responded 500 in 1906.6025 ms
2025-08-07 09:51:33.506 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 500 null application/json; charset=utf-8 2059.5425ms
2025-08-07 09:51:45.304 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 168
2025-08-07 09:51:45.310 +08:00 [INF] CORS policy execution successful.
2025-08-07 09:51:45.318 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:51:45.326 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 09:51:45.355 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 09:51:45.387 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:51:45.401 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 82.6896 ms
2025-08-07 09:51:45.502 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 198.5465ms
2025-08-07 09:51:53.337 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 168
2025-08-07 09:51:53.345 +08:00 [INF] CORS policy execution successful.
2025-08-07 09:51:53.351 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:51:53.359 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 09:51:53.377 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 09:51:53.391 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 09:51:53.395 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 44.8180 ms
2025-08-07 09:51:53.476 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 139.0149ms
2025-08-07 09:59:18.103 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 174
2025-08-07 09:59:18.127 +08:00 [INF] CORS policy execution successful.
2025-08-07 09:59:18.132 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 09:59:18.740 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[@__request_RegionCode_0='?' (Size = 20), @__request_PahtNodeGroup_1='?' (Size = 4000), @__request_CurrentDeviceName_2='?' (Size = 4000), @__request_TaskType_3='?' (DbType = Int32), @__request_CurrentDeviceType_4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[CreationTime], [e].[CurrentDeviceName], [e].[CurrentDeviceType], [e].[IsDeleted], [e].[LastModificationTime], [e].[LastModifierUser], [e].[NextDeviceName], [e].[PahtNodeGroup], [e].[RegionId], [e].[TaskType], [t].[Id], [t].[Code], [t].[CreationTime], [t].[CurrentNum], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser]
FROM [ExecuteNodes] AS [e]
LEFT JOIN (
    SELECT [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
    FROM [Wcs.Region] AS [w]
    WHERE [w].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [e].[RegionId] = [t].[Id]
WHERE [e].[IsDeleted] = CAST(0 AS bit) AND [t].[Code] = @__request_RegionCode_0 AND [e].[PahtNodeGroup] = @__request_PahtNodeGroup_1 AND [e].[CurrentDeviceName] = @__request_CurrentDeviceName_2 AND [e].[TaskType] = @__request_TaskType_3 AND [e].[CurrentDeviceType] = @__request_CurrentDeviceType_4
2025-08-07 09:59:18.757 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 09:59:18.759 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 626.7398 ms
2025-08-07 09:59:18.808 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 704.2873ms
2025-08-07 10:01:50.578 +08:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:01:50.642 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:01:50.651 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:01:50.660 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:01:50.674 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:01:50.689 +08:00 [INF] Applying migration '20250807020141_InitialCreate'.
2025-08-07 10:01:50.842 +08:00 [ERR] Failed executing DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.Device] (
    [Id] uniqueidentifier NOT NULL,
    [DeviceType] int NOT NULL,
    [DeviceName] nvarchar(450) NOT NULL,
    [Description] nvarchar(100) NULL,
    [Config] nvarchar(512) NOT NULL,
    [Enable] bit NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.Device] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 10:01:50.930 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:01:50.935 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:01:50.941 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:01:50.945 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:01:50.950 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:01:50.957 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:01:51.048 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:01:51.055 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:01:51.062 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:01:51.070 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:01:51.078 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:01:51.090 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:01:51.461 +08:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 10:01:51.576 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 10:01:51.650 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 10:01:51.659 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 10:01:51.664 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 10:01:51.863 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 10:01:51.868 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 10:01:51.937 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_6oxoyyg93sneysifbdq7kiuydj"
2025-08-07 10:01:51.937 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 10:01:51.937 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 10:01:51.937 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 10:01:51.939 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 10:01:52.047 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 10:01:52.057 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 10:01:52.357 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 10:01:52.353 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 10:01:52.360 +08:00 [INF] Hosting environment: Development
2025-08-07 10:01:52.368 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 10:01:52.602 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 257.2903ms
2025-08-07 10:01:52.773 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 10:01:52.773 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 10:01:52.781 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 7.6973ms
2025-08-07 10:01:52.826 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.4256ms
2025-08-07 10:01:52.887 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 10:01:52.924 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 36.5056ms
2025-08-07 10:02:46.829 +08:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:02:46.890 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:02:46.898 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:02:46.903 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:02:46.915 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:02:46.930 +08:00 [INF] Applying migration '20250807020141_InitialCreate'.
2025-08-07 10:02:47.037 +08:00 [ERR] Failed executing DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.Device] (
    [Id] uniqueidentifier NOT NULL,
    [DeviceType] int NOT NULL,
    [DeviceName] nvarchar(450) NOT NULL,
    [Description] nvarchar(100) NULL,
    [Config] nvarchar(512) NOT NULL,
    [Enable] bit NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.Device] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 10:02:47.134 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:02:47.142 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:02:47.149 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:02:47.152 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:02:47.157 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:02:47.164 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:02:47.262 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:02:47.268 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:02:47.274 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:02:47.281 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:02:47.289 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:02:47.301 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:02:47.592 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 10:02:47.689 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 10:02:47.768 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 10:02:47.780 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 10:02:47.787 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 10:02:48.005 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 10:02:48.009 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 10:02:48.083 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 10:02:48.083 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 10:02:48.087 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 10:02:48.083 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_nywoyyg93sney4drbdq7kiwbg9"
2025-08-07 10:02:48.083 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 10:02:48.172 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 10:02:48.181 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 10:02:48.437 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 10:02:48.439 +08:00 [INF] Hosting environment: Development
2025-08-07 10:02:48.442 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 10:02:48.574 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 10:02:48.796 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 237.6263ms
2025-08-07 10:02:48.810 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 10:02:48.819 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 9.9478ms
2025-08-07 10:02:48.954 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 10:02:48.996 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.8104ms
2025-08-07 10:02:49.066 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 10:02:49.094 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 28.2726ms
2025-08-07 10:03:59.651 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 174
2025-08-07 10:03:59.672 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:03:59.717 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 10:03:59.817 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2025-08-07 10:03:59.824 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-07 10:03:59.827 +08:00 [INF] HTTP POST /executenode/add-or-update responded 401 in 103.4892 ms
2025-08-07 10:03:59.959 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 401 0 null 308.8047ms
2025-08-07 10:04:07.274 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 174
2025-08-07 10:04:07.294 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:04:07.431 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:04:07.859 +08:00 [INF] Executed DbCommand (20ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 10:04:07.880 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 10:04:08.018 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 10:04:08.258 +08:00 [ERR] Failed executing DbCommand (182ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:04:08.311 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Wcs.Infrastructure.Database.WCSDBContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'Wcs.ExecuteNodePath' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:69211587-01aa-48f0-920f-ba6387a417cd
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'Wcs.ExecuteNodePath' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:69211587-01aa-48f0-920f-ba6387a417cd
Error Number:208,State:1,Class:16
2025-08-07 10:04:08.628 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:04:08.731 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'Wcs.ExecuteNodePath' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method208(Closure, QueryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at Wcs.Infrastructure.DB.ExecuteNodePath.ExecuteNodeRepository.Get(Guid id) in D:\Program\仓库\Warehource.Modules\Wcs.Infrastructure\DB\ExecuteNodePath\ExecuteNodeRepository.cs:line 17
   at Wcs.Application.DBHandler.ExecueNode.AddOrUpdate.AddOrUpdateExecuteNodeHandler.Handle(AddOrUpdateExecuteNodeEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\ExecueNode\AddOrUpdate\AddOrUpdateExecuteNodeHandler.cs:line 25
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:69211587-01aa-48f0-920f-ba6387a417cd
Error Number:208,State:1,Class:16
2025-08-07 10:04:54.402 +08:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:04:54.462 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:04:54.467 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:04:54.473 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:04:54.484 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:04:54.501 +08:00 [INF] Applying migration '20250807020141_InitialCreate'.
2025-08-07 10:04:54.609 +08:00 [ERR] Failed executing DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.Device] (
    [Id] uniqueidentifier NOT NULL,
    [DeviceType] int NOT NULL,
    [DeviceName] nvarchar(450) NOT NULL,
    [Description] nvarchar(100) NULL,
    [Config] nvarchar(512) NOT NULL,
    [Enable] bit NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.Device] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 10:04:54.696 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:04:54.702 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:04:54.708 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:04:54.714 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:04:54.719 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:04:54.730 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:04:54.819 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:04:54.828 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:04:54.835 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:04:54.838 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:04:54.847 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:04:54.860 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:04:55.154 +08:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 10:04:55.251 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 10:04:55.312 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 10:04:55.321 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 10:04:55.324 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 10:04:55.544 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 10:04:55.549 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 10:04:55.623 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 10:04:55.623 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_6o6oyyg93snebdu6bdq7kisp8d"
2025-08-07 10:04:55.623 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 10:04:55.623 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 10:04:55.625 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 10:04:55.723 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 10:04:55.730 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 10:04:55.958 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 10:04:55.960 +08:00 [INF] Hosting environment: Development
2025-08-07 10:04:55.961 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 10:04:56.288 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 10:04:56.553 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 283.4701ms
2025-08-07 10:04:56.561 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 10:04:56.567 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 5.6063ms
2025-08-07 10:04:56.703 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 10:04:56.745 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.1734ms
2025-08-07 10:04:56.801 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 10:04:56.839 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 38.6862ms
2025-08-07 10:05:17.269 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 179
2025-08-07 10:05:17.301 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:05:17.327 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 10:05:17.465 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:05:36.145 +08:00 [INF] Executed DbCommand (70ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 10:05:36.173 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 10:05:37.581 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 10:05:42.038 +08:00 [ERR] Failed executing DbCommand (87ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:05:42.082 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Wcs.Infrastructure.Database.WCSDBContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'Wcs.ExecuteNodePath' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:cdc3a8bc-2474-4cef-9613-4f5b4695f262
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'Wcs.ExecuteNodePath' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:cdc3a8bc-2474-4cef-9613-4f5b4695f262
Error Number:208,State:1,Class:16
2025-08-07 10:06:14.934 +08:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:06:15.005 +08:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:06:15.012 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:06:15.017 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:06:15.029 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:06:15.044 +08:00 [INF] Applying migration '20250807020141_InitialCreate'.
2025-08-07 10:06:15.147 +08:00 [ERR] Failed executing DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.Device] (
    [Id] uniqueidentifier NOT NULL,
    [DeviceType] int NOT NULL,
    [DeviceName] nvarchar(450) NOT NULL,
    [Description] nvarchar(100) NULL,
    [Config] nvarchar(512) NOT NULL,
    [Enable] bit NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.Device] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 10:06:15.242 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:06:15.249 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:06:15.257 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:06:15.266 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:06:15.271 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:06:15.280 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:06:15.361 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:06:15.365 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:06:15.368 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:06:15.372 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:06:15.376 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:06:15.384 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:06:15.674 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 10:06:15.768 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 10:06:15.849 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 10:06:15.858 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 10:06:15.864 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 10:06:16.123 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 10:06:16.129 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 10:06:16.213 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_ibbyyyg93sneb4axbdq7kiz78k"
2025-08-07 10:06:16.213 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 10:06:16.213 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 10:06:16.213 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 10:06:16.217 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 10:06:16.321 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 10:06:16.329 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 10:06:16.565 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 10:06:16.566 +08:00 [INF] Hosting environment: Development
2025-08-07 10:06:16.572 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 10:06:16.735 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 10:06:16.964 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 244.5691ms
2025-08-07 10:06:17.142 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 10:06:17.142 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 10:06:17.155 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 12.7836ms
2025-08-07 10:06:17.193 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.6495ms
2025-08-07 10:06:17.259 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 10:06:17.282 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 22.5873ms
2025-08-07 10:06:35.824 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 173
2025-08-07 10:06:35.838 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:06:35.857 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 10:06:35.918 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2025-08-07 10:06:35.923 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-07 10:06:35.926 +08:00 [INF] HTTP POST /executenode/add-or-update responded 401 in 64.5729 ms
2025-08-07 10:06:35.994 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 401 0 null 169.858ms
2025-08-07 10:06:42.023 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 173
2025-08-07 10:06:42.031 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:06:42.140 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:06:54.528 +08:00 [INF] Executed DbCommand (26ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 10:06:54.560 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 10:06:55.234 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 10:06:55.910 +08:00 [ERR] Failed executing DbCommand (84ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:06:55.968 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Wcs.Infrastructure.Database.WCSDBContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'Wcs.ExecuteNodePath' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:33022b1e-2ddb-40db-8724-f0db808f92f5
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'Wcs.ExecuteNodePath' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:33022b1e-2ddb-40db-8724-f0db808f92f5
Error Number:208,State:1,Class:16
2025-08-07 10:07:02.034 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:07:02.077 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'Wcs.ExecuteNodePath' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method154(Closure, QueryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at Wcs.Infrastructure.DB.ExecuteNodePath.ExecuteNodeRepository.Get(Guid id) in D:\Program\仓库\Warehource.Modules\Wcs.Infrastructure\DB\ExecuteNodePath\ExecuteNodeRepository.cs:line 17
   at Wcs.Application.DBHandler.ExecueNode.AddOrUpdate.AddOrUpdateExecuteNodeHandler.Handle(AddOrUpdateExecuteNodeEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\ExecueNode\AddOrUpdate\AddOrUpdateExecuteNodeHandler.cs:line 25
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:33022b1e-2ddb-40db-8724-f0db808f92f5
Error Number:208,State:1,Class:16
2025-08-07 10:07:04.197 +08:00 [ERR] An exception was thrown attempting to execute the error handler.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Common.Infrastructure.Middleware.GlobalExceptionHandler.TryHandleAsync(HttpContext httpContext, Exception exception, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalExceptionHandler.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
2025-08-07 10:07:04.254 +08:00 [ERR] HTTP POST /executenode/add-or-update responded 500 in 22216.5525 ms
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'Wcs.ExecuteNodePath' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method154(Closure, QueryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at Wcs.Infrastructure.DB.ExecuteNodePath.ExecuteNodeRepository.Get(Guid id) in D:\Program\仓库\Warehource.Modules\Wcs.Infrastructure\DB\ExecuteNodePath\ExecuteNodeRepository.cs:line 17
   at Wcs.Application.DBHandler.ExecueNode.AddOrUpdate.AddOrUpdateExecuteNodeHandler.Handle(AddOrUpdateExecuteNodeEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\ExecueNode\AddOrUpdate\AddOrUpdateExecuteNodeHandler.cs:line 25
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:33022b1e-2ddb-40db-8724-f0db808f92f5
Error Number:208,State:1,Class:16
2025-08-07 10:07:04.399 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'Wcs.ExecuteNodePath' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method154(Closure, QueryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at Wcs.Infrastructure.DB.ExecuteNodePath.ExecuteNodeRepository.Get(Guid id) in D:\Program\仓库\Warehource.Modules\Wcs.Infrastructure\DB\ExecuteNodePath\ExecuteNodeRepository.cs:line 17
   at Wcs.Application.DBHandler.ExecueNode.AddOrUpdate.AddOrUpdateExecuteNodeHandler.Handle(AddOrUpdateExecuteNodeEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\ExecueNode\AddOrUpdate\AddOrUpdateExecuteNodeHandler.cs:line 25
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Common.Infrastructure.Middleware.GlobalEncodingRequestMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalEncodingRequestMiddleware.cs:line 35
   at Common.Infrastructure.Middleware.GlobalLogMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalLogMiddleware.cs:line 48
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:33022b1e-2ddb-40db-8724-f0db808f92f5
Error Number:208,State:1,Class:16
2025-08-07 10:07:04.762 +08:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.Text.Json.PooledByteBufferWriter.FlushAsync(CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Http.HttpResponseJsonExtensions.<WriteAsJsonAsync>g__WriteAsJsonAsyncSlow|6_0(HttpResponse response, Object value, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.ProblemDetailsService.TryWriteAsync(ProblemDetailsContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.DisplayExceptionContent(ErrorContext errorContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 10:07:04.829 +08:00 [ERR] Connection id "0HNELARV2GNCE", Request id "0HNELARV2GNCE:00000004": An unhandled exception was thrown by the application.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'Wcs.ExecuteNodePath' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method154(Closure, QueryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at Wcs.Infrastructure.DB.ExecuteNodePath.ExecuteNodeRepository.Get(Guid id) in D:\Program\仓库\Warehource.Modules\Wcs.Infrastructure\DB\ExecuteNodePath\ExecuteNodeRepository.cs:line 17
   at Wcs.Application.DBHandler.ExecueNode.AddOrUpdate.AddOrUpdateExecuteNodeHandler.Handle(AddOrUpdateExecuteNodeEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\ExecueNode\AddOrUpdate\AddOrUpdateExecuteNodeHandler.cs:line 25
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Common.Infrastructure.Middleware.GlobalEncodingRequestMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalEncodingRequestMiddleware.cs:line 35
   at Common.Infrastructure.Middleware.GlobalLogMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalLogMiddleware.cs:line 48
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
ClientConnectionId:33022b1e-2ddb-40db-8724-f0db808f92f5
Error Number:208,State:1,Class:16
2025-08-07 10:07:04.929 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 500 0 null 22905.9041ms
2025-08-07 10:07:05.376 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 10:07:05.395 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 18.6578ms
2025-08-07 10:07:05.423 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 10:07:05.423 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 10:07:05.438 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 14.744ms
2025-08-07 10:07:05.458 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.6645ms
2025-08-07 10:07:05.609 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 10:07:05.685 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 75.9272ms
2025-08-07 10:07:27.205 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 173
2025-08-07 10:07:27.230 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:07:27.239 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2025-08-07 10:07:27.250 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-07 10:07:27.257 +08:00 [INF] HTTP POST /executenode/add-or-update responded 401 in 20.9014 ms
2025-08-07 10:07:27.300 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 401 0 null 95.1997ms
2025-08-07 10:07:35.039 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 173
2025-08-07 10:07:35.045 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:07:35.048 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:07:43.495 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 10:07:43.501 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 10:07:44.247 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 10:07:46.200 +08:00 [ERR] Failed executing DbCommand (95ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:07:46.245 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Wcs.Infrastructure.Database.WCSDBContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'Wcs.ExecuteNodePath' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:33022b1e-2ddb-40db-8724-f0db808f92f5
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'Wcs.ExecuteNodePath' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:33022b1e-2ddb-40db-8724-f0db808f92f5
Error Number:208,State:1,Class:16
2025-08-07 10:07:52.437 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:07:52.485 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'Wcs.ExecuteNodePath' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method154(Closure, QueryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at Wcs.Infrastructure.DB.ExecuteNodePath.ExecuteNodeRepository.Get(Guid id) in D:\Program\仓库\Warehource.Modules\Wcs.Infrastructure\DB\ExecuteNodePath\ExecuteNodeRepository.cs:line 17
   at Wcs.Application.DBHandler.ExecueNode.AddOrUpdate.AddOrUpdateExecuteNodeHandler.Handle(AddOrUpdateExecuteNodeEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\ExecueNode\AddOrUpdate\AddOrUpdateExecuteNodeHandler.cs:line 25
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:33022b1e-2ddb-40db-8724-f0db808f92f5
Error Number:208,State:1,Class:16
2025-08-07 10:08:10.973 +08:00 [ERR] An exception was thrown attempting to execute the error handler.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Common.Infrastructure.Middleware.GlobalExceptionHandler.TryHandleAsync(HttpContext httpContext, Exception exception, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalExceptionHandler.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
2025-08-07 10:08:11.052 +08:00 [ERR] HTTP POST /executenode/add-or-update responded 500 in 36004.7910 ms
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'Wcs.ExecuteNodePath' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method154(Closure, QueryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at Wcs.Infrastructure.DB.ExecuteNodePath.ExecuteNodeRepository.Get(Guid id) in D:\Program\仓库\Warehource.Modules\Wcs.Infrastructure\DB\ExecuteNodePath\ExecuteNodeRepository.cs:line 17
   at Wcs.Application.DBHandler.ExecueNode.AddOrUpdate.AddOrUpdateExecuteNodeHandler.Handle(AddOrUpdateExecuteNodeEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\ExecueNode\AddOrUpdate\AddOrUpdateExecuteNodeHandler.cs:line 25
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
ClientConnectionId:33022b1e-2ddb-40db-8724-f0db808f92f5
Error Number:208,State:1,Class:16
2025-08-07 10:08:11.201 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'Wcs.ExecuteNodePath' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method154(Closure, QueryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at Wcs.Infrastructure.DB.ExecuteNodePath.ExecuteNodeRepository.Get(Guid id) in D:\Program\仓库\Warehource.Modules\Wcs.Infrastructure\DB\ExecuteNodePath\ExecuteNodeRepository.cs:line 17
   at Wcs.Application.DBHandler.ExecueNode.AddOrUpdate.AddOrUpdateExecuteNodeHandler.Handle(AddOrUpdateExecuteNodeEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\ExecueNode\AddOrUpdate\AddOrUpdateExecuteNodeHandler.cs:line 25
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Common.Infrastructure.Middleware.GlobalEncodingRequestMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalEncodingRequestMiddleware.cs:line 35
   at Common.Infrastructure.Middleware.GlobalLogMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalLogMiddleware.cs:line 48
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
ClientConnectionId:33022b1e-2ddb-40db-8724-f0db808f92f5
Error Number:208,State:1,Class:16
2025-08-07 10:08:11.379 +08:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.Text.Json.PooledByteBufferWriter.FlushAsync(CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Http.HttpResponseJsonExtensions.<WriteAsJsonAsync>g__WriteAsJsonAsyncSlow|6_0(HttpResponse response, Object value, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.ProblemDetailsService.TryWriteAsync(ProblemDetailsContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.DisplayExceptionContent(ErrorContext errorContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 10:08:11.445 +08:00 [ERR] Connection id "0HNELARV2GNCE", Request id "0HNELARV2GNCE:00000009": An unhandled exception was thrown by the application.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'Wcs.ExecuteNodePath' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method154(Closure, QueryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at Wcs.Infrastructure.DB.ExecuteNodePath.ExecuteNodeRepository.Get(Guid id) in D:\Program\仓库\Warehource.Modules\Wcs.Infrastructure\DB\ExecuteNodePath\ExecuteNodeRepository.cs:line 17
   at Wcs.Application.DBHandler.ExecueNode.AddOrUpdate.AddOrUpdateExecuteNodeHandler.Handle(AddOrUpdateExecuteNodeEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\ExecueNode\AddOrUpdate\AddOrUpdateExecuteNodeHandler.cs:line 25
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Common.Infrastructure.Middleware.GlobalEncodingRequestMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalEncodingRequestMiddleware.cs:line 35
   at Common.Infrastructure.Middleware.GlobalLogMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalLogMiddleware.cs:line 48
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
ClientConnectionId:33022b1e-2ddb-40db-8724-f0db808f92f5
Error Number:208,State:1,Class:16
2025-08-07 10:08:11.550 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 500 0 null 36510.3016ms
2025-08-07 10:08:13.358 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 173
2025-08-07 10:08:13.362 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:08:13.365 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:08:16.810 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 10:08:16.818 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 10:08:17.275 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 10:08:53.588 +08:00 [ERR] Failed executing DbCommand (89ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:08:53.617 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'Wcs.Infrastructure.Database.WCSDBContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'Wcs.ExecuteNodePath' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:33022b1e-2ddb-40db-8724-f0db808f92f5
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'Wcs.ExecuteNodePath' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:33022b1e-2ddb-40db-8724-f0db808f92f5
Error Number:208,State:1,Class:16
2025-08-07 10:08:55.242 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:08:55.301 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'Wcs.ExecuteNodePath' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method154(Closure, QueryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at Wcs.Infrastructure.DB.ExecuteNodePath.ExecuteNodeRepository.Get(Guid id) in D:\Program\仓库\Warehource.Modules\Wcs.Infrastructure\DB\ExecuteNodePath\ExecuteNodeRepository.cs:line 17
   at Wcs.Application.DBHandler.ExecueNode.AddOrUpdate.AddOrUpdateExecuteNodeHandler.Handle(AddOrUpdateExecuteNodeEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\ExecueNode\AddOrUpdate\AddOrUpdateExecuteNodeHandler.cs:line 25
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:33022b1e-2ddb-40db-8724-f0db808f92f5
Error Number:208,State:1,Class:16
2025-08-07 10:12:32.903 +08:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:12:33.019 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:12:33.025 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:12:33.028 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:12:33.048 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:12:33.086 +08:00 [INF] Applying migration '20250807020141_InitialCreate'.
2025-08-07 10:12:33.198 +08:00 [ERR] Failed executing DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.Device] (
    [Id] uniqueidentifier NOT NULL,
    [DeviceType] int NOT NULL,
    [DeviceName] nvarchar(450) NOT NULL,
    [Description] nvarchar(100) NULL,
    [Config] nvarchar(512) NOT NULL,
    [Enable] bit NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.Device] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 10:12:33.295 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:12:33.300 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:12:33.303 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:12:33.306 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:12:33.312 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:12:33.328 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:12:33.435 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:12:33.443 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:12:33.449 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:12:33.454 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:12:33.464 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:12:33.478 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:12:33.776 +08:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 10:12:33.901 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 10:12:33.970 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 10:12:33.991 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 10:12:33.998 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 10:12:34.205 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 10:12:34.213 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 10:12:34.280 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 10:12:34.280 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 10:12:34.280 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_e1dyyyg93sneyz4ybdq7ki69ng"
2025-08-07 10:12:34.280 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 10:12:34.292 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 10:12:34.402 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 10:12:34.409 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 10:12:34.706 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 10:12:34.708 +08:00 [INF] Hosting environment: Development
2025-08-07 10:12:34.711 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 10:12:34.709 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 10:12:34.957 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 258.9407ms
2025-08-07 10:12:35.120 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 10:12:35.120 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 10:12:35.136 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 15.5368ms
2025-08-07 10:12:35.162 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.4981ms
2025-08-07 10:12:35.206 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 10:12:35.247 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 41.7857ms
2025-08-07 10:14:49.759 +08:00 [INF] Executed DbCommand (347ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [Wcs.Source];
2025-08-07 10:14:49.876 +08:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [Wcs.Source] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-08-07 10:14:49.901 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:14:49.963 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK_Wcs.__EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-08-07 10:14:49.969 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:14:49.983 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:14:49.991 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:14:50.007 +08:00 [INF] Applying migration '20250807020141_InitialCreate'.
2025-08-07 10:14:50.064 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.Device] (
    [Id] uniqueidentifier NOT NULL,
    [DeviceType] int NOT NULL,
    [DeviceName] nvarchar(450) NOT NULL,
    [Description] nvarchar(100) NULL,
    [Config] nvarchar(512) NOT NULL,
    [Enable] bit NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.Device] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 10:14:50.071 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.JobConfig] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(50) NULL,
    [JobType] nvarchar(50) NOT NULL,
    [TimeOut] int NOT NULL,
    [Timer] int NOT NULL,
    [IsStart] bit NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.JobConfig] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 10:14:50.080 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.Region] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(20) NOT NULL,
    [Description] nvarchar(50) NULL,
    [CurrentNum] int NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.Region] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 10:14:50.088 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.TaskExecuteStep] (
    [Id] uniqueidentifier NOT NULL,
    [IsSend] bit NOT NULL,
    [Description] nvarchar(50) NULL,
    [PathNodeGroup] nvarchar(50) NULL,
    [ExecuteNodePath] uniqueidentifier NULL,
    [Version] rowversion NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.TaskExecuteStep] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 10:14:50.102 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.ExecuteNodePath] (
    [Id] uniqueidentifier NOT NULL,
    [PahtNodeGroup] nvarchar(max) NOT NULL,
    [CurrentDeviceType] int NOT NULL,
    [TaskType] int NOT NULL,
    [CurrentDeviceName] nvarchar(20) NULL,
    [NextDeviceName] nvarchar(max) NULL,
    [RegionId] uniqueidentifier NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.ExecuteNodePath] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Wcs.ExecuteNodePath_Wcs.Region_RegionId] FOREIGN KEY ([RegionId]) REFERENCES [Wcs.Region] ([Id])
);
2025-08-07 10:14:50.113 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.WcsTask] (
    [Id] uniqueidentifier NOT NULL,
    [TaskCode] nvarchar(50) NULL,
    [SerialNumber] int NOT NULL IDENTITY(4000, 1),
    [Container] nvarchar(50) NOT NULL,
    [TaskType] int NOT NULL,
    [TaskStatus] int NOT NULL,
    [CreatorSystemType] int NOT NULL,
    [Description] nvarchar(max) NULL,
    [GetLocation_GetTunnel] nvarchar(10) NULL,
    [GetLocation_GetFloor] nvarchar(10) NULL,
    [GetLocation_GetRow] nvarchar(10) NULL,
    [GetLocation_GetColumn] nvarchar(10) NULL,
    [GetLocation_GetDepth] nvarchar(10) NULL,
    [PutLocation_PutTunnel] nvarchar(10) NULL,
    [PutLocation_PutFloor] nvarchar(10) NULL,
    [PutLocation_PutRow] nvarchar(10) NULL,
    [PutLocation_PutColumn] nvarchar(10) NULL,
    [PutLocation_PutDepth] nvarchar(10) NULL,
    [RegionId] uniqueidentifier NULL,
    [TaskExecuteStepId] uniqueidentifier NOT NULL,
    [Version] rowversion NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.WcsTask] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Wcs.WcsTask_Wcs.TaskExecuteStep_TaskExecuteStepId] FOREIGN KEY ([TaskExecuteStepId]) REFERENCES [Wcs.TaskExecuteStep] ([Id]) ON DELETE CASCADE
);
2025-08-07 10:14:50.135 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.Device_DeviceName] ON [Wcs.Device] ([DeviceName]);
2025-08-07 10:14:50.144 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.ExecuteNodePath_RegionId] ON [Wcs.ExecuteNodePath] ([RegionId]) WHERE [RegionId] IS NOT NULL;
2025-08-07 10:14:50.153 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.JobConfig_Name] ON [Wcs.JobConfig] ([Name]);
2025-08-07 10:14:50.165 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.Region_Code] ON [Wcs.Region] ([Code]);
2025-08-07 10:14:50.174 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.WcsTask_SerialNumber] ON [Wcs.WcsTask] ([SerialNumber]);
2025-08-07 10:14:50.179 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.WcsTask_TaskCode] ON [Wcs.WcsTask] ([TaskCode]) WHERE [TaskCode] IS NOT NULL;
2025-08-07 10:14:50.186 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.WcsTask_TaskExecuteStepId] ON [Wcs.WcsTask] ([TaskExecuteStepId]);
2025-08-07 10:14:50.193 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [Wcs.__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250807020141_InitialCreate', N'8.0.0');
2025-08-07 10:14:50.247 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:14:50.253 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:14:50.256 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:14:50.264 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Identity.__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK_Identity.__EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-08-07 10:14:50.272 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:14:50.276 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:14:50.280 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:14:50.287 +08:00 [INF] Applying migration '20250801013315_InitialCreate'.
2025-08-07 10:14:50.300 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Identity.Role] (
    [Id] uniqueidentifier NOT NULL,
    [RoleName] nvarchar(50) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Identity.Role] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 10:14:50.315 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Identity.User] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [Phone] nvarchar(max) NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(20) NOT NULL,
    [LockoutEnd] datetimeoffset NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Identity.User] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Identity.User_Identity.Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Identity.Role] ([Id]) ON DELETE CASCADE
);
2025-08-07 10:14:50.327 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE NONCLUSTERED INDEX [IX_Identity.Role_RoleName] ON [Identity.Role] ([RoleName]);
2025-08-07 10:14:50.333 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Identity.User_RoleId] ON [Identity.User] ([RoleId]);
2025-08-07 10:14:50.340 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE NONCLUSTERED INDEX [IX_Identity.User_Username] ON [Identity.User] ([Username]);
2025-08-07 10:14:50.346 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [Identity.__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250801013315_InitialCreate', N'8.0.0');
2025-08-07 10:14:50.438 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:14:50.443 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:14:50.446 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:14:50.454 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Plc.__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK_Plc.__EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-08-07 10:14:50.464 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:14:50.468 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:14:50.478 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:14:50.499 +08:00 [INF] Applying migration '20250804021810_InitialCreate'.
2025-08-07 10:14:50.518 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Plc.S7NetConfig] (
    [Id] uniqueidentifier NOT NULL,
    [S7Type] int NOT NULL,
    [Solt] smallint NOT NULL,
    [Rack] smallint NOT NULL,
    [ReadTimeOut] int NOT NULL,
    [WriteTimeOut] int NOT NULL,
    [IsUse] bit NOT NULL,
    [ReadHeart] nvarchar(20) NULL,
    [WriteHeart] nvarchar(20) NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    [Ip] nvarchar(max) NOT NULL,
    [Port] int NOT NULL,
    CONSTRAINT [PK_Plc.S7NetConfig] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 10:14:50.532 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Plc.S7EntityItem] (
    [Id] uniqueidentifier NOT NULL,
    [Ip] nvarchar(20) NOT NULL,
    [S7DataType] int NOT NULL,
    [DBAddress] int NOT NULL,
    [DataOffset] int NOT NULL,
    [BitOffset] tinyint NULL,
    [S7BlockType] int NOT NULL,
    [Index] int NOT NULL,
    [Description] nvarchar(50) NULL,
    [Name] nvarchar(20) NOT NULL,
    [ArrtypeLength] tinyint NULL,
    [DeviceName] nvarchar(max) NOT NULL,
    [IsUse] bit NOT NULL,
    [NetGuid] uniqueidentifier NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Plc.S7EntityItem] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Plc.S7EntityItem_Plc.S7NetConfig_NetGuid] FOREIGN KEY ([NetGuid]) REFERENCES [Plc.S7NetConfig] ([Id]) ON DELETE CASCADE
);
2025-08-07 10:14:50.546 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Plc.S7EntityItem_NetGuid] ON [Plc.S7EntityItem] ([NetGuid]);
2025-08-07 10:14:50.551 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [Plc.__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250804021810_InitialCreate', N'8.0.0');
2025-08-07 10:14:50.839 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 10:14:50.931 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 10:14:51.005 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 10:14:51.013 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 10:14:51.019 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 10:14:51.223 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 10:14:51.228 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 10:14:51.300 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 10:14:51.300 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 10:14:51.300 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_do5yyyg93snebf7fbdq7ksbo81"
2025-08-07 10:14:51.300 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 10:14:51.304 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 10:14:51.404 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 10:14:51.411 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 10:14:51.639 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 10:14:51.755 +08:00 [INF] Hosting environment: Development
2025-08-07 10:14:51.759 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 10:14:51.903 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 10:14:52.120 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 226.0316ms
2025-08-07 10:14:52.290 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 10:14:52.290 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 10:14:52.303 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 12.9345ms
2025-08-07 10:14:52.341 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.6339ms
2025-08-07 10:14:52.387 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 10:14:52.429 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 42.1489ms
2025-08-07 10:19:00.344 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 163
2025-08-07 10:19:00.378 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:19:00.441 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 10:19:00.574 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2025-08-07 10:19:00.604 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-07 10:19:00.626 +08:00 [INF] HTTP POST /decive/add-or-update responded 401 in 178.7890 ms
2025-08-07 10:19:00.749 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 401 0 null 405.0342ms
2025-08-07 10:19:08.157 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 163
2025-08-07 10:19:08.182 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:19:08.281 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:19:08.819 +08:00 [INF] Executed DbCommand (41ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:19:09.090 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 10:19:09.158 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:19:09.164 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 977.3409 ms
2025-08-07 10:19:09.387 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 1230.7719ms
2025-08-07 10:19:19.781 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 163
2025-08-07 10:19:19.811 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:19:19.830 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:19:19.908 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:19:19.919 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 10:19:19.934 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:19:19.940 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 117.7937 ms
2025-08-07 10:19:20.025 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 244.0174ms
2025-08-07 10:19:26.850 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 163
2025-08-07 10:19:26.855 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:19:26.865 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:19:26.895 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:19:26.903 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 10:19:26.907 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:19:26.909 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 45.3717 ms
2025-08-07 10:19:26.998 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 148.3869ms
2025-08-07 10:20:48.632 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 194
2025-08-07 10:20:48.649 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:20:48.654 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:20:48.674 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:20:48.693 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 10:20:48.731 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:20:48.737 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 83.4437 ms
2025-08-07 10:20:48.866 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 235.3834ms
2025-08-07 10:21:03.119 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 194
2025-08-07 10:21:03.126 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:21:03.138 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:21:03.151 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:21:03.190 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 10:21:03.216 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:21:03.236 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 98.5477 ms
2025-08-07 10:21:03.349 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 230.0148ms
2025-08-07 10:21:10.204 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 194
2025-08-07 10:21:10.217 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:21:10.225 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:21:10.236 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:21:10.261 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 10:21:10.278 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:21:10.280 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 55.9202 ms
2025-08-07 10:21:10.379 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 174.8055ms
2025-08-07 10:22:25.561 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 228
2025-08-07 10:22:25.594 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:22:25.597 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:22:25.603 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:22:25.612 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 10:22:25.618 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:22:25.620 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 23.3091 ms
2025-08-07 10:22:25.706 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 145.7611ms
2025-08-07 10:22:34.461 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 228
2025-08-07 10:22:34.485 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:22:34.493 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:22:34.504 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:22:34.541 +08:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 10:22:34.583 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:22:34.584 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 91.7333 ms
2025-08-07 10:22:34.680 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 218.9538ms
2025-08-07 10:22:52.775 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 229
2025-08-07 10:22:52.781 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:22:52.787 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:22:52.797 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:22:52.821 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 10:22:52.846 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:22:52.851 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 64.6757 ms
2025-08-07 10:22:52.965 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 190.1932ms
2025-08-07 10:22:58.593 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 229
2025-08-07 10:22:58.604 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:22:58.610 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:22:58.619 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:22:58.641 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 10:22:58.664 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:22:58.667 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 57.8258 ms
2025-08-07 10:22:58.763 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 170.5631ms
2025-08-07 10:23:43.764 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 173
2025-08-07 10:23:43.796 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:23:43.804 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:23:43.820 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:23:43.837 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 10:23:43.851 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:23:43.856 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 52.5176 ms
2025-08-07 10:23:43.972 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 208.9283ms
2025-08-07 10:23:49.406 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/decive/add-or-update - application/json 173
2025-08-07 10:23:49.432 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:23:49.439 +08:00 [INF] Executing endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:23:49.452 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:23:49.479 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 512), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 450), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Device] ([Id], [Config], [CreationTime], [Description], [DeviceName], [DeviceType], [Enable], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-08-07 10:23:49.497 +08:00 [INF] Executed endpoint 'HTTP: POST decive/add-or-update'
2025-08-07 10:23:49.502 +08:00 [INF] HTTP POST /decive/add-or-update responded 200 in 62.7342 ms
2025-08-07 10:23:49.626 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/decive/add-or-update - 200 null application/json; charset=utf-8 221.1787ms
2025-08-07 10:27:05.847 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/region/add-region - application/json 93
2025-08-07 10:27:05.872 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:27:05.880 +08:00 [INF] Executing endpoint 'HTTP: POST region/add-region'
2025-08-07 10:27:06.315 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Size = 50), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Region] ([Id], [Code], [CreationTime], [CurrentNum], [Description], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-08-07 10:27:06.348 +08:00 [INF] Executed endpoint 'HTTP: POST region/add-region'
2025-08-07 10:27:06.349 +08:00 [INF] HTTP POST /region/add-region responded 200 in 469.8006 ms
2025-08-07 10:27:06.415 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/region/add-region - 200 null application/json; charset=utf-8 568.4552ms
2025-08-07 10:27:13.457 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/region/add-region - application/json 93
2025-08-07 10:27:13.467 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:27:13.475 +08:00 [INF] Executing endpoint 'HTTP: POST region/add-region'
2025-08-07 10:27:13.494 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 20), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Int32), @p4='?' (Size = 50), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.Region] ([Id], [Code], [CreationTime], [CurrentNum], [Description], [IsDeleted], [LastModificationTime], [LastModifierUser])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-08-07 10:27:13.550 +08:00 [INF] Executed endpoint 'HTTP: POST region/add-region'
2025-08-07 10:27:13.572 +08:00 [INF] HTTP POST /region/add-region responded 200 in 97.1171 ms
2025-08-07 10:27:13.670 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/region/add-region - 200 null application/json; charset=utf-8 213.194ms
2025-08-07 10:29:28.131 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:29:28.185 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:29:28.191 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:29:28.195 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:29:28.208 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:29:28.221 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:29:28.250 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:29:28.256 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:29:28.266 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:29:28.271 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:29:28.276 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:29:28.279 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:29:28.368 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:29:28.376 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:29:28.380 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:29:28.386 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:29:28.394 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:29:28.405 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:29:28.705 +08:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 10:29:28.822 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 10:29:28.897 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 10:29:28.902 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 10:29:28.906 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 10:29:29.101 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 10:29:29.105 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 10:29:29.167 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 10:29:29.167 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 10:29:29.167 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 10:29:29.167 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_ctdoyyg93sneyr4ubdq7ksthbw"
2025-08-07 10:29:29.172 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 10:29:29.284 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 10:29:29.297 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 10:29:29.570 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 10:29:29.626 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 10:29:29.630 +08:00 [INF] Hosting environment: Development
2025-08-07 10:29:29.634 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 10:29:29.842 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 283.4552ms
2025-08-07 10:29:29.860 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 10:29:29.867 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 7.2834ms
2025-08-07 10:29:29.997 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 10:29:30.040 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.2654ms
2025-08-07 10:29:30.097 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 10:29:30.128 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.3335ms
2025-08-07 10:31:58.347 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:31:58.401 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:31:58.409 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:31:58.413 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:31:58.426 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:31:58.440 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:31:58.471 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:31:58.478 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:31:58.488 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:31:58.496 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:31:58.506 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:31:58.512 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:31:58.610 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:31:58.616 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:31:58.623 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:31:58.637 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:31:58.650 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:31:58.666 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:31:59.005 +08:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 10:31:59.119 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 10:31:59.201 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 10:31:59.211 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 10:31:59.220 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 10:31:59.464 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 10:31:59.470 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 10:31:59.542 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 10:31:59.542 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 10:31:59.542 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 10:31:59.542 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_fthoyyg93snebhaobdq7kswigq"
2025-08-07 10:31:59.548 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 10:31:59.679 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 10:31:59.686 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 10:31:59.935 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 10:31:59.937 +08:00 [INF] Hosting environment: Development
2025-08-07 10:31:59.938 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 10:32:00.348 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 10:32:00.675 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 336.2427ms
2025-08-07 10:32:00.686 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 10:32:00.820 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 133.362ms
2025-08-07 10:32:00.833 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 10:32:00.920 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 86.2534ms
2025-08-07 10:32:00.952 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 10:32:00.990 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 38.1289ms
2025-08-07 10:32:57.074 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 214
2025-08-07 10:32:57.098 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:32:57.132 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 10:32:57.280 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2025-08-07 10:32:57.290 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-07 10:32:57.294 +08:00 [INF] HTTP POST /executenode/add-or-update responded 401 in 156.6018 ms
2025-08-07 10:32:57.397 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 401 0 null 322.6638ms
2025-08-07 10:33:04.467 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 214
2025-08-07 10:33:04.492 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:33:04.613 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:33:07.982 +08:00 [INF] Executed DbCommand (36ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 10:33:08.058 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 10:33:08.896 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 10:33:09.425 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:33:23.587 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:33:23.636 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'user')
   at Common.Domain.EF.IEntity.SetLastModification(String user) in D:\Program\仓库\Warehource.Modules\Common.Domain\EF\IEntity.cs:line 22
   at Common.Infrastructure.EF.LastModificationInterceptor.<>c__DisplayClass2_0.<SavingChangesAsync>b__1(EntityEntry`1 entry) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\LastModificationInterceptor.cs:line 26
   at System.Collections.Generic.List`1.ForEach(Action`1 action)
   at Common.Infrastructure.EF.LastModificationInterceptor.SavingChangesAsync(DbContextEventData eventData, InterceptionResult`1 result, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\LastModificationInterceptor.cs:line 24
   at Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.SaveChangesStartingAsync(IDiagnosticsLogger`1 diagnostics, DbContext context, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Infrastructure.EF.BaseDbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\BaseDbContext.cs:line 26
   at Wcs.Application.DBHandler.ExecueNode.AddOrUpdate.AddOrUpdateExecuteNodeHandler.Handle(AddOrUpdateExecuteNodeEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\ExecueNode\AddOrUpdate\AddOrUpdateExecuteNodeHandler.cs:line 45
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 10:33:38.386 +08:00 [ERR] An exception was thrown attempting to execute the error handler.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Common.Infrastructure.Middleware.GlobalExceptionHandler.TryHandleAsync(HttpContext httpContext, Exception exception, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalExceptionHandler.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
2025-08-07 10:33:38.432 +08:00 [ERR] HTTP POST /executenode/add-or-update responded 500 in 33935.1422 ms
System.ArgumentNullException: Value cannot be null. (Parameter 'user')
   at Common.Domain.EF.IEntity.SetLastModification(String user) in D:\Program\仓库\Warehource.Modules\Common.Domain\EF\IEntity.cs:line 22
   at Common.Infrastructure.EF.LastModificationInterceptor.<>c__DisplayClass2_0.<SavingChangesAsync>b__1(EntityEntry`1 entry) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\LastModificationInterceptor.cs:line 26
   at System.Collections.Generic.List`1.ForEach(Action`1 action)
   at Common.Infrastructure.EF.LastModificationInterceptor.SavingChangesAsync(DbContextEventData eventData, InterceptionResult`1 result, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\LastModificationInterceptor.cs:line 24
   at Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.SaveChangesStartingAsync(IDiagnosticsLogger`1 diagnostics, DbContext context, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Infrastructure.EF.BaseDbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\BaseDbContext.cs:line 26
   at Wcs.Application.DBHandler.ExecueNode.AddOrUpdate.AddOrUpdateExecuteNodeHandler.Handle(AddOrUpdateExecuteNodeEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\ExecueNode\AddOrUpdate\AddOrUpdateExecuteNodeHandler.cs:line 45
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-08-07 10:33:38.540 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'user')
   at Common.Domain.EF.IEntity.SetLastModification(String user) in D:\Program\仓库\Warehource.Modules\Common.Domain\EF\IEntity.cs:line 22
   at Common.Infrastructure.EF.LastModificationInterceptor.<>c__DisplayClass2_0.<SavingChangesAsync>b__1(EntityEntry`1 entry) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\LastModificationInterceptor.cs:line 26
   at System.Collections.Generic.List`1.ForEach(Action`1 action)
   at Common.Infrastructure.EF.LastModificationInterceptor.SavingChangesAsync(DbContextEventData eventData, InterceptionResult`1 result, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\LastModificationInterceptor.cs:line 24
   at Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.SaveChangesStartingAsync(IDiagnosticsLogger`1 diagnostics, DbContext context, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Infrastructure.EF.BaseDbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\BaseDbContext.cs:line 26
   at Wcs.Application.DBHandler.ExecueNode.AddOrUpdate.AddOrUpdateExecuteNodeHandler.Handle(AddOrUpdateExecuteNodeEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\ExecueNode\AddOrUpdate\AddOrUpdateExecuteNodeHandler.cs:line 45
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Common.Infrastructure.Middleware.GlobalEncodingRequestMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalEncodingRequestMiddleware.cs:line 35
   at Common.Infrastructure.Middleware.GlobalLogMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalLogMiddleware.cs:line 48
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 10:33:38.768 +08:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.Text.Json.PooledByteBufferWriter.FlushAsync(CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Http.HttpResponseJsonExtensions.<WriteAsJsonAsync>g__WriteAsJsonAsyncSlow|6_0(HttpResponse response, Object value, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.ProblemDetailsService.TryWriteAsync(ProblemDetailsContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.DisplayExceptionContent(ErrorContext errorContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 10:33:38.845 +08:00 [ERR] Connection id "0HNELBAB2QCT0", Request id "0HNELBAB2QCT0:00000006": An unhandled exception was thrown by the application.
System.ArgumentNullException: Value cannot be null. (Parameter 'user')
   at Common.Domain.EF.IEntity.SetLastModification(String user) in D:\Program\仓库\Warehource.Modules\Common.Domain\EF\IEntity.cs:line 22
   at Common.Infrastructure.EF.LastModificationInterceptor.<>c__DisplayClass2_0.<SavingChangesAsync>b__1(EntityEntry`1 entry) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\LastModificationInterceptor.cs:line 26
   at System.Collections.Generic.List`1.ForEach(Action`1 action)
   at Common.Infrastructure.EF.LastModificationInterceptor.SavingChangesAsync(DbContextEventData eventData, InterceptionResult`1 result, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\LastModificationInterceptor.cs:line 24
   at Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.SaveChangesStartingAsync(IDiagnosticsLogger`1 diagnostics, DbContext context, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Infrastructure.EF.BaseDbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\BaseDbContext.cs:line 26
   at Wcs.Application.DBHandler.ExecueNode.AddOrUpdate.AddOrUpdateExecuteNodeHandler.Handle(AddOrUpdateExecuteNodeEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\ExecueNode\AddOrUpdate\AddOrUpdateExecuteNodeHandler.cs:line 45
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Common.Infrastructure.Middleware.GlobalEncodingRequestMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalEncodingRequestMiddleware.cs:line 35
   at Common.Infrastructure.Middleware.GlobalLogMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalLogMiddleware.cs:line 48
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-08-07 10:33:38.874 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 500 0 null 34408.0854ms
2025-08-07 10:33:41.939 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 214
2025-08-07 10:33:41.965 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:33:41.973 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:33:56.658 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 10:33:56.673 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 10:33:56.988 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 10:34:14.004 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:34:18.815 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:34:18.817 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 36846.4913 ms
2025-08-07 10:34:18.842 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 36902.3218ms
2025-08-07 10:34:29.157 +08:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:34:29.221 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:34:29.228 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:34:29.235 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:34:29.253 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:34:29.272 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:34:29.299 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:34:29.304 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:34:29.308 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:34:29.314 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:34:29.329 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:34:29.334 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:34:29.446 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:34:29.454 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:34:29.461 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:34:29.466 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:34:29.476 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:34:29.491 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:34:29.776 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 10:34:29.872 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 10:34:29.960 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 10:34:29.967 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 10:34:29.975 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 10:34:30.238 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 10:34:30.245 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 10:34:30.345 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 10:34:30.345 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_1oioyyg93snebikebdq7kszxfo"
2025-08-07 10:34:30.345 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 10:34:30.345 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 10:34:30.348 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 10:34:30.497 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 10:34:30.506 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 10:34:30.771 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 10:34:30.775 +08:00 [INF] Hosting environment: Development
2025-08-07 10:34:30.785 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 10:34:31.185 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 10:34:31.437 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 264.1694ms
2025-08-07 10:34:31.614 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 10:34:31.614 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 10:34:31.645 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 31.05ms
2025-08-07 10:34:31.661 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 47.0413ms
2025-08-07 10:34:31.718 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 10:34:31.751 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 33.0111ms
2025-08-07 10:34:57.841 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 214
2025-08-07 10:34:57.861 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:34:57.899 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 10:34:58.096 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:35:00.994 +08:00 [INF] Executed DbCommand (19ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 10:35:01.020 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 10:35:01.087 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 10:35:01.150 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:35:01.156 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:35:01.170 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 3260.5692 ms
2025-08-07 10:35:01.281 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 3440.3065ms
2025-08-07 10:35:58.649 +08:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:35:58.726 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:35:58.735 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:35:58.742 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:35:58.757 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:35:58.776 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:35:58.809 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:35:58.814 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:35:58.817 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:35:58.822 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:35:58.827 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:35:58.832 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:35:58.922 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:35:58.927 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:35:58.929 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:35:58.936 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:35:58.943 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:35:58.953 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:35:59.246 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 10:35:59.353 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 10:35:59.411 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 10:35:59.421 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 10:35:59.426 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 10:35:59.636 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 10:35:59.656 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 10:35:59.740 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_8bdyyyg93sneydokbdq7ks3r83"
2025-08-07 10:35:59.740 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 10:35:59.740 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 10:35:59.740 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 10:35:59.754 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 10:35:59.898 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 10:35:59.908 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 10:36:00.190 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 10:36:00.195 +08:00 [INF] Hosting environment: Development
2025-08-07 10:36:00.198 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 10:36:00.254 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 10:36:00.513 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 278.5055ms
2025-08-07 10:36:00.527 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 10:36:00.536 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 9.2494ms
2025-08-07 10:36:00.665 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 10:36:00.716 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 50.4735ms
2025-08-07 10:36:00.785 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 10:36:00.812 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 27.3386ms
2025-08-07 10:36:06.766 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 214
2025-08-07 10:36:06.787 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:36:06.822 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 10:36:06.977 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:36:12.034 +08:00 [INF] Executed DbCommand (19ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 10:36:12.052 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 10:36:12.328 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 10:36:12.776 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:38:29.235 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:38:29.282 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'user')
   at Common.Domain.EF.IEntity.SetLastModification(String user) in D:\Program\仓库\Warehource.Modules\Common.Domain\EF\IEntity.cs:line 22
   at Common.Infrastructure.EF.LastModificationInterceptor.<>c__DisplayClass2_0.<SavingChangesAsync>b__1(EntityEntry`1 entry) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\LastModificationInterceptor.cs:line 26
   at System.Collections.Generic.List`1.ForEach(Action`1 action)
   at Common.Infrastructure.EF.LastModificationInterceptor.SavingChangesAsync(DbContextEventData eventData, InterceptionResult`1 result, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\LastModificationInterceptor.cs:line 24
   at Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.SaveChangesStartingAsync(IDiagnosticsLogger`1 diagnostics, DbContext context, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Infrastructure.EF.BaseDbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\BaseDbContext.cs:line 26
   at Wcs.Application.DBHandler.ExecueNode.AddOrUpdate.AddOrUpdateExecuteNodeHandler.Handle(AddOrUpdateExecuteNodeEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\ExecueNode\AddOrUpdate\AddOrUpdateExecuteNodeHandler.cs:line 41
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 10:38:33.635 +08:00 [ERR] An exception was thrown attempting to execute the error handler.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Common.Infrastructure.Middleware.GlobalExceptionHandler.TryHandleAsync(HttpContext httpContext, Exception exception, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalExceptionHandler.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
2025-08-07 10:38:33.684 +08:00 [ERR] HTTP POST /executenode/add-or-update responded 500 in 146851.2517 ms
System.ArgumentNullException: Value cannot be null. (Parameter 'user')
   at Common.Domain.EF.IEntity.SetLastModification(String user) in D:\Program\仓库\Warehource.Modules\Common.Domain\EF\IEntity.cs:line 22
   at Common.Infrastructure.EF.LastModificationInterceptor.<>c__DisplayClass2_0.<SavingChangesAsync>b__1(EntityEntry`1 entry) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\LastModificationInterceptor.cs:line 26
   at System.Collections.Generic.List`1.ForEach(Action`1 action)
   at Common.Infrastructure.EF.LastModificationInterceptor.SavingChangesAsync(DbContextEventData eventData, InterceptionResult`1 result, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\LastModificationInterceptor.cs:line 24
   at Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.SaveChangesStartingAsync(IDiagnosticsLogger`1 diagnostics, DbContext context, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Infrastructure.EF.BaseDbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\BaseDbContext.cs:line 26
   at Wcs.Application.DBHandler.ExecueNode.AddOrUpdate.AddOrUpdateExecuteNodeHandler.Handle(AddOrUpdateExecuteNodeEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\ExecueNode\AddOrUpdate\AddOrUpdateExecuteNodeHandler.cs:line 41
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-08-07 10:38:33.807 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'user')
   at Common.Domain.EF.IEntity.SetLastModification(String user) in D:\Program\仓库\Warehource.Modules\Common.Domain\EF\IEntity.cs:line 22
   at Common.Infrastructure.EF.LastModificationInterceptor.<>c__DisplayClass2_0.<SavingChangesAsync>b__1(EntityEntry`1 entry) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\LastModificationInterceptor.cs:line 26
   at System.Collections.Generic.List`1.ForEach(Action`1 action)
   at Common.Infrastructure.EF.LastModificationInterceptor.SavingChangesAsync(DbContextEventData eventData, InterceptionResult`1 result, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\LastModificationInterceptor.cs:line 24
   at Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.SaveChangesStartingAsync(IDiagnosticsLogger`1 diagnostics, DbContext context, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Infrastructure.EF.BaseDbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\BaseDbContext.cs:line 26
   at Wcs.Application.DBHandler.ExecueNode.AddOrUpdate.AddOrUpdateExecuteNodeHandler.Handle(AddOrUpdateExecuteNodeEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\ExecueNode\AddOrUpdate\AddOrUpdateExecuteNodeHandler.cs:line 41
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Common.Infrastructure.Middleware.GlobalEncodingRequestMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalEncodingRequestMiddleware.cs:line 35
   at Common.Infrastructure.Middleware.GlobalLogMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalLogMiddleware.cs:line 48
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 10:38:34.062 +08:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.Text.Json.PooledByteBufferWriter.FlushAsync(CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Http.HttpResponseJsonExtensions.<WriteAsJsonAsync>g__WriteAsJsonAsyncSlow|6_0(HttpResponse response, Object value, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.ProblemDetailsService.TryWriteAsync(ProblemDetailsContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.DisplayExceptionContent(ErrorContext errorContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 10:38:34.142 +08:00 [ERR] Connection id "0HNELBCIJMR9M", Request id "0HNELBCIJMR9M:00000005": An unhandled exception was thrown by the application.
System.ArgumentNullException: Value cannot be null. (Parameter 'user')
   at Common.Domain.EF.IEntity.SetLastModification(String user) in D:\Program\仓库\Warehource.Modules\Common.Domain\EF\IEntity.cs:line 22
   at Common.Infrastructure.EF.LastModificationInterceptor.<>c__DisplayClass2_0.<SavingChangesAsync>b__1(EntityEntry`1 entry) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\LastModificationInterceptor.cs:line 26
   at System.Collections.Generic.List`1.ForEach(Action`1 action)
   at Common.Infrastructure.EF.LastModificationInterceptor.SavingChangesAsync(DbContextEventData eventData, InterceptionResult`1 result, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\LastModificationInterceptor.cs:line 24
   at Microsoft.EntityFrameworkCore.Diagnostics.CoreLoggerExtensions.SaveChangesStartingAsync(IDiagnosticsLogger`1 diagnostics, DbContext context, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Infrastructure.EF.BaseDbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\BaseDbContext.cs:line 26
   at Wcs.Application.DBHandler.ExecueNode.AddOrUpdate.AddOrUpdateExecuteNodeHandler.Handle(AddOrUpdateExecuteNodeEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\ExecueNode\AddOrUpdate\AddOrUpdateExecuteNodeHandler.cs:line 41
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Common.Infrastructure.Middleware.GlobalEncodingRequestMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalEncodingRequestMiddleware.cs:line 35
   at Common.Infrastructure.Middleware.GlobalLogMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalLogMiddleware.cs:line 48
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-08-07 10:38:34.199 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 500 0 null 147431.4021ms
2025-08-07 10:38:50.152 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/add-adminrole - null 0
2025-08-07 10:38:50.168 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:38:50.177 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminrole'
2025-08-07 10:38:53.017 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[RoleName]
FROM [Identity.Role] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[RoleName] = @__roleName_0
2025-08-07 10:39:55.179 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:39:55.254 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:39:55.259 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:39:55.265 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:39:55.277 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:39:55.291 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:39:55.327 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:39:55.333 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:39:55.347 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:39:55.351 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:39:55.358 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:39:55.364 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:39:55.451 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:39:55.458 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:39:55.475 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:39:55.484 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:39:55.493 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:39:55.505 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:39:55.825 +08:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 10:39:55.936 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 10:39:56.039 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 10:39:56.049 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 10:39:56.056 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 10:39:56.270 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 10:39:56.275 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 10:39:56.360 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 10:39:56.360 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 10:39:56.360 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 10:39:56.360 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_jt5yyyg93snebxi7bdq7ks71yg"
2025-08-07 10:39:56.366 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 10:39:56.465 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 10:39:56.475 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 10:39:56.731 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 10:39:56.733 +08:00 [INF] Hosting environment: Development
2025-08-07 10:39:56.736 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 10:39:57.135 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 10:39:57.461 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 340.2497ms
2025-08-07 10:39:57.643 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 10:39:57.643 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 10:39:57.673 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 30.634ms
2025-08-07 10:39:57.708 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.6862ms
2025-08-07 10:39:57.786 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 10:39:57.833 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 46.1484ms
2025-08-07 10:40:18.195 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/add-adminrole - null 0
2025-08-07 10:40:18.215 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:40:18.250 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 10:40:18.349 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminrole'
2025-08-07 10:40:18.860 +08:00 [INF] Executed DbCommand (46ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[RoleName]
FROM [Identity.Role] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[RoleName] = @__roleName_0
2025-08-07 10:40:19.161 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Identity.Role] ([Id], [CreationTime], [Description], [IsDeleted], [LastModificationTime], [LastModifierUser], [RoleName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-08-07 10:40:19.206 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminrole'
2025-08-07 10:40:19.212 +08:00 [INF] HTTP POST /user/add-adminrole responded 200 in 952.2101 ms
2025-08-07 10:40:19.379 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/add-adminrole - 200 null application/json; charset=utf-8 1183.8463ms
2025-08-07 10:40:24.103 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/add-adminuser - null 0
2025-08-07 10:40:24.114 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:40:24.126 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-08-07 10:40:24.448 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[Email], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[LockoutEnd], [i].[Name], [i].[Password], [i].[Phone], [i].[RoleId], [i].[Username]
FROM [Identity.User] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[Username] = @__userName_0
2025-08-07 10:40:24.470 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[RoleName]
FROM [Identity.Role] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[RoleName] = @__roleName_0
2025-08-07 10:40:24.576 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 4000), @p9='?' (Size = 20), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Identity.User] ([Id], [CreationTime], [Description], [Email], [IsDeleted], [LastModificationTime], [LastModifierUser], [LockoutEnd], [Name], [Password], [Phone], [RoleId], [Username])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-07 10:40:24.600 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-08-07 10:40:24.602 +08:00 [INF] HTTP POST /user/add-adminuser responded 200 in 480.5186 ms
2025-08-07 10:40:24.717 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/add-adminuser - 200 null application/json; charset=utf-8 614.0098ms
2025-08-07 10:40:43.568 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/user-login - application/json 46
2025-08-07 10:40:43.583 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:40:43.625 +08:00 [INF] Executing endpoint 'HTTP: POST user/user-login'
2025-08-07 10:40:44.230 +08:00 [INF] Executed DbCommand (37ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[Email], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[LockoutEnd], [i].[Name], [i].[Password], [i].[Phone], [i].[RoleId], [i].[Username], [t].[Id], [t].[CreationTime], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser], [t].[RoleName]
FROM [Identity.User] AS [i]
INNER JOIN (
    SELECT [i0].[Id], [i0].[CreationTime], [i0].[Description], [i0].[IsDeleted], [i0].[LastModificationTime], [i0].[LastModifierUser], [i0].[RoleName]
    FROM [Identity.Role] AS [i0]
    WHERE [i0].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [i].[RoleId] = [t].[Id]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[Username] = @__userName_0
2025-08-07 10:40:44.352 +08:00 [INF] Executed endpoint 'HTTP: POST user/user-login'
2025-08-07 10:40:44.363 +08:00 [INF] HTTP POST /user/user-login responded 200 in 750.0842 ms
2025-08-07 10:40:44.529 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/user-login - 200 null application/json; charset=utf-8 960.9804ms
2025-08-07 10:41:13.284 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 214
2025-08-07 10:41:13.302 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:41:13.374 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:41:16.849 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 10:41:16.865 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 10:41:16.908 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 10:41:16.958 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:41:38.191 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.ExecuteNodePath] ([Id], [CreationTime], [CurrentDeviceName], [CurrentDeviceType], [IsDeleted], [LastModificationTime], [LastModifierUser], [NextDeviceName], [PahtNodeGroup], [RegionId], [TaskType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-07 10:41:38.205 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:41:38.214 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 24905.4106 ms
2025-08-07 10:41:38.280 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 24996.7885ms
2025-08-07 10:42:19.562 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 214
2025-08-07 10:42:19.582 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:42:19.593 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:42:22.579 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 10:42:22.739 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 10:42:22.760 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 10:42:22.776 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 10:42:23.130 +08:00 [ERR] Failed executing DbCommand (249ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.ExecuteNodePath] ([Id], [CreationTime], [CurrentDeviceName], [CurrentDeviceType], [IsDeleted], [LastModificationTime], [LastModifierUser], [NextDeviceName], [PahtNodeGroup], [RegionId], [TaskType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-07 10:42:23.393 +08:00 [ERR] An exception occurred in the database while saving changes for context type 'Wcs.Infrastructure.Database.WCSDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 不能在具有唯一索引“IX_Wcs.ExecuteNodePath_RegionId”的对象“dbo.Wcs.ExecuteNodePath”中插入重复键的行。重复键值为 (8504f04a-5a7e-4c10-b508-d024ee413d8f)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:2de84e6f-0476-4bce-b386-ff8eef3b0c49
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 不能在具有唯一索引“IX_Wcs.ExecuteNodePath_RegionId”的对象“dbo.Wcs.ExecuteNodePath”中插入重复键的行。重复键值为 (8504f04a-5a7e-4c10-b508-d024ee413d8f)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:2de84e6f-0476-4bce-b386-ff8eef3b0c49
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-07 10:42:23.740 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 10:42:23.908 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 不能在具有唯一索引“IX_Wcs.ExecuteNodePath_RegionId”的对象“dbo.Wcs.ExecuteNodePath”中插入重复键的行。重复键值为 (8504f04a-5a7e-4c10-b508-d024ee413d8f)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:2de84e6f-0476-4bce-b386-ff8eef3b0c49
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Infrastructure.EF.BaseDbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\BaseDbContext.cs:line 26
   at Wcs.Application.DBHandler.ExecueNode.AddOrUpdate.AddOrUpdateExecuteNodeHandler.Handle(AddOrUpdateExecuteNodeEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Wcs.Application\DBHandler\ExecueNode\AddOrUpdate\AddOrUpdateExecuteNodeHandler.cs:line 41
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 10:42:24.232 +08:00 [ERR] HTTP POST /executenode/add-or-update responded 500 in 4643.6919 ms
2025-08-07 10:42:24.357 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 500 null application/json; charset=utf-8 4795.1501ms
2025-08-07 10:44:48.392 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:44:48.453 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:44:48.459 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:44:48.468 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:44:48.482 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:44:48.501 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:44:48.528 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:44:48.533 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:44:48.542 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:44:48.545 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:44:48.551 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:44:48.557 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:44:48.646 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:44:48.650 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:44:48.654 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:44:48.658 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:44:48.665 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:44:48.675 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 10:44:48.972 +08:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 10:44:49.084 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 10:44:49.145 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 10:44:49.149 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 10:44:49.153 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 10:44:49.362 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 10:44:49.369 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 10:44:49.446 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 10:44:49.446 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 10:44:49.446 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 10:44:49.446 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_tyiyyyg93sneyiazbdq7kzdyf3"
2025-08-07 10:44:49.449 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 10:44:49.569 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 10:44:49.580 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 10:44:49.795 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 10:44:49.798 +08:00 [INF] Hosting environment: Development
2025-08-07 10:44:49.800 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 10:44:50.270 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 10:44:50.513 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 255.576ms
2025-08-07 10:44:50.687 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 10:44:50.687 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 10:44:50.697 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 9.5029ms
2025-08-07 10:44:50.743 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.5956ms
2025-08-07 10:44:50.809 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 10:44:50.847 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 37.6134ms
2025-08-07 10:45:24.582 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/add-user - application/json 154
2025-08-07 10:45:24.598 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:45:24.657 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 10:45:24.788 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2025-08-07 10:45:24.796 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-07 10:45:24.801 +08:00 [INF] HTTP POST /user/add-user responded 401 in 123.4547 ms
2025-08-07 10:45:24.925 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/add-user - 401 0 null 343.4541ms
2025-08-07 10:45:41.664 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/user-login - application/json 46
2025-08-07 10:45:41.714 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:45:41.745 +08:00 [INF] Executing endpoint 'HTTP: POST user/user-login'
2025-08-07 10:45:42.442 +08:00 [INF] Executed DbCommand (35ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[Email], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[LockoutEnd], [i].[Name], [i].[Password], [i].[Phone], [i].[RoleId], [i].[Username], [t].[Id], [t].[CreationTime], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser], [t].[RoleName]
FROM [Identity.User] AS [i]
INNER JOIN (
    SELECT [i0].[Id], [i0].[CreationTime], [i0].[Description], [i0].[IsDeleted], [i0].[LastModificationTime], [i0].[LastModifierUser], [i0].[RoleName]
    FROM [Identity.Role] AS [i0]
    WHERE [i0].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [i].[RoleId] = [t].[Id]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[Username] = @__userName_0
2025-08-07 10:45:42.517 +08:00 [INF] Executed endpoint 'HTTP: POST user/user-login'
2025-08-07 10:45:42.520 +08:00 [INF] HTTP POST /user/user-login responded 200 in 791.2392 ms
2025-08-07 10:45:42.666 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/user-login - 200 null application/json; charset=utf-8 1002.5181ms
2025-08-07 10:45:58.591 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/user-login - application/json 46
2025-08-07 10:45:58.594 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:45:58.635 +08:00 [INF] Executing endpoint 'HTTP: POST user/user-login'
2025-08-07 10:45:58.656 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[Email], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[LockoutEnd], [i].[Name], [i].[Password], [i].[Phone], [i].[RoleId], [i].[Username], [t].[Id], [t].[CreationTime], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser], [t].[RoleName]
FROM [Identity.User] AS [i]
INNER JOIN (
    SELECT [i0].[Id], [i0].[CreationTime], [i0].[Description], [i0].[IsDeleted], [i0].[LastModificationTime], [i0].[LastModifierUser], [i0].[RoleName]
    FROM [Identity.Role] AS [i0]
    WHERE [i0].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [i].[RoleId] = [t].[Id]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[Username] = @__userName_0
2025-08-07 10:45:58.679 +08:00 [INF] Executed endpoint 'HTTP: POST user/user-login'
2025-08-07 10:45:58.680 +08:00 [INF] HTTP POST /user/user-login responded 200 in 84.4934 ms
2025-08-07 10:45:58.774 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/user-login - 200 null application/json; charset=utf-8 183.029ms
2025-08-07 10:46:03.498 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/add-user - application/json 154
2025-08-07 10:46:03.502 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:46:03.521 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-user'
2025-08-07 10:46:04.135 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-user'
2025-08-07 10:46:04.260 +08:00 [ERR] An unhandled exception has occurred while executing the request.
FluentValidation.ValidationException: Validation failed: 
 -- Username: 'Username' 的长度必须在 5 到 20 字符，您输入了 4 字符。 Severity: Error
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 21
   at Identity.Presentation.Add.AddUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\Add\AddUser.cs:line 18
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 10:46:17.534 +08:00 [ERR] An exception was thrown attempting to execute the error handler.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Common.Infrastructure.Middleware.GlobalExceptionHandler.TryHandleAsync(HttpContext httpContext, Exception exception, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalExceptionHandler.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
2025-08-07 10:46:17.601 +08:00 [ERR] HTTP POST /user/add-user responded 500 in 14084.6889 ms
FluentValidation.ValidationException: Validation failed: 
 -- Username: 'Username' 的长度必须在 5 到 20 字符，您输入了 4 字符。 Severity: Error
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 21
   at Identity.Presentation.Add.AddUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\Add\AddUser.cs:line 18
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-08-07 10:46:17.755 +08:00 [ERR] An unhandled exception has occurred while executing the request.
FluentValidation.ValidationException: Validation failed: 
 -- Username: 'Username' 的长度必须在 5 到 20 字符，您输入了 4 字符。 Severity: Error
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 21
   at Identity.Presentation.Add.AddUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\Add\AddUser.cs:line 18
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Common.Infrastructure.Middleware.GlobalEncodingRequestMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalEncodingRequestMiddleware.cs:line 35
   at Common.Infrastructure.Middleware.GlobalLogMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalLogMiddleware.cs:line 48
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 10:46:17.987 +08:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.Text.Json.PooledByteBufferWriter.FlushAsync(CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Http.HttpResponseJsonExtensions.<WriteAsJsonAsync>g__WriteAsJsonAsyncSlow|6_0(HttpResponse response, Object value, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.ProblemDetailsService.TryWriteAsync(ProblemDetailsContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.DisplayExceptionContent(ErrorContext errorContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 10:46:18.050 +08:00 [ERR] Connection id "0HNELBHGIIS07", Request id "0HNELBHGIIS07:00000007": An unhandled exception was thrown by the application.
FluentValidation.ValidationException: Validation failed: 
 -- Username: 'Username' 的长度必须在 5 到 20 字符，您输入了 4 字符。 Severity: Error
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 21
   at Identity.Presentation.Add.AddUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\Add\AddUser.cs:line 18
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Common.Infrastructure.Middleware.GlobalEncodingRequestMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalEncodingRequestMiddleware.cs:line 35
   at Common.Infrastructure.Middleware.GlobalLogMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalLogMiddleware.cs:line 48
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-08-07 10:46:18.075 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/add-user - 500 0 null 14577.4476ms
2025-08-07 10:46:23.748 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/add-user - application/json 155
2025-08-07 10:46:23.861 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:46:23.877 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-user'
2025-08-07 10:46:23.968 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[Email], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[LockoutEnd], [i].[Name], [i].[Password], [i].[Phone], [i].[RoleId], [i].[Username]
FROM [Identity.User] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[Username] = @__userName_0
2025-08-07 10:46:23.986 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[RoleName]
FROM [Identity.Role] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[RoleName] = @__roleName_0
2025-08-07 10:46:24.672 +08:00 [ERR] Failed executing DbCommand (310ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 4000), @p9='?' (Size = 20), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Identity.User] ([Id], [CreationTime], [Description], [Email], [IsDeleted], [LastModificationTime], [LastModifierUser], [LockoutEnd], [Name], [Password], [Phone], [RoleId], [Username])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-07 10:46:25.199 +08:00 [ERR] An exception occurred in the database while saving changes for context type 'Identity.Infrastructure.Database.UserDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 不能在具有唯一索引“IX_Identity.User_RoleId”的对象“dbo.Identity.User”中插入重复键的行。重复键值为 (305faad3-b64d-4e86-87ee-71982a912825)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b4735fa4-2c5b-4320-88a3-ac5dcf664c32
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 不能在具有唯一索引“IX_Identity.User_RoleId”的对象“dbo.Identity.User”中插入重复键的行。重复键值为 (305faad3-b64d-4e86-87ee-71982a912825)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b4735fa4-2c5b-4320-88a3-ac5dcf664c32
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-07 10:46:25.839 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-user'
2025-08-07 10:46:26.012 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 不能在具有唯一索引“IX_Identity.User_RoleId”的对象“dbo.Identity.User”中插入重复键的行。重复键值为 (305faad3-b64d-4e86-87ee-71982a912825)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:b4735fa4-2c5b-4320-88a3-ac5dcf664c32
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Infrastructure.EF.BaseDbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\BaseDbContext.cs:line 26
   at Identity.Application.Handler.Add.User.AddUserEventHandler.Handle(AddUserEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\Handler\Add\User\AddUserEventHandler.cs:line 33
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at Identity.Presentation.Add.AddUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\Add\AddUser.cs:line 18
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 10:46:26.229 +08:00 [ERR] HTTP POST /user/add-user responded 500 in 2357.1617 ms
2025-08-07 10:46:26.389 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/add-user - 500 null application/json; charset=utf-8 2640.6965ms
2025-08-07 10:47:13.383 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/add-user - application/json 154
2025-08-07 10:47:13.415 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:47:13.420 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-user'
2025-08-07 10:47:13.676 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-user'
2025-08-07 10:47:13.808 +08:00 [ERR] An unhandled exception has occurred while executing the request.
FluentValidation.ValidationException: Validation failed: 
 -- Username: 'Username' 的长度必须在 5 到 20 字符，您输入了 4 字符。 Severity: Error
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 21
   at Identity.Presentation.Add.AddUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\Add\AddUser.cs:line 18
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 10:49:21.295 +08:00 [INF] Executed DbCommand (314ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [Wcs.Source];
2025-08-07 10:49:21.432 +08:00 [INF] Executed DbCommand (95ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [Wcs.Source] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-08-07 10:49:21.454 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:49:21.506 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK_Wcs.__EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-08-07 10:49:21.509 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:49:21.524 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 10:49:21.535 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:49:21.549 +08:00 [INF] Applying migration '20250807024836_InitialCreate'.
2025-08-07 10:49:21.606 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.Device] (
    [Id] uniqueidentifier NOT NULL,
    [DeviceType] int NOT NULL,
    [DeviceName] nvarchar(450) NOT NULL,
    [Description] nvarchar(100) NULL,
    [Config] nvarchar(512) NOT NULL,
    [Enable] bit NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.Device] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 10:49:21.625 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.JobConfig] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(50) NULL,
    [JobType] nvarchar(50) NOT NULL,
    [TimeOut] int NOT NULL,
    [Timer] int NOT NULL,
    [IsStart] bit NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.JobConfig] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 10:49:21.636 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.Region] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(20) NOT NULL,
    [Description] nvarchar(50) NULL,
    [CurrentNum] int NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.Region] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 10:49:21.645 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.TaskExecuteStep] (
    [Id] uniqueidentifier NOT NULL,
    [IsSend] bit NOT NULL,
    [Description] nvarchar(50) NULL,
    [PathNodeGroup] nvarchar(50) NULL,
    [ExecuteNodePath] uniqueidentifier NULL,
    [Version] rowversion NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.TaskExecuteStep] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 10:49:21.667 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.ExecuteNodePath] (
    [Id] uniqueidentifier NOT NULL,
    [PahtNodeGroup] nvarchar(max) NOT NULL,
    [CurrentDeviceType] int NOT NULL,
    [TaskType] int NOT NULL,
    [CurrentDeviceName] nvarchar(20) NULL,
    [NextDeviceName] nvarchar(max) NULL,
    [RegionId] uniqueidentifier NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.ExecuteNodePath] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Wcs.ExecuteNodePath_Wcs.Region_RegionId] FOREIGN KEY ([RegionId]) REFERENCES [Wcs.Region] ([Id])
);
2025-08-07 10:49:21.676 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.WcsTask] (
    [Id] uniqueidentifier NOT NULL,
    [TaskCode] nvarchar(50) NULL,
    [SerialNumber] int NOT NULL IDENTITY(4000, 1),
    [Container] nvarchar(50) NOT NULL,
    [TaskType] int NOT NULL,
    [TaskStatus] int NOT NULL,
    [CreatorSystemType] int NOT NULL,
    [Description] nvarchar(max) NULL,
    [GetLocation_GetTunnel] nvarchar(10) NULL,
    [GetLocation_GetFloor] nvarchar(10) NULL,
    [GetLocation_GetRow] nvarchar(10) NULL,
    [GetLocation_GetColumn] nvarchar(10) NULL,
    [GetLocation_GetDepth] nvarchar(10) NULL,
    [PutLocation_PutTunnel] nvarchar(10) NULL,
    [PutLocation_PutFloor] nvarchar(10) NULL,
    [PutLocation_PutRow] nvarchar(10) NULL,
    [PutLocation_PutColumn] nvarchar(10) NULL,
    [PutLocation_PutDepth] nvarchar(10) NULL,
    [RegionId] uniqueidentifier NULL,
    [TaskExecuteStepId] uniqueidentifier NOT NULL,
    [Version] rowversion NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.WcsTask] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Wcs.WcsTask_Wcs.TaskExecuteStep_TaskExecuteStepId] FOREIGN KEY ([TaskExecuteStepId]) REFERENCES [Wcs.TaskExecuteStep] ([Id]) ON DELETE CASCADE
);
2025-08-07 10:49:21.686 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.Device_DeviceName] ON [Wcs.Device] ([DeviceName]);
2025-08-07 10:49:21.691 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Wcs.ExecuteNodePath_RegionId] ON [Wcs.ExecuteNodePath] ([RegionId]);
2025-08-07 10:49:21.696 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.JobConfig_Name] ON [Wcs.JobConfig] ([Name]);
2025-08-07 10:49:21.711 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.Region_Code] ON [Wcs.Region] ([Code]);
2025-08-07 10:49:21.720 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.WcsTask_SerialNumber] ON [Wcs.WcsTask] ([SerialNumber]);
2025-08-07 10:49:21.728 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.WcsTask_TaskCode] ON [Wcs.WcsTask] ([TaskCode]) WHERE [TaskCode] IS NOT NULL;
2025-08-07 10:49:21.735 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.WcsTask_TaskExecuteStepId] ON [Wcs.WcsTask] ([TaskExecuteStepId]);
2025-08-07 10:49:21.742 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [Wcs.__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250807024836_InitialCreate', N'8.0.0');
2025-08-07 10:49:21.793 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:49:21.800 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:49:21.805 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:49:21.813 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Identity.__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK_Identity.__EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-08-07 10:49:21.823 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:49:21.827 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 10:49:21.831 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:49:21.837 +08:00 [INF] Applying migration '20250807024903_InitialCreate'.
2025-08-07 10:49:21.849 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Identity.Role] (
    [Id] uniqueidentifier NOT NULL,
    [RoleName] nvarchar(50) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Identity.Role] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 10:49:21.869 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Identity.User] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [Phone] nvarchar(max) NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(20) NOT NULL,
    [LockoutEnd] datetimeoffset NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Identity.User] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Identity.User_Identity.Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Identity.Role] ([Id]) ON DELETE CASCADE
);
2025-08-07 10:49:21.888 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE NONCLUSTERED INDEX [IX_Identity.Role_RoleName] ON [Identity.Role] ([RoleName]);
2025-08-07 10:49:21.893 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Identity.User_RoleId] ON [Identity.User] ([RoleId]);
2025-08-07 10:49:21.898 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE NONCLUSTERED INDEX [IX_Identity.User_Username] ON [Identity.User] ([Username]);
2025-08-07 10:49:21.903 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [Identity.__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250807024903_InitialCreate', N'8.0.0');
2025-08-07 10:49:21.989 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:49:21.995 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:49:21.998 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:49:22.005 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Plc.__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK_Plc.__EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-08-07 10:49:22.011 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 10:49:22.015 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 10:49:22.018 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 10:49:22.028 +08:00 [INF] Applying migration '20250804021810_InitialCreate'.
2025-08-07 10:49:22.043 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Plc.S7NetConfig] (
    [Id] uniqueidentifier NOT NULL,
    [S7Type] int NOT NULL,
    [Solt] smallint NOT NULL,
    [Rack] smallint NOT NULL,
    [ReadTimeOut] int NOT NULL,
    [WriteTimeOut] int NOT NULL,
    [IsUse] bit NOT NULL,
    [ReadHeart] nvarchar(20) NULL,
    [WriteHeart] nvarchar(20) NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    [Ip] nvarchar(max) NOT NULL,
    [Port] int NOT NULL,
    CONSTRAINT [PK_Plc.S7NetConfig] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-08-07 10:49:22.058 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Plc.S7EntityItem] (
    [Id] uniqueidentifier NOT NULL,
    [Ip] nvarchar(20) NOT NULL,
    [S7DataType] int NOT NULL,
    [DBAddress] int NOT NULL,
    [DataOffset] int NOT NULL,
    [BitOffset] tinyint NULL,
    [S7BlockType] int NOT NULL,
    [Index] int NOT NULL,
    [Description] nvarchar(50) NULL,
    [Name] nvarchar(20) NOT NULL,
    [ArrtypeLength] tinyint NULL,
    [DeviceName] nvarchar(max) NOT NULL,
    [IsUse] bit NOT NULL,
    [NetGuid] uniqueidentifier NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Plc.S7EntityItem] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Plc.S7EntityItem_Plc.S7NetConfig_NetGuid] FOREIGN KEY ([NetGuid]) REFERENCES [Plc.S7NetConfig] ([Id]) ON DELETE CASCADE
);
2025-08-07 10:49:22.067 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Plc.S7EntityItem_NetGuid] ON [Plc.S7EntityItem] ([NetGuid]);
2025-08-07 10:49:22.071 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [Plc.__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250804021810_InitialCreate', N'8.0.0');
2025-08-07 10:49:22.367 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 10:49:22.480 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 10:49:22.539 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 10:49:22.546 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 10:49:22.551 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 10:49:22.745 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 10:49:22.752 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 10:49:22.819 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_6omoyyg93snebixzbdq7kzedfm"
2025-08-07 10:49:22.819 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 10:49:22.819 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 10:49:22.819 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 10:49:22.822 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 10:49:22.912 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 10:49:22.920 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 10:49:23.134 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 10:49:23.136 +08:00 [INF] Hosting environment: Development
2025-08-07 10:49:23.139 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 10:49:23.520 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 10:49:23.778 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 267.8749ms
2025-08-07 10:49:23.947 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 10:49:23.947 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 10:49:23.955 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 8.0558ms
2025-08-07 10:49:23.989 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.5784ms
2025-08-07 10:49:24.032 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 10:49:24.064 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.8738ms
2025-08-07 10:50:05.089 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/add-adminrole - null 0
2025-08-07 10:50:05.114 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:50:05.167 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 10:50:05.307 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminrole'
2025-08-07 10:50:05.845 +08:00 [INF] Executed DbCommand (51ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[RoleName]
FROM [Identity.Role] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[RoleName] = @__roleName_0
2025-08-07 10:50:06.119 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Identity.Role] ([Id], [CreationTime], [Description], [IsDeleted], [LastModificationTime], [LastModifierUser], [RoleName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-08-07 10:50:06.182 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminrole'
2025-08-07 10:50:06.201 +08:00 [INF] HTTP POST /user/add-adminrole responded 200 in 1023.0016 ms
2025-08-07 10:50:06.370 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/add-adminrole - 200 null application/json; charset=utf-8 1280.8805ms
2025-08-07 10:50:09.161 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/add-adminuser - null 0
2025-08-07 10:50:09.171 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:50:09.175 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-08-07 10:50:09.577 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[Email], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[LockoutEnd], [i].[Name], [i].[Password], [i].[Phone], [i].[RoleId], [i].[Username]
FROM [Identity.User] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[Username] = @__userName_0
2025-08-07 10:50:09.596 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[RoleName]
FROM [Identity.Role] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[RoleName] = @__roleName_0
2025-08-07 10:50:09.676 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 4000), @p9='?' (Size = 20), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Identity.User] ([Id], [CreationTime], [Description], [Email], [IsDeleted], [LastModificationTime], [LastModifierUser], [LockoutEnd], [Name], [Password], [Phone], [RoleId], [Username])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-07 10:50:09.694 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-08-07 10:50:09.696 +08:00 [INF] HTTP POST /user/add-adminuser responded 200 in 522.8299 ms
2025-08-07 10:50:09.809 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/add-adminuser - 200 null application/json; charset=utf-8 648.4866ms
2025-08-07 10:50:22.341 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/user-login - application/json 46
2025-08-07 10:50:22.352 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:50:22.360 +08:00 [INF] Executing endpoint 'HTTP: POST user/user-login'
2025-08-07 10:50:22.973 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[Email], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[LockoutEnd], [i].[Name], [i].[Password], [i].[Phone], [i].[RoleId], [i].[Username], [t].[Id], [t].[CreationTime], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser], [t].[RoleName]
FROM [Identity.User] AS [i]
INNER JOIN (
    SELECT [i0].[Id], [i0].[CreationTime], [i0].[Description], [i0].[IsDeleted], [i0].[LastModificationTime], [i0].[LastModifierUser], [i0].[RoleName]
    FROM [Identity.Role] AS [i0]
    WHERE [i0].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [i].[RoleId] = [t].[Id]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[Username] = @__userName_0
2025-08-07 10:50:23.043 +08:00 [INF] Executed endpoint 'HTTP: POST user/user-login'
2025-08-07 10:50:23.045 +08:00 [INF] HTTP POST /user/user-login responded 200 in 687.1553 ms
2025-08-07 10:50:23.159 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/user-login - 200 null application/json; charset=utf-8 818.1917ms
2025-08-07 10:51:12.575 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/add-user - application/json 161
2025-08-07 10:51:12.601 +08:00 [INF] CORS policy execution successful.
2025-08-07 10:51:12.676 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-user'
2025-08-07 10:51:12.694 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[Email], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[LockoutEnd], [i].[Name], [i].[Password], [i].[Phone], [i].[RoleId], [i].[Username]
FROM [Identity.User] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[Username] = @__userName_0
2025-08-07 10:51:12.703 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[RoleName]
FROM [Identity.Role] AS [i]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[RoleName] = @__roleName_0
2025-08-07 10:51:12.717 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 4000), @p9='?' (Size = 20), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Identity.User] ([Id], [CreationTime], [Description], [Email], [IsDeleted], [LastModificationTime], [LastModifierUser], [LockoutEnd], [Name], [Password], [Phone], [RoleId], [Username])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-08-07 10:51:12.722 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-user'
2025-08-07 10:51:12.724 +08:00 [INF] HTTP POST /user/add-user responded 200 in 118.5069 ms
2025-08-07 10:51:12.819 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/add-user - 200 null application/json; charset=utf-8 243.8081ms
2025-08-07 12:50:53.149 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 12:50:53.200 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 12:50:53.204 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 12:50:53.206 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 12:50:53.216 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 12:50:53.227 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 12:50:53.251 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 12:50:53.254 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 12:50:53.260 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 12:50:53.349 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 12:50:53.362 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 12:50:53.371 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 12:50:53.454 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 12:50:53.458 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 12:50:53.460 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 12:50:53.462 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 12:50:53.467 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 12:50:53.557 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 12:50:53.825 +08:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 12:50:53.943 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 12:50:53.998 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 12:50:54.002 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 12:50:54.004 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 12:50:54.192 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 12:50:54.196 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 12:50:54.257 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_cydoyyg93snebxzobdq7k5x7fw"
2025-08-07 12:50:54.257 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 12:50:54.257 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 12:50:54.257 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 12:50:54.260 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 12:50:54.451 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 12:50:54.463 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 12:50:54.660 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 12:50:54.662 +08:00 [INF] Hosting environment: Development
2025-08-07 12:50:54.663 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 12:50:54.973 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 12:50:55.192 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 229.5549ms
2025-08-07 12:50:55.338 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 12:50:55.339 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 12:50:55.349 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 10.2743ms
2025-08-07 12:50:55.380 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.5673ms
2025-08-07 12:50:55.414 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 12:50:55.434 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.459ms
2025-08-07 12:51:50.362 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 12:51:50.388 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 26.9312ms
2025-08-07 12:51:50.639 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/favicon.ico - null null
2025-08-07 12:51:50.711 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 12:51:51.923 +08:00 [INF] HTTP GET /favicon.ico responded 404 in 1207.9951 ms
2025-08-07 12:51:52.018 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/favicon.ico - 404 0 null 1378.7592ms
2025-08-07 12:51:52.086 +08:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5050/favicon.ico, Response status code: 404
2025-08-07 13:20:42.682 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 170
2025-08-07 13:20:42.705 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:20:42.726 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2025-08-07 13:20:42.738 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-07 13:20:42.741 +08:00 [INF] HTTP POST /executenode/add-or-update responded 401 in 26.0806 ms
2025-08-07 13:20:42.808 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 401 0 null 128.5708ms
2025-08-07 13:20:51.178 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 170
2025-08-07 13:20:51.186 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:20:51.318 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:20:51.512 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:20:51.579 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Nullable object must have a value.
   at System.Nullable`1.get_Value()
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 13:21:28.497 +08:00 [ERR] An exception was thrown attempting to execute the error handler.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Common.Infrastructure.Middleware.GlobalExceptionHandler.TryHandleAsync(HttpContext httpContext, Exception exception, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalExceptionHandler.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
2025-08-07 13:21:28.553 +08:00 [ERR] HTTP POST /executenode/add-or-update responded 500 in 37361.6843 ms
System.InvalidOperationException: Nullable object must have a value.
   at System.Nullable`1.get_Value()
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-08-07 13:21:28.649 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Nullable object must have a value.
   at System.Nullable`1.get_Value()
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Common.Infrastructure.Middleware.GlobalEncodingRequestMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalEncodingRequestMiddleware.cs:line 35
   at Common.Infrastructure.Middleware.GlobalLogMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalLogMiddleware.cs:line 48
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 13:21:28.870 +08:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.Text.Json.PooledByteBufferWriter.FlushAsync(CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Http.HttpResponseJsonExtensions.<WriteAsJsonAsync>g__WriteAsJsonAsyncSlow|6_0(HttpResponse response, Object value, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.ProblemDetailsService.TryWriteAsync(ProblemDetailsContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.DisplayExceptionContent(ErrorContext errorContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 13:21:28.938 +08:00 [ERR] Connection id "0HNELDNV1B4QH", Request id "0HNELDNV1B4QH:00000002": An unhandled exception was thrown by the application.
System.InvalidOperationException: Nullable object must have a value.
   at System.Nullable`1.get_Value()
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Common.Infrastructure.Middleware.GlobalEncodingRequestMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalEncodingRequestMiddleware.cs:line 35
   at Common.Infrastructure.Middleware.GlobalLogMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalLogMiddleware.cs:line 48
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-08-07 13:21:28.984 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 500 0 null 37806.294ms
2025-08-07 13:22:18.567 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 170
2025-08-07 13:22:18.599 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:22:18.604 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:22:18.676 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:22:18.720 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Nullable object must have a value.
   at System.Nullable`1.get_Value()
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 13:22:24.105 +08:00 [ERR] An exception was thrown attempting to execute the error handler.
System.NullReferenceException: Object reference not set to an instance of an object.
   at Common.Infrastructure.Middleware.GlobalExceptionHandler.TryHandleAsync(HttpContext httpContext, Exception exception, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalExceptionHandler.cs:line 23
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
2025-08-07 13:22:24.151 +08:00 [ERR] HTTP POST /executenode/add-or-update responded 500 in 5549.0178 ms
System.InvalidOperationException: Nullable object must have a value.
   at System.Nullable`1.get_Value()
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-08-07 13:22:24.258 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Nullable object must have a value.
   at System.Nullable`1.get_Value()
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Common.Infrastructure.Middleware.GlobalEncodingRequestMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalEncodingRequestMiddleware.cs:line 35
   at Common.Infrastructure.Middleware.GlobalLogMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalLogMiddleware.cs:line 48
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 13:22:24.453 +08:00 [ERR] An exception was thrown attempting to display the error page.
System.ObjectDisposedException: Cannot access a closed Stream.
   at System.IO.MemoryStream.Write(Byte[] buffer, Int32 offset, Int32 count)
   at System.IO.MemoryStream.WriteAsync(ReadOnlyMemory`1 buffer, CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at System.Text.Json.PooledByteBufferWriter.FlushAsync(CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.SerializeAsync(PipeWriter pipeWriter, T rootValue, Int32 flushThreshold, CancellationToken cancellationToken, Object rootValueBoxed)
   at Microsoft.AspNetCore.Http.HttpResponseJsonExtensions.<WriteAsJsonAsync>g__WriteAsJsonAsyncSlow|6_0(HttpResponse response, Object value, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.ProblemDetailsService.TryWriteAsync(ProblemDetailsContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.DisplayExceptionContent(ErrorContext errorContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-07 13:22:24.512 +08:00 [ERR] Connection id "0HNELDNV1B4QH", Request id "0HNELDNV1B4QH:00000003": An unhandled exception was thrown by the application.
System.InvalidOperationException: Nullable object must have a value.
   at System.Nullable`1.get_Value()
   at Wcs.Presentation.ExecuteNode.InsertOrUpdate.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\Wcs.Presentation\ExecuteNode\InsertOrUpdate.cs:line 21
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.HandleException(HttpContext context, ExceptionDispatchInfo edi)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Common.Infrastructure.Middleware.GlobalEncodingRequestMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalEncodingRequestMiddleware.cs:line 35
   at Common.Infrastructure.Middleware.GlobalLogMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalLogMiddleware.cs:line 48
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-08-07 13:22:24.547 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 500 0 null 5980.3156ms
2025-08-07 13:23:34.380 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 13:23:34.438 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 13:23:34.445 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 13:23:34.450 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 13:23:34.465 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 13:23:34.488 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 13:23:34.515 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 13:23:34.520 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 13:23:34.522 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 13:23:34.524 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 13:23:34.528 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 13:23:34.531 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 13:23:34.605 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 13:23:34.609 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 13:23:34.611 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 13:23:34.613 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 13:23:34.619 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 13:23:34.630 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 13:23:34.880 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 13:23:34.953 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 13:23:35.009 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 13:23:35.014 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 13:23:35.016 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 13:23:35.184 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 13:23:35.187 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 13:23:35.226 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 13:23:35.226 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 13:23:35.226 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_sttyyyg93snebybcbdq7khwqrx"
2025-08-07 13:23:35.226 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 13:23:35.230 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 13:23:35.315 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 13:23:35.321 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 13:23:35.521 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 13:23:35.523 +08:00 [INF] Hosting environment: Development
2025-08-07 13:23:35.524 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 13:23:35.760 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 13:23:35.971 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 222.0927ms
2025-08-07 13:23:36.125 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 13:23:36.125 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 13:23:36.132 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 7.0703ms
2025-08-07 13:23:36.158 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.3113ms
2025-08-07 13:23:36.214 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 13:23:36.238 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 23.8917ms
2025-08-07 13:24:06.635 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 166
2025-08-07 13:24:06.659 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:24:06.686 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 13:24:06.772 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2025-08-07 13:24:06.780 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-08-07 13:24:06.785 +08:00 [INF] HTTP POST /executenode/add-or-update responded 401 in 89.0851 ms
2025-08-07 13:24:06.844 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 401 0 null 209.0723ms
2025-08-07 13:24:15.742 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 166
2025-08-07 13:24:15.761 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:24:15.855 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:24:23.325 +08:00 [INF] Executed DbCommand (89ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 13:24:23.355 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 13:24:24.023 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 13:24:24.473 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 13:24:27.364 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.ExecuteNodePath] ([Id], [CreationTime], [CurrentDeviceName], [CurrentDeviceType], [IsDeleted], [LastModificationTime], [LastModifierUser], [NextDeviceName], [PahtNodeGroup], [RegionId], [TaskType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-07 13:24:27.457 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:24:27.461 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 11690.8394 ms
2025-08-07 13:24:27.551 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 11808.8741ms
2025-08-07 13:26:30.401 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 166
2025-08-07 13:26:30.414 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:26:30.425 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:26:32.319 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 13:26:32.327 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 13:26:32.336 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 13:26:32.349 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 13:26:32.360 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.ExecuteNodePath] ([Id], [CreationTime], [CurrentDeviceName], [CurrentDeviceType], [IsDeleted], [LastModificationTime], [LastModifierUser], [NextDeviceName], [PahtNodeGroup], [RegionId], [TaskType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-07 13:26:32.369 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:26:32.370 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 1950.0591 ms
2025-08-07 13:26:32.420 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 2018.7631ms
2025-08-07 13:26:58.764 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 126
2025-08-07 13:26:58.780 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:26:58.785 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:26:58.983 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:26:59.032 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to read parameter "ExecuteNodeRequest request" from the request body as JSON.
 ---> System.Text.Json.JsonException: The JSON object contains a trailing comma at the end which is not supported in this mode. Change the reader options. Path: $ | LineNumber: 6 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonReaderException: The JSON object contains a trailing comma at the end which is not supported in this mode. Change the reader options. LineNumber: 6 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.ConsumeNextToken(Byte marker)
   at System.Text.Json.Utf8JsonReader.ConsumeNextTokenOrRollback(Byte marker)
   at System.Text.Json.Utf8JsonReader.ReadSingleSegment()
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.InvalidJsonRequestBody(HttpContext httpContext, String parameterTypeName, String parameterName, Exception exception, Boolean shouldThrow)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 13:26:59.134 +08:00 [ERR] HTTP POST /executenode/add-or-update responded 500 in 349.7561 ms
2025-08-07 13:26:59.162 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 500 null application/json; charset=utf-8 397.8124ms
2025-08-07 13:27:05.611 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 125
2025-08-07 13:27:05.621 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:27:05.628 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:27:07.052 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 13:27:07.072 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 13:27:07.081 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 13:27:07.085 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 13:27:07.095 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.ExecuteNodePath] ([Id], [CreationTime], [CurrentDeviceName], [CurrentDeviceType], [IsDeleted], [LastModificationTime], [LastModifierUser], [NextDeviceName], [PahtNodeGroup], [RegionId], [TaskType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-07 13:27:07.105 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:27:07.108 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 1479.8076 ms
2025-08-07 13:27:07.156 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 1544.8497ms
2025-08-07 13:28:51.105 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 166
2025-08-07 13:28:51.111 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:28:51.114 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:28:53.803 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 13:28:53.823 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 13:28:53.842 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 13:28:53.863 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 13:28:53.887 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.ExecuteNodePath] ([Id], [CreationTime], [CurrentDeviceName], [CurrentDeviceType], [IsDeleted], [LastModificationTime], [LastModifierUser], [NextDeviceName], [PahtNodeGroup], [RegionId], [TaskType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-07 13:28:53.906 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:28:53.908 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 2795.3631 ms
2025-08-07 13:28:53.981 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 2875.4682ms
2025-08-07 13:29:28.073 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 166
2025-08-07 13:29:28.091 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:29:28.094 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:29:28.099 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 13:29:28.109 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 13:29:28.113 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 13:29:28.115 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 13:29:28.121 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.ExecuteNodePath] ([Id], [CreationTime], [CurrentDeviceName], [CurrentDeviceType], [IsDeleted], [LastModificationTime], [LastModifierUser], [NextDeviceName], [PahtNodeGroup], [RegionId], [TaskType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-07 13:29:28.129 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:29:28.130 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 36.3534 ms
2025-08-07 13:29:28.175 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 103.4852ms
2025-08-07 13:29:39.537 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 166
2025-08-07 13:29:39.541 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:29:39.543 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:29:39.560 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 13:29:39.583 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 13:29:39.599 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 13:29:39.618 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 13:29:39.632 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.ExecuteNodePath] ([Id], [CreationTime], [CurrentDeviceName], [CurrentDeviceType], [IsDeleted], [LastModificationTime], [LastModifierUser], [NextDeviceName], [PahtNodeGroup], [RegionId], [TaskType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-07 13:29:39.690 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:29:39.691 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 148.5009 ms
2025-08-07 13:29:39.743 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 206.1301ms
2025-08-07 13:30:36.672 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 166
2025-08-07 13:30:36.700 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:30:36.704 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:30:36.716 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 13:30:36.734 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 13:30:36.750 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 13:30:36.763 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 13:30:36.781 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.ExecuteNodePath] ([Id], [CreationTime], [CurrentDeviceName], [CurrentDeviceType], [IsDeleted], [LastModificationTime], [LastModifierUser], [NextDeviceName], [PahtNodeGroup], [RegionId], [TaskType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-07 13:30:36.795 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:30:36.799 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 95.5829 ms
2025-08-07 13:30:36.887 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 214.7326ms
2025-08-07 13:30:46.637 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 166
2025-08-07 13:30:46.653 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:30:46.659 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:30:46.674 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 13:30:46.697 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 13:30:46.723 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 13:30:46.745 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 13:30:46.762 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.ExecuteNodePath] ([Id], [CreationTime], [CurrentDeviceName], [CurrentDeviceType], [IsDeleted], [LastModificationTime], [LastModifierUser], [NextDeviceName], [PahtNodeGroup], [RegionId], [TaskType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-07 13:30:46.790 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:30:46.792 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 133.4392 ms
2025-08-07 13:30:46.894 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 256.5261ms
2025-08-07 13:35:13.127 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 166
2025-08-07 13:35:13.143 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:35:13.148 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:35:13.158 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 13:35:13.174 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 13:35:13.187 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 13:35:13.202 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 13:35:13.218 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.ExecuteNodePath] ([Id], [CreationTime], [CurrentDeviceName], [CurrentDeviceType], [IsDeleted], [LastModificationTime], [LastModifierUser], [NextDeviceName], [PahtNodeGroup], [RegionId], [TaskType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-07 13:35:13.233 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:35:13.238 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 90.3728 ms
2025-08-07 13:35:13.344 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 217.0837ms
2025-08-07 13:35:23.516 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 126
2025-08-07 13:35:23.529 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:35:23.537 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:35:23.858 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:35:23.925 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to read parameter "ExecuteNodeRequest request" from the request body as JSON.
 ---> System.Text.Json.JsonException: The JSON object contains a trailing comma at the end which is not supported in this mode. Change the reader options. Path: $ | LineNumber: 6 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonReaderException: The JSON object contains a trailing comma at the end which is not supported in this mode. Change the reader options. LineNumber: 6 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.ConsumeNextTokenOrRollback(Byte marker)
   at System.Text.Json.Utf8JsonReader.ReadSingleSegment()
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.InvalidJsonRequestBody(HttpContext httpContext, String parameterTypeName, String parameterName, Exception exception, Boolean shouldThrow)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 13:35:23.994 +08:00 [ERR] HTTP POST /executenode/add-or-update responded 500 in 456.7751 ms
2025-08-07 13:35:24.036 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 500 null application/json; charset=utf-8 520.8033ms
2025-08-07 13:35:48.031 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 125
2025-08-07 13:35:48.051 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:35:48.057 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:35:48.064 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 13:35:48.080 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 13:35:48.091 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 13:35:48.097 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 13:35:48.109 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.ExecuteNodePath] ([Id], [CreationTime], [CurrentDeviceName], [CurrentDeviceType], [IsDeleted], [LastModificationTime], [LastModifierUser], [NextDeviceName], [PahtNodeGroup], [RegionId], [TaskType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-07 13:35:48.153 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:35:48.174 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 118.2587 ms
2025-08-07 13:35:48.270 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 239.4733ms
2025-08-07 13:38:06.241 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 166
2025-08-07 13:38:06.272 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:38:06.280 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:38:06.320 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 13:38:06.349 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 13:38:06.366 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 13:38:06.383 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 13:38:06.402 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.ExecuteNodePath] ([Id], [CreationTime], [CurrentDeviceName], [CurrentDeviceType], [IsDeleted], [LastModificationTime], [LastModifierUser], [NextDeviceName], [PahtNodeGroup], [RegionId], [TaskType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-07 13:38:06.422 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:38:06.424 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 144.4178 ms
2025-08-07 13:38:06.496 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 254.8742ms
2025-08-07 13:38:29.475 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 146
2025-08-07 13:38:29.488 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:38:29.498 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:38:29.798 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:38:29.917 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to read parameter "ExecuteNodeRequest request" from the request body as JSON.
 ---> System.Text.Json.JsonException: '"' is invalid after a value. Expected either ',', '}', or ']'. Path: $ | LineNumber: 6 | BytePositionInLine: 2.
 ---> System.Text.Json.JsonReaderException: '"' is invalid after a value. Expected either ',', '}', or ']'. LineNumber: 6 | BytePositionInLine: 2.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.ConsumeNextTokenOrRollback(Byte marker)
   at System.Text.Json.Utf8JsonReader.ReadSingleSegment()
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.InvalidJsonRequestBody(HttpContext httpContext, String parameterTypeName, String parameterName, Exception exception, Boolean shouldThrow)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 13:38:29.997 +08:00 [ERR] HTTP POST /executenode/add-or-update responded 500 in 499.8441 ms
2025-08-07 13:38:30.062 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 500 null application/json; charset=utf-8 587.0814ms
2025-08-07 13:38:37.196 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 128
2025-08-07 13:38:37.203 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:38:37.211 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:38:37.259 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 13:38:37.272 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 13:38:37.281 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 13:38:37.290 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 13:38:37.305 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.ExecuteNodePath] ([Id], [CreationTime], [CurrentDeviceName], [CurrentDeviceType], [IsDeleted], [LastModificationTime], [LastModifierUser], [NextDeviceName], [PahtNodeGroup], [RegionId], [TaskType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-07 13:38:37.324 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:38:37.326 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 116.8513 ms
2025-08-07 13:38:37.406 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 210.2595ms
2025-08-07 13:39:52.241 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 166
2025-08-07 13:39:52.265 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:39:52.270 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:39:52.279 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 13:39:52.295 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 13:39:52.307 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 13:39:52.320 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 13:39:52.337 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.ExecuteNodePath] ([Id], [CreationTime], [CurrentDeviceName], [CurrentDeviceType], [IsDeleted], [LastModificationTime], [LastModifierUser], [NextDeviceName], [PahtNodeGroup], [RegionId], [TaskType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-07 13:39:52.348 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:39:52.351 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 80.9432 ms
2025-08-07 13:39:52.440 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 199.5482ms
2025-08-07 13:40:02.167 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 147
2025-08-07 13:40:02.187 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:40:02.191 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:40:02.540 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:40:02.627 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to read parameter "ExecuteNodeRequest request" from the request body as JSON.
 ---> System.Text.Json.JsonException: '}' is an invalid start of a value. Path: $.nextDeviceName | LineNumber: 7 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonReaderException: '}' is an invalid start of a value. LineNumber: 7 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.ConsumeValue(Byte marker)
   at System.Text.Json.Utf8JsonReader.ReadSingleSegment()
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.ReadAheadPropertyValue(ReadStack& state, Utf8JsonReader& reader, JsonPropertyInfo jsonPropertyInfo)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.InvalidJsonRequestBody(HttpContext httpContext, String parameterTypeName, String parameterName, Exception exception, Boolean shouldThrow)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|102_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-08-07 13:40:02.702 +08:00 [ERR] HTTP POST /executenode/add-or-update responded 500 in 511.8026 ms
2025-08-07 13:40:02.752 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 500 null application/json; charset=utf-8 585.5354ms
2025-08-07 13:40:15.308 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 149
2025-08-07 13:40:15.317 +08:00 [INF] CORS policy execution successful.
2025-08-07 13:40:15.325 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:40:15.334 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 13:40:15.350 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 13:40:15.364 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 13:40:15.377 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 13:40:15.397 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.ExecuteNodePath] ([Id], [CreationTime], [CurrentDeviceName], [CurrentDeviceType], [IsDeleted], [LastModificationTime], [LastModifierUser], [NextDeviceName], [PahtNodeGroup], [RegionId], [TaskType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-07 13:40:15.408 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 13:40:15.412 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 88.5261 ms
2025-08-07 13:40:15.493 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 185.1106ms
2025-08-07 14:48:18.965 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 14:48:19.039 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 14:48:19.055 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 14:48:19.059 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 14:48:19.079 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 14:48:19.095 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 14:48:19.120 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 14:48:19.126 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 14:48:19.130 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 14:48:19.134 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 14:48:19.140 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 14:48:19.144 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 14:48:19.238 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 14:48:19.246 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 14:48:19.263 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 14:48:19.269 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 14:48:19.275 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 14:48:19.293 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 14:48:19.603 +08:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 14:48:19.740 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 14:48:19.811 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 14:48:19.815 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 14:48:19.819 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 14:48:20.031 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 14:48:20.036 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 14:48:20.129 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 14:48:20.129 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 14:48:20.129 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_gteyyyg93sneyan8bdq7k9ufn5"
2025-08-07 14:48:20.129 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 14:48:20.132 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 14:48:20.248 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 14:48:20.255 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 14:48:20.479 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 14:48:20.480 +08:00 [INF] Hosting environment: Development
2025-08-07 14:48:20.482 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 14:48:20.820 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 14:48:21.077 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 265.4493ms
2025-08-07 14:48:21.251 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 14:48:21.251 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 14:48:21.264 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 13.0059ms
2025-08-07 14:48:21.303 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.3064ms
2025-08-07 14:48:21.379 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 14:48:21.424 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 45.3136ms
2025-08-07 14:50:29.915 +08:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 14:50:29.990 +08:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 14:50:30.001 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 14:50:30.007 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 14:50:30.026 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 14:50:30.060 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 14:50:30.092 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 14:50:30.111 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 14:50:30.116 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 14:50:30.131 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 14:50:30.138 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 14:50:30.142 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 14:50:30.229 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 14:50:30.237 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 14:50:30.240 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 14:50:30.244 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 14:50:30.250 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 14:50:30.258 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 14:50:30.566 +08:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 14:50:30.664 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 14:50:30.728 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 14:50:30.733 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 14:50:30.740 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 14:50:30.955 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 14:50:30.962 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 14:50:31.040 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 14:50:31.040 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 14:50:31.040 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 14:50:31.040 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_dtmoyyg93sney6knbdq7k9iudr"
2025-08-07 14:50:31.045 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 14:50:31.155 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 14:50:31.175 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 14:50:31.394 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 14:50:31.408 +08:00 [INF] Hosting environment: Development
2025-08-07 14:50:31.411 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 14:50:31.685 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 14:50:31.920 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 242.4744ms
2025-08-07 14:50:32.096 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 14:50:32.096 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 14:50:32.112 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 16.3499ms
2025-08-07 14:50:32.133 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.3035ms
2025-08-07 14:50:32.207 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 14:50:32.241 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 33.5978ms
2025-08-07 14:53:22.151 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 166
2025-08-07 14:53:22.166 +08:00 [INF] CORS policy execution successful.
2025-08-07 14:53:22.195 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 14:53:22.386 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 14:53:22.971 +08:00 [INF] Executed DbCommand (40ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 14:53:22.996 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 14:53:23.173 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 14:53:23.215 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 14:53:23.615 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.ExecuteNodePath] ([Id], [CreationTime], [CurrentDeviceName], [CurrentDeviceType], [IsDeleted], [LastModificationTime], [LastModifierUser], [NextDeviceName], [PahtNodeGroup], [RegionId], [TaskType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-07 14:53:23.720 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 14:53:23.727 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 1527.5803 ms
2025-08-07 14:53:23.948 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 1797.3116ms
2025-08-07 14:53:45.201 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 149
2025-08-07 14:53:45.214 +08:00 [INF] CORS policy execution successful.
2025-08-07 14:53:45.233 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 14:53:45.251 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 14:53:45.267 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 14:53:45.282 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 14:53:45.298 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 14:53:45.317 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.ExecuteNodePath] ([Id], [CreationTime], [CurrentDeviceName], [CurrentDeviceType], [IsDeleted], [LastModificationTime], [LastModifierUser], [NextDeviceName], [PahtNodeGroup], [RegionId], [TaskType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-07 14:53:45.347 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 14:53:45.360 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 132.7805 ms
2025-08-07 14:53:45.465 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 263.6839ms
2025-08-07 15:09:03.840 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 166
2025-08-07 15:09:03.867 +08:00 [INF] CORS policy execution successful.
2025-08-07 15:09:03.878 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 15:09:03.901 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 15:09:03.919 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 15:09:03.934 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 15:09:03.951 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 15:09:03.968 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.ExecuteNodePath] ([Id], [CreationTime], [CurrentDeviceName], [CurrentDeviceType], [IsDeleted], [LastModificationTime], [LastModifierUser], [NextDeviceName], [PahtNodeGroup], [RegionId], [TaskType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-07 15:09:03.974 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 15:09:03.976 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 102.9211 ms
2025-08-07 15:09:04.124 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 283.4282ms
2025-08-07 15:09:20.808 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - application/json 149
2025-08-07 15:09:20.835 +08:00 [INF] CORS policy execution successful.
2025-08-07 15:09:20.882 +08:00 [INF] Executing endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 15:09:20.892 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Wcs.Region] AS [w]
        WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-08-07 15:09:20.899 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__regionCode_0='?' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Code], [w].[CreationTime], [w].[CurrentNum], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Region] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Code] = @__regionCode_0
2025-08-07 15:09:20.905 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__deviceName_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Config], [w].[CreationTime], [w].[Description], [w].[DeviceName], [w].[DeviceType], [w].[Enable], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser]
FROM [Wcs.Device] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[DeviceName] = @__deviceName_0
2025-08-07 15:09:20.912 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[CreationTime], [w].[CurrentDeviceName], [w].[CurrentDeviceType], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[NextDeviceName], [w].[PahtNodeGroup], [w].[RegionId], [w].[TaskType]
FROM [Wcs.ExecuteNodePath] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[Id] = @__id_0
2025-08-07 15:09:20.926 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 20), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Size = 4000), @p9='?' (DbType = Guid), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wcs.ExecuteNodePath] ([Id], [CreationTime], [CurrentDeviceName], [CurrentDeviceType], [IsDeleted], [LastModificationTime], [LastModifierUser], [NextDeviceName], [PahtNodeGroup], [RegionId], [TaskType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-08-07 15:09:20.929 +08:00 [INF] Executed endpoint 'HTTP: POST executenode/add-or-update'
2025-08-07 15:09:20.931 +08:00 [INF] HTTP POST /executenode/add-or-update responded 200 in 49.3527 ms
2025-08-07 15:09:21.042 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/executenode/add-or-update - 200 null application/json; charset=utf-8 234.5545ms
2025-08-07 15:23:57.289 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 15:23:57.358 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 15:23:57.366 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 15:23:57.373 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 15:23:57.385 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 15:23:57.402 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 15:23:57.434 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 15:23:57.443 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 15:23:57.447 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 15:23:57.454 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 15:23:57.460 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 15:23:57.466 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 15:23:57.555 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 15:23:57.564 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 15:23:57.569 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 15:23:57.573 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 15:23:57.579 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 15:23:57.588 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 15:23:57.885 +08:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 15:23:57.990 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 15:23:58.056 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 15:23:58.066 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 15:23:58.075 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 15:23:58.287 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 15:23:58.292 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 15:23:58.363 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_stiyyyg93snebdtnbdq7my49gh"
2025-08-07 15:23:58.363 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 15:23:58.363 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 15:23:58.363 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 15:23:58.370 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 15:23:58.456 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 15:23:58.464 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 15:23:58.696 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 15:23:58.699 +08:00 [INF] Hosting environment: Development
2025-08-07 15:23:58.701 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 15:23:59.102 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 15:23:59.318 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 225.2692ms
2025-08-07 15:23:59.331 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 15:23:59.339 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 8.0615ms
2025-08-07 15:23:59.468 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 15:23:59.504 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.9104ms
2025-08-07 15:23:59.554 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 15:23:59.595 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 41.4227ms
2025-08-07 15:24:10.885 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/user/user-login - application/json 46
2025-08-07 15:24:10.923 +08:00 [INF] CORS policy execution successful.
2025-08-07 15:24:10.989 +08:00 [WRN] Failed to determine the https port for redirect.
2025-08-07 15:24:11.112 +08:00 [INF] Executing endpoint 'HTTP: POST user/user-login'
2025-08-07 15:24:11.808 +08:00 [INF] Executed DbCommand (44ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreationTime], [i].[Description], [i].[Email], [i].[IsDeleted], [i].[LastModificationTime], [i].[LastModifierUser], [i].[LockoutEnd], [i].[Name], [i].[Password], [i].[Phone], [i].[RoleId], [i].[Username], [t].[Id], [t].[CreationTime], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser], [t].[RoleName]
FROM [Identity.User] AS [i]
INNER JOIN (
    SELECT [i0].[Id], [i0].[CreationTime], [i0].[Description], [i0].[IsDeleted], [i0].[LastModificationTime], [i0].[LastModifierUser], [i0].[RoleName]
    FROM [Identity.Role] AS [i0]
    WHERE [i0].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [i].[RoleId] = [t].[Id]
WHERE [i].[IsDeleted] = CAST(0 AS bit) AND [i].[Username] = @__userName_0
2025-08-07 15:24:11.880 +08:00 [INF] Executed endpoint 'HTTP: POST user/user-login'
2025-08-07 15:24:11.888 +08:00 [INF] HTTP POST /user/user-login responded 200 in 883.2747 ms
2025-08-07 15:24:12.093 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/user/user-login - 200 null application/json; charset=utf-8 1207.7967ms
2025-08-07 15:24:34.477 +08:00 [INF] Request starting HTTP/1.1 POST http://localhost:5050/wcstask/get-wcstasks - application/json 6
2025-08-07 15:24:34.501 +08:00 [INF] CORS policy execution successful.
2025-08-07 15:24:34.573 +08:00 [INF] Executing endpoint 'HTTP: POST wcstask/get-wcstasks'
2025-08-07 15:24:35.143 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__request_TaskStatus_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[Container], [w].[CreationTime], [w].[CreatorSystemType], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[RegionId], [w].[SerialNumber], [w].[StockOutPosition], [w].[TaskCode], [w].[TaskExecuteStepId], [w].[TaskStatus], [w].[TaskType], [w].[Version], [w].[GetLocation_GetColumn], [w].[GetLocation_GetDepth], [w].[GetLocation_GetFloor], [w].[GetLocation_GetRow], [w].[GetLocation_GetTunnel], [w].[PutLocation_PutColumn], [w].[PutLocation_PutDepth], [w].[PutLocation_PutFloor], [w].[PutLocation_PutRow], [w].[PutLocation_PutTunnel]
FROM [Wcs.WcsTask] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[TaskStatus] = @__request_TaskStatus_0
2025-08-07 15:24:35.184 +08:00 [INF] Executed endpoint 'HTTP: POST wcstask/get-wcstasks'
2025-08-07 15:24:35.190 +08:00 [INF] HTTP POST /wcstask/get-wcstasks responded 200 in 684.1154 ms
2025-08-07 15:24:35.247 +08:00 [INF] Request finished HTTP/1.1 POST http://localhost:5050/wcstask/get-wcstasks - 200 null application/json; charset=utf-8 770.0655ms
2025-08-07 15:24:43.193 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/wcstask/get-wcstask/{serialNumber}?request=4000 - null null
2025-08-07 15:24:43.213 +08:00 [INF] Executing endpoint 'HTTP: GET wcstask/get-wcstask/{serialNumber}'
2025-08-07 15:24:43.273 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@__request_SerialNumber_0='?' (DbType = Int32), @__request_TaskStatus_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[Container], [w].[CreationTime], [w].[CreatorSystemType], [w].[Description], [w].[IsDeleted], [w].[LastModificationTime], [w].[LastModifierUser], [w].[RegionId], [w].[SerialNumber], [w].[StockOutPosition], [w].[TaskCode], [w].[TaskExecuteStepId], [w].[TaskStatus], [w].[TaskType], [w].[Version], [w].[GetLocation_GetColumn], [w].[GetLocation_GetDepth], [w].[GetLocation_GetFloor], [w].[GetLocation_GetRow], [w].[GetLocation_GetTunnel], [w].[PutLocation_PutColumn], [w].[PutLocation_PutDepth], [w].[PutLocation_PutFloor], [w].[PutLocation_PutRow], [w].[PutLocation_PutTunnel]
FROM [Wcs.WcsTask] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit) AND [w].[SerialNumber] = @__request_SerialNumber_0 AND [w].[TaskStatus] = @__request_TaskStatus_1
2025-08-07 15:24:43.317 +08:00 [INF] Executed endpoint 'HTTP: GET wcstask/get-wcstask/{serialNumber}'
2025-08-07 15:24:43.320 +08:00 [INF] HTTP GET /wcstask/get-wcstask/{serialNumber} responded 200 in 112.8445 ms
2025-08-07 15:24:43.370 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/wcstask/get-wcstask/{serialNumber}?request=4000 - 200 null application/json; charset=utf-8 179.6279ms
2025-08-07 15:26:21.194 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 15:26:21.256 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 15:26:21.266 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 15:26:21.272 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.__EFMigrationsHistory]');
2025-08-07 15:26:21.285 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 15:26:21.299 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 15:26:21.329 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 15:26:21.335 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 15:26:21.342 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 15:26:21.348 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Identity.__EFMigrationsHistory]');
2025-08-07 15:26:21.355 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Identity.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 15:26:21.360 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 15:26:21.451 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 15:26:21.456 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 15:26:21.461 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-07 15:26:21.464 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Plc.__EFMigrationsHistory]');
2025-08-07 15:26:21.472 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Plc.__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-07 15:26:21.485 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-08-07 15:26:21.783 +08:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-08-07 15:26:21.882 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-07 15:26:21.947 +08:00 [INF] Configured endpoint WcsIntegrationEvent, Consumer: Wcs.Application.Custom.WcsCustomEventConsumer<Wcs.CustomEvents.WcsIntegrationEvent>
2025-08-07 15:26:21.956 +08:00 [INF] Configured endpoint S7ReadPlcDataBlockEvent, Consumer: Plc.Application.Custom.ReadPlcEventConsumer<Plc.CustomEvents.S7ReadPlcDataBlockEvent>
2025-08-07 15:26:21.960 +08:00 [INF] Configured endpoint S7WritePlcDataBlockEvent, Consumer: Plc.Application.Custom.WritePlcEventConsumer<Plc.CustomEvents.S7WritePlcDataBlockEvent>
2025-08-07 15:26:22.192 +08:00 [DBG] Starting bus instances: IBus
2025-08-07 15:26:22.198 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-08-07 15:26:22.278 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7ReadPlcDataBlockEvent"
2025-08-07 15:26:22.278 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_ntryyyg93sneynczbdq7my7ifb"
2025-08-07 15:26:22.278 +08:00 [DBG] Endpoint Ready: "loopback://localhost/S7WritePlcDataBlockEvent"
2025-08-07 15:26:22.278 +08:00 [DBG] Endpoint Ready: "loopback://localhost/WcsIntegrationEvent"
2025-08-07 15:26:22.281 +08:00 [INF] Bus started: "loopback://localhost/"
2025-08-07 15:26:22.401 +08:00 [INF] Now listening on: http://localhost:5050
2025-08-07 15:26:22.409 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-08-07 15:26:22.668 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-07 15:26:22.674 +08:00 [INF] Hosting environment: Development
2025-08-07 15:26:22.682 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-08-07 15:26:22.772 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/index.html - null null
2025-08-07 15:26:23.048 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/index.html - 200 null text/html;charset=utf-8 288.8194ms
2025-08-07 15:26:23.237 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - null null
2025-08-07 15:26:23.237 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/_vs/browserLink - null null
2025-08-07 15:26:23.245 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 7.474ms
2025-08-07 15:26:23.279 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.2263ms
2025-08-07 15:26:23.334 +08:00 [INF] Request starting HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - null null
2025-08-07 15:26:23.375 +08:00 [INF] Request finished HTTP/1.1 GET http://localhost:5050/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 40.8972ms

2025-07-21 08:42:01.738 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:42:01.794 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 08:42:01.798 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:42:01.801 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 08:42:01.811 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 08:42:01.822 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 08:42:01.866 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:42:01.892 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 08:42:01.906 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:42:01.915 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 08:42:01.928 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 08:42:01.935 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 08:42:02.013 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 08:42:02.023 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 08:42:02.023 +08:00 [INF] Quartz Scheduler created
2025-07-21 08:42:02.024 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 08:42:02.025 +08:00 [INF] RAMJobStore initialized.
2025-07-21 08:42:02.025 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '115682949' initialized
2025-07-21 08:42:02.026 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 08:42:02.026 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 08:42:02.032 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 08:42:02.249 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 08:42:02.321 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 08:42:02.366 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 08:42:02.585 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 08:42:02.589 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 08:42:02.634 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_3oaoyynqz1igb1oibdqhx55efh"
2025-07-21 08:42:02.634 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 08:42:02.646 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 08:42:02.797 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 08:42:02.798 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 08:42:02.808 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 08:42:02.918 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 08:42:02.923 +08:00 [INF] Hosting environment: Development
2025-07-21 08:42:02.928 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 08:42:02.924 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 08:42:02.923 +08:00 [INF] Scheduler JobScheduler_$_115682949 started.
2025-07-21 08:42:03.374 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 08:42:03.568 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 199.4399ms
2025-07-21 08:42:03.580 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 08:42:03.587 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 7.1864ms
2025-07-21 08:42:03.706 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 08:42:03.825 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 119.7755ms
2025-07-21 08:42:03.862 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 08:42:03.877 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 15.0989ms
2025-07-21 08:42:30.588 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 08:42:58.271 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 08:46:28.681 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:46:28.728 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 08:46:28.732 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:46:28.734 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 08:46:28.742 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 08:46:28.752 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 08:46:28.789 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:46:28.794 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 08:46:28.796 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:46:28.798 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 08:46:28.801 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 08:46:28.803 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 08:46:28.899 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 08:46:28.908 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 08:46:28.909 +08:00 [INF] Quartz Scheduler created
2025-07-21 08:46:28.910 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 08:46:28.911 +08:00 [INF] RAMJobStore initialized.
2025-07-21 08:46:28.912 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '-625461564' initialized
2025-07-21 08:46:28.912 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 08:46:28.913 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 08:46:28.920 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 08:46:29.119 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 08:46:29.169 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 08:46:29.214 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 08:46:29.438 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 08:46:29.441 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 08:46:29.495 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 08:46:29.495 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_8bqoyynqz1igy7onbdqhxhy8go"
2025-07-21 08:46:29.498 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 08:46:29.624 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 08:46:29.626 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 08:46:29.631 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 08:46:29.745 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 08:46:29.747 +08:00 [INF] Hosting environment: Development
2025-07-21 08:46:29.748 +08:00 [INF] Scheduler JobScheduler_$_-625461564 started.
2025-07-21 08:46:29.748 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 08:46:29.749 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 08:46:30.251 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 08:46:30.415 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 172.3483ms
2025-07-21 08:46:30.428 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 08:46:30.437 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 8.31ms
2025-07-21 08:46:30.562 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 08:46:30.598 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.3304ms
2025-07-21 08:46:30.640 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 08:46:30.657 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 16.7938ms
2025-07-21 08:46:39.729 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminrole - null 0
2025-07-21 08:46:41.197 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminrole'
2025-07-21 08:46:41.294 +08:00 [INF] Executed DbCommand (50ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [User.].[Role] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[RoleName] = @__roleName_0
2025-07-21 08:46:41.638 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminrole'
2025-07-21 08:46:41.767 +08:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
Role -> RoleDto
User.Domain.Role -> User.Contrancts.RoleDto
   at lambda_method91(Closure, Object, RoleDto, ResolutionContext)
   at User.Application.AddHandler.AddRoleEventHandler.Handle(AddRoleEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\AddHandler\AddEventHandler.cs:line 53
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at User.Presentation.AddAdmin.AddAdminRole.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminRole.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 08:46:41.888 +08:00 [ERR] Unhandled exception occurred
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
Role -> RoleDto
User.Domain.Role -> User.Contrancts.RoleDto
   at lambda_method91(Closure, Object, RoleDto, ResolutionContext)
   at User.Application.AddHandler.AddRoleEventHandler.Handle(AddRoleEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\AddHandler\AddEventHandler.cs:line 53
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at User.Presentation.AddAdmin.AddAdminRole.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminRole.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 08:46:41.904 +08:00 [ERR] HTTP POST /user/add-adminrole responded 500 in 2144.8129 ms
2025-07-21 08:46:41.918 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminrole - 500 null application/json; charset=utf-8 2189.5783ms
2025-07-21 08:46:57.917 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 08:47:02.030 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminrole - null 0
2025-07-21 08:47:02.036 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminrole'
2025-07-21 08:47:10.838 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [User.].[Role] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[RoleName] = @__roleName_0
2025-07-21 08:47:24.799 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminrole'
2025-07-21 08:47:24.845 +08:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
Role -> RoleDto
User.Domain.Role -> User.Contrancts.RoleDto
   at lambda_method91(Closure, Object, RoleDto, ResolutionContext)
   at User.Application.AddHandler.AddRoleEventHandler.Handle(AddRoleEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\AddHandler\AddEventHandler.cs:line 53
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at User.Presentation.AddAdmin.AddAdminRole.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminRole.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 08:47:24.856 +08:00 [ERR] Unhandled exception occurred
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
Role -> RoleDto
User.Domain.Role -> User.Contrancts.RoleDto
   at lambda_method91(Closure, Object, RoleDto, ResolutionContext)
   at User.Application.AddHandler.AddRoleEventHandler.Handle(AddRoleEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\AddHandler\AddEventHandler.cs:line 53
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at User.Presentation.AddAdmin.AddAdminRole.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminRole.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 08:47:24.862 +08:00 [ERR] HTTP POST /user/add-adminrole responded 500 in 22827.5524 ms
2025-07-21 08:47:24.865 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminrole - 500 null application/json; charset=utf-8 22835.8133ms
2025-07-21 08:47:25.656 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 08:47:53.999 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 08:48:14.555 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminrole - null 0
2025-07-21 08:48:14.563 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminrole'
2025-07-21 08:48:18.577 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [User.].[Role] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[RoleName] = @__roleName_0
2025-07-21 08:48:18.681 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminrole'
2025-07-21 08:48:18.853 +08:00 [ERR] An unhandled exception has occurred while executing the request.
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
Role -> RoleDto
User.Domain.Role -> User.Contrancts.RoleDto
   at lambda_method91(Closure, Object, RoleDto, ResolutionContext)
   at User.Application.AddHandler.AddRoleEventHandler.Handle(AddRoleEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\AddHandler\AddEventHandler.cs:line 53
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at User.Presentation.AddAdmin.AddAdminRole.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminRole.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 08:48:18.858 +08:00 [ERR] Unhandled exception occurred
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
Role -> RoleDto
User.Domain.Role -> User.Contrancts.RoleDto
   at lambda_method91(Closure, Object, RoleDto, ResolutionContext)
   at User.Application.AddHandler.AddRoleEventHandler.Handle(AddRoleEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\AddHandler\AddEventHandler.cs:line 53
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at User.Presentation.AddAdmin.AddAdminRole.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminRole.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 08:48:28.216 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 08:48:28.216 +08:00 [ERR] HTTP POST /user/add-adminrole responded 500 in 13654.2608 ms
2025-07-21 08:48:28.221 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminrole - 500 null application/json; charset=utf-8 13666.327ms
2025-07-21 08:49:00.623 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:49:00.666 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 08:49:00.670 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:49:00.673 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 08:49:00.680 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 08:49:00.689 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 08:49:00.718 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:49:00.721 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 08:49:00.723 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:49:00.724 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 08:49:00.727 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 08:49:00.729 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 08:49:00.818 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 08:49:00.833 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 08:49:00.836 +08:00 [INF] Quartz Scheduler created
2025-07-21 08:49:00.837 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 08:49:00.838 +08:00 [INF] RAMJobStore initialized.
2025-07-21 08:49:00.839 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '1799373180' initialized
2025-07-21 08:49:00.840 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 08:49:00.842 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 08:49:00.852 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 08:49:01.038 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 08:49:01.085 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 08:49:01.128 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 08:49:01.308 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 08:49:01.314 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 08:49:01.369 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_tb1oyynqz1igyfnobdqhxhdnna"
2025-07-21 08:49:01.369 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 08:49:01.371 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 08:49:01.488 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 08:49:01.489 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 08:49:01.493 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 08:49:01.605 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 08:49:01.606 +08:00 [INF] Hosting environment: Development
2025-07-21 08:49:01.607 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 08:49:01.609 +08:00 [INF] Scheduler JobScheduler_$_1799373180 started.
2025-07-21 08:49:01.610 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 08:49:02.025 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 08:49:02.220 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 203.4395ms
2025-07-21 08:49:02.237 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 08:49:02.243 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 6.4755ms
2025-07-21 08:49:02.379 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 08:49:02.416 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.6842ms
2025-07-21 08:49:02.467 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 08:49:02.488 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 21.3662ms
2025-07-21 08:49:51.032 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:49:51.080 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 08:49:51.087 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:49:51.090 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 08:49:51.100 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 08:49:51.116 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 08:49:51.154 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:49:51.158 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 08:49:51.160 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:49:51.163 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 08:49:51.166 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 08:49:51.170 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 08:49:51.244 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 08:49:51.256 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 08:49:51.258 +08:00 [INF] Quartz Scheduler created
2025-07-21 08:49:51.259 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 08:49:51.260 +08:00 [INF] RAMJobStore initialized.
2025-07-21 08:49:51.261 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '-2021708325' initialized
2025-07-21 08:49:51.262 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 08:49:51.263 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 08:49:51.271 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 08:49:51.456 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 08:49:51.496 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 08:49:51.536 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 08:49:51.706 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 08:49:51.710 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 08:49:51.764 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 08:49:51.764 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_9yiyyynqz1igbjqybdqhxhrydn"
2025-07-21 08:49:51.767 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 08:49:51.918 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 08:49:51.926 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 08:49:51.932 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 08:49:52.037 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 08:49:52.038 +08:00 [INF] Hosting environment: Development
2025-07-21 08:49:52.039 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 08:49:52.040 +08:00 [INF] Scheduler JobScheduler_$_-2021708325 started.
2025-07-21 08:49:52.041 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 08:49:52.480 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 08:49:52.655 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 182.2604ms
2025-07-21 08:49:52.671 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 08:49:52.684 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 13.2984ms
2025-07-21 08:49:52.814 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 08:49:52.852 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.8529ms
2025-07-21 08:49:52.885 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 08:49:52.911 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 25.266ms
2025-07-21 08:50:20.573 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:50:20.630 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 08:50:20.635 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:50:20.639 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 08:50:20.648 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 08:50:20.658 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 08:50:20.689 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:50:20.693 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 08:50:20.697 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:50:20.699 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 08:50:20.701 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 08:50:20.703 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 08:50:20.777 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 08:50:20.786 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 08:50:20.789 +08:00 [INF] Quartz Scheduler created
2025-07-21 08:50:20.790 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 08:50:20.791 +08:00 [INF] RAMJobStore initialized.
2025-07-21 08:50:20.792 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '-659931166' initialized
2025-07-21 08:50:20.792 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 08:50:20.793 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 08:50:20.799 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 08:50:20.955 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 08:50:20.996 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 08:50:21.044 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 08:50:21.217 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 08:50:21.223 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 08:50:21.268 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_iy7oyynqz1igyqtabdqhxhrt84"
2025-07-21 08:50:21.268 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 08:50:21.271 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 08:50:21.394 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 08:50:21.399 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 08:50:21.405 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 08:50:21.788 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 08:50:21.796 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 08:50:21.799 +08:00 [INF] Scheduler JobScheduler_$_-659931166 started.
2025-07-21 08:50:21.800 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 08:50:21.820 +08:00 [INF] Hosting environment: Development
2025-07-21 08:50:21.834 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 08:50:22.008 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 229.8712ms
2025-07-21 08:50:22.026 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 08:50:22.036 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 10.3639ms
2025-07-21 08:50:22.167 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 08:50:22.202 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.4997ms
2025-07-21 08:50:22.239 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 08:50:22.284 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 44.7128ms
2025-07-21 08:50:35.875 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminrole - null 0
2025-07-21 08:50:35.994 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminrole'
2025-07-21 08:50:36.097 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [User.].[Role] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[RoleName] = @__roleName_0
2025-07-21 08:50:36.273 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [User.].[Role] ([Id], [CreationTime], [Description], [IsDeleted], [LastModificationTime], [LastModifierUser], [RoleName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-07-21 08:50:36.338 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminrole'
2025-07-21 08:50:36.344 +08:00 [INF] HTTP POST /user/add-adminrole responded 200 in 428.5229 ms
2025-07-21 08:50:36.376 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminrole - 200 null application/json; charset=utf-8 502.3859ms
2025-07-21 08:50:44.507 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminuser - null 0
2025-07-21 08:50:44.523 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 08:50:44.816 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 08:50:44.953 +08:00 [ERR] An unhandled exception has occurred while executing the request.
FluentValidation.ValidationException: Validation failed: 
 -- Name: 'Name' 的长度必须在 8 到 20 字符，您输入了 3 字符。 Severity: Error
 -- Username: 'Username' 的长度必须在 8 到 20 字符，您输入了 5 字符。 Severity: Error
 -- Password: 密码必须同时包含字母和数字 Severity: Error
 -- Password: 'Password' 的长度必须在 8 到 20 字符，您输入了 3 字符。 Severity: Error
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 21
   at User.Presentation.AddAdmin.AddAdminUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminUser.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 08:50:45.009 +08:00 [ERR] Unhandled exception occurred
FluentValidation.ValidationException: Validation failed: 
 -- Name: 'Name' 的长度必须在 8 到 20 字符，您输入了 3 字符。 Severity: Error
 -- Username: 'Username' 的长度必须在 8 到 20 字符，您输入了 5 字符。 Severity: Error
 -- Password: 密码必须同时包含字母和数字 Severity: Error
 -- Password: 'Password' 的长度必须在 8 到 20 字符，您输入了 3 字符。 Severity: Error
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 21
   at User.Presentation.AddAdmin.AddAdminUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminUser.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 08:50:54.526 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 08:50:54.543 +08:00 [ERR] HTTP POST /user/add-adminuser responded 500 in 10022.5428 ms
2025-07-21 08:50:54.552 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminuser - 500 null application/json; charset=utf-8 10045.008ms
2025-07-21 08:51:06.971 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminuser - null 0
2025-07-21 08:51:06.983 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 08:51:07.241 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 08:51:07.373 +08:00 [ERR] An unhandled exception has occurred while executing the request.
FluentValidation.ValidationException: Validation failed: 
 -- Name: 'Name' 的长度必须在 8 到 20 字符，您输入了 3 字符。 Severity: Error
 -- Username: 'Username' 的长度必须在 8 到 20 字符，您输入了 5 字符。 Severity: Error
 -- Password: 密码必须同时包含字母和数字 Severity: Error
 -- Password: 'Password' 的长度必须在 8 到 20 字符，您输入了 3 字符。 Severity: Error
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 21
   at User.Presentation.AddAdmin.AddAdminUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminUser.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 08:51:07.398 +08:00 [ERR] Unhandled exception occurred
FluentValidation.ValidationException: Validation failed: 
 -- Name: 'Name' 的长度必须在 8 到 20 字符，您输入了 3 字符。 Severity: Error
 -- Username: 'Username' 的长度必须在 8 到 20 字符，您输入了 5 字符。 Severity: Error
 -- Password: 密码必须同时包含字母和数字 Severity: Error
 -- Password: 'Password' 的长度必须在 8 到 20 字符，您输入了 3 字符。 Severity: Error
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 21
   at User.Presentation.AddAdmin.AddAdminUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminUser.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 08:52:04.877 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 08:52:04.878 +08:00 [ERR] HTTP POST /user/add-adminuser responded 500 in 57899.2904 ms
2025-07-21 08:52:05.016 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminuser - 500 null application/json; charset=utf-8 58046.4539ms
2025-07-21 08:56:36.911 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:56:36.956 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 08:56:36.960 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:56:36.962 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 08:56:36.970 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 08:56:36.980 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 08:56:37.016 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:56:37.019 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 08:56:37.021 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:56:37.023 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 08:56:37.026 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 08:56:37.028 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 08:56:37.110 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 08:56:37.121 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 08:56:37.122 +08:00 [INF] Quartz Scheduler created
2025-07-21 08:56:37.124 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 08:56:37.125 +08:00 [INF] RAMJobStore initialized.
2025-07-21 08:56:37.127 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '856905197' initialized
2025-07-21 08:56:37.128 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 08:56:37.130 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 08:56:37.136 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 08:56:37.334 +08:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 08:56:37.397 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 08:56:37.441 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 08:56:37.586 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 08:56:37.589 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 08:56:37.637 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_4tpyyynqz1igypirbdqhxhm1no"
2025-07-21 08:56:37.637 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 08:56:37.639 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 08:56:37.743 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 08:56:37.745 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 08:56:37.749 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 08:56:37.843 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 08:56:37.845 +08:00 [INF] Hosting environment: Development
2025-07-21 08:56:37.846 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 08:56:37.846 +08:00 [INF] Scheduler JobScheduler_$_856905197 started.
2025-07-21 08:56:37.847 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 08:56:38.315 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 08:56:38.480 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 171.2123ms
2025-07-21 08:56:38.492 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 08:56:38.498 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 5.6635ms
2025-07-21 08:56:38.622 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 08:56:38.654 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.165ms
2025-07-21 08:56:38.681 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 08:56:38.702 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.5563ms
2025-07-21 08:57:28.361 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:57:28.403 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 08:57:28.409 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:57:28.411 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 08:57:28.419 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 08:57:28.430 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 08:57:28.463 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:57:28.468 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 08:57:28.473 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:57:28.475 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 08:57:28.478 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 08:57:28.480 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 08:57:28.572 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 08:57:28.583 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 08:57:28.584 +08:00 [INF] Quartz Scheduler created
2025-07-21 08:57:28.586 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 08:57:28.588 +08:00 [INF] RAMJobStore initialized.
2025-07-21 08:57:28.589 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '442219531' initialized
2025-07-21 08:57:28.590 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 08:57:28.590 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 08:57:28.597 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 08:57:28.791 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 08:57:28.834 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 08:57:28.877 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 08:57:29.062 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 08:57:29.066 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 08:57:29.122 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_xtiyyynqz1igbhqebdqhxhco8h"
2025-07-21 08:57:29.122 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 08:57:29.124 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 08:57:29.246 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 08:57:29.247 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 08:57:29.252 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 08:57:29.359 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 08:57:29.360 +08:00 [INF] Hosting environment: Development
2025-07-21 08:57:29.361 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 08:57:29.363 +08:00 [INF] Scheduler JobScheduler_$_442219531 started.
2025-07-21 08:57:29.364 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 08:57:29.870 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 08:57:30.083 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 220.6622ms
2025-07-21 08:57:30.237 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 08:57:30.237 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 08:57:30.252 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 15.6827ms
2025-07-21 08:57:30.277 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.0296ms
2025-07-21 08:57:30.342 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 08:57:30.360 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 18.4135ms
2025-07-21 08:57:40.855 +08:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:57:40.905 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 08:57:40.912 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:57:40.916 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 08:57:40.925 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 08:57:40.936 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 08:57:40.972 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:57:40.976 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 08:57:40.979 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:57:40.982 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 08:57:40.985 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 08:57:40.988 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 08:57:41.080 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 08:57:41.089 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 08:57:41.090 +08:00 [INF] Quartz Scheduler created
2025-07-21 08:57:41.092 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 08:57:41.093 +08:00 [INF] RAMJobStore initialized.
2025-07-21 08:57:41.094 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '-1371156819' initialized
2025-07-21 08:57:41.096 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 08:57:41.097 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 08:57:41.104 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 08:57:41.283 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 08:57:41.321 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 08:57:41.366 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 08:57:41.534 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 08:57:41.541 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 08:57:41.591 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_dteyyynqz1igb8pbbdqhxhcadc"
2025-07-21 08:57:41.591 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 08:57:41.593 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 08:57:41.700 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 08:57:41.702 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 08:57:41.706 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 08:57:41.798 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 08:57:41.801 +08:00 [INF] Hosting environment: Development
2025-07-21 08:57:41.801 +08:00 [INF] Scheduler JobScheduler_$_-1371156819 started.
2025-07-21 08:57:41.802 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 08:57:41.803 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 08:57:42.115 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 08:57:42.432 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 323.3124ms
2025-07-21 08:57:43.215 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 08:57:43.225 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 10.3973ms
2025-07-21 08:57:43.332 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 08:57:43.366 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.9119ms
2025-07-21 08:57:43.401 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 08:57:43.418 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 17.7868ms
2025-07-21 08:57:48.886 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminuser - null 0
2025-07-21 08:57:48.977 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 08:57:49.121 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 08:57:49.179 +08:00 [ERR] An unhandled exception has occurred while executing the request.
FluentValidation.ValidationException: Validation failed: 
 -- Password: 密码必须同时包含字母和数字 Severity: Error
 -- Password: 'Password' 的长度必须在 8 到 20 字符，您输入了 3 字符。 Severity: Error
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 21
   at User.Presentation.AddAdmin.AddAdminUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminUser.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 08:57:49.291 +08:00 [ERR] HTTP POST /user/add-adminuser responded 500 in 380.5659 ms
2025-07-21 08:57:49.310 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminuser - 500 null application/json; charset=utf-8 424.0374ms
2025-07-21 08:58:17.988 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:58:18.026 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 08:58:18.029 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:58:18.032 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 08:58:18.038 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 08:58:18.047 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 08:58:18.074 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:58:18.076 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 08:58:18.077 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:58:18.078 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 08:58:18.080 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 08:58:18.082 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 08:58:18.155 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 08:58:18.164 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 08:58:18.165 +08:00 [INF] Quartz Scheduler created
2025-07-21 08:58:18.165 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 08:58:18.166 +08:00 [INF] RAMJobStore initialized.
2025-07-21 08:58:18.167 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '953182964' initialized
2025-07-21 08:58:18.167 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 08:58:18.168 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 08:58:18.174 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 08:58:18.349 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 08:58:18.385 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 08:58:18.425 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 08:58:18.571 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 08:58:18.575 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 08:58:18.612 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 08:58:18.612 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_tohyyynqz1igyimfbdqhxhpqrb"
2025-07-21 08:58:18.615 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 08:58:18.709 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 08:58:18.710 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 08:58:18.714 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 08:58:18.881 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 08:58:18.888 +08:00 [INF] Hosting environment: Development
2025-07-21 08:58:18.889 +08:00 [INF] Scheduler JobScheduler_$_953182964 started.
2025-07-21 08:58:18.890 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 08:58:18.890 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 08:58:19.053 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 08:58:19.228 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 182.6176ms
2025-07-21 08:58:19.245 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 08:58:19.257 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 12.9613ms
2025-07-21 08:58:19.372 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 08:58:19.413 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.3502ms
2025-07-21 08:58:19.452 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 08:58:19.503 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 50.6178ms
2025-07-21 08:58:25.246 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminuser - null 0
2025-07-21 08:58:25.380 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 08:58:25.656 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 08:58:25.747 +08:00 [ERR] An unhandled exception has occurred while executing the request.
FluentValidation.ValidationException: Validation failed: 
 -- Password: 密码必须同时包含字母和数字 Severity: Error
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 21
   at User.Presentation.AddAdmin.AddAdminUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminUser.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 08:58:25.888 +08:00 [ERR] HTTP POST /user/add-adminuser responded 500 in 611.5392 ms
2025-07-21 08:58:25.925 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminuser - 500 null application/json; charset=utf-8 678.6124ms
2025-07-21 08:59:00.441 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:59:00.480 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 08:59:00.484 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:59:00.486 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 08:59:00.493 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 08:59:00.501 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 08:59:00.529 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:59:00.532 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 08:59:00.535 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 08:59:00.538 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 08:59:00.540 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 08:59:00.542 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 08:59:00.616 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 08:59:00.626 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 08:59:00.626 +08:00 [INF] Quartz Scheduler created
2025-07-21 08:59:00.626 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 08:59:00.627 +08:00 [INF] RAMJobStore initialized.
2025-07-21 08:59:00.628 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '231210612' initialized
2025-07-21 08:59:00.629 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 08:59:00.630 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 08:59:00.635 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 08:59:00.782 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 08:59:00.814 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 08:59:00.857 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 08:59:01.000 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 08:59:01.003 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 08:59:01.035 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 08:59:01.035 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_ebsoyynqz1igy9jmbdqhxhq8gm"
2025-07-21 08:59:01.036 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 08:59:01.160 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 08:59:01.161 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 08:59:01.166 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 08:59:01.261 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 08:59:01.264 +08:00 [INF] Hosting environment: Development
2025-07-21 08:59:01.264 +08:00 [INF] Scheduler JobScheduler_$_231210612 started.
2025-07-21 08:59:01.265 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 08:59:01.265 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 08:59:01.740 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 08:59:01.910 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 176.3835ms
2025-07-21 08:59:01.925 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 08:59:01.933 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 7.7655ms
2025-07-21 08:59:02.068 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 08:59:02.119 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 51.0778ms
2025-07-21 08:59:02.164 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 08:59:02.195 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.0492ms
2025-07-21 08:59:06.315 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminuser - null 0
2025-07-21 08:59:06.451 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 08:59:06.550 +08:00 [INF] Executed DbCommand (23ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username]
FROM [User.].[Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 08:59:06.571 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [User.].[Role] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[RoleName] = @__roleName_0
2025-07-21 08:59:07.127 +08:00 [ERR] Failed executing DbCommand (313ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 50), @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 20), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [User.].[Role] ([Id], [CreationTime], [Description], [IsDeleted], [LastModificationTime], [LastModifierUser], [RoleName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
INSERT INTO [User.].[Users] ([Id], [CreationTime], [Description], [Email], [IsDeleted], [LastModificationTime], [LastModifierUser], [LockoutEnd], [Name], [Password], [Phone], [RoleId], [Username])
VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-07-21 08:59:07.758 +08:00 [ERR] An exception occurred in the database while saving changes for context type 'User.Infrastructure.Database.UserDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 违反了 PRIMARY KEY 约束“PK_Role”。不能在对象“User..Role”中插入重复键。重复键值为 (37453919-208d-4f42-b421-7dcaa8631dba)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:74fd6b47-d021-4653-a3e9-4b53dadb8e57
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 违反了 PRIMARY KEY 约束“PK_Role”。不能在对象“User..Role”中插入重复键。重复键值为 (37453919-208d-4f42-b421-7dcaa8631dba)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:74fd6b47-d021-4653-a3e9-4b53dadb8e57
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-21 08:59:08.272 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 08:59:08.640 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 违反了 PRIMARY KEY 约束“PK_Role”。不能在对象“User..Role”中插入重复键。重复键值为 (37453919-208d-4f42-b421-7dcaa8631dba)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:74fd6b47-d021-4653-a3e9-4b53dadb8e57
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Infrastructure.EF.BaseDbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\BaseDbContext.cs:line 26
   at User.Application.AddHandler.AddUserEventHandler.Handle(AddUserEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\AddHandler\AddEventHandler.cs:line 33
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at User.Presentation.AddAdmin.AddAdminUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminUser.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 08:59:08.713 +08:00 [ERR] HTTP POST /user/add-adminuser responded 500 in 2351.7747 ms
2025-07-21 08:59:08.739 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminuser - 500 null application/json; charset=utf-8 2424.6176ms
2025-07-21 09:00:03.326 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:00:03.370 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 09:00:03.375 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:00:03.378 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 09:00:03.386 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 09:00:03.397 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 09:00:03.429 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:00:03.432 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 09:00:03.437 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:00:03.439 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 09:00:03.442 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 09:00:03.445 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 09:00:03.532 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 09:00:03.541 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 09:00:03.542 +08:00 [INF] Quartz Scheduler created
2025-07-21 09:00:03.543 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 09:00:03.543 +08:00 [INF] RAMJobStore initialized.
2025-07-21 09:00:03.544 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '-1569211941' initialized
2025-07-21 09:00:03.545 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 09:00:03.546 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 09:00:03.553 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 09:00:03.720 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 09:00:03.761 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 09:00:03.809 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 09:00:03.976 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 09:00:03.983 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 09:00:04.040 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_eyeyyynqz1igb9aybdqhxhxpnu"
2025-07-21 09:00:04.040 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 09:00:04.043 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 09:00:04.169 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 09:00:04.170 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 09:00:04.176 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 09:00:04.296 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 09:00:04.298 +08:00 [INF] Hosting environment: Development
2025-07-21 09:00:04.299 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 09:00:04.300 +08:00 [INF] Scheduler JobScheduler_$_-1569211941 started.
2025-07-21 09:00:04.302 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:00:04.791 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 09:00:04.980 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 195.3056ms
2025-07-21 09:00:04.995 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 09:00:05.001 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 6.5971ms
2025-07-21 09:00:05.138 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 09:00:05.176 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 38.5258ms
2025-07-21 09:00:05.217 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 09:00:05.238 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 21.1984ms
2025-07-21 09:00:10.609 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminuser - null 0
2025-07-21 09:00:10.685 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 09:00:10.773 +08:00 [INF] Executed DbCommand (40ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username]
FROM [User.].[Users] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 09:00:10.780 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [User.].[Role] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[RoleName] = @__roleName_0
2025-07-21 09:00:11.142 +08:00 [ERR] Failed executing DbCommand (207ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 50), @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 20), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [User.].[Role] ([Id], [CreationTime], [Description], [IsDeleted], [LastModificationTime], [LastModifierUser], [RoleName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
INSERT INTO [User.].[Users] ([Id], [CreationTime], [Description], [Email], [IsDeleted], [LastModificationTime], [LastModifierUser], [LockoutEnd], [Name], [Password], [Phone], [RoleId], [Username])
VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-07-21 09:00:11.758 +08:00 [ERR] An exception occurred in the database while saving changes for context type 'User.Infrastructure.Database.UserDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 违反了 PRIMARY KEY 约束“PK_Role”。不能在对象“User..Role”中插入重复键。重复键值为 (37453919-208d-4f42-b421-7dcaa8631dba)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:9845ef1d-71a2-4532-b738-425a3e43bddc
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 违反了 PRIMARY KEY 约束“PK_Role”。不能在对象“User..Role”中插入重复键。重复键值为 (37453919-208d-4f42-b421-7dcaa8631dba)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:9845ef1d-71a2-4532-b738-425a3e43bddc
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-21 09:00:12.300 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 09:00:12.647 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 违反了 PRIMARY KEY 约束“PK_Role”。不能在对象“User..Role”中插入重复键。重复键值为 (37453919-208d-4f42-b421-7dcaa8631dba)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:9845ef1d-71a2-4532-b738-425a3e43bddc
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Infrastructure.EF.BaseDbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\BaseDbContext.cs:line 26
   at User.Application.AddHandler.AddUserEventHandler.Handle(AddUserEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\AddHandler\AddEventHandler.cs:line 32
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at User.Presentation.AddAdmin.AddAdminUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminUser.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 09:00:12.695 +08:00 [ERR] HTTP POST /user/add-adminuser responded 500 in 2065.8828 ms
2025-07-21 09:00:12.711 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminuser - 500 null application/json; charset=utf-8 2102.0934ms
2025-07-21 09:00:32.142 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:08:23.384 +08:00 [INF] Executed DbCommand (321ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [Wcs.Source];
2025-07-21 09:08:23.495 +08:00 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [Wcs.Source] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-07-21 09:08:23.511 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:08:23.565 +08:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'Wcs.') IS NULL EXEC(N'CREATE SCHEMA [Wcs.];');
CREATE TABLE [Wcs.].[__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-07-21 09:08:23.568 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:08:23.578 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 09:08:23.585 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 09:08:23.595 +08:00 [INF] Applying migration '20250721010721_InitialCreate'.
2025-07-21 09:08:23.640 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.JobConfig] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(50) NULL,
    [JobType] nvarchar(50) NOT NULL,
    [TimeOut] int NOT NULL,
    [Timer] int NOT NULL,
    [IsStart] bit NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.JobConfig] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-07-21 09:08:23.645 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.Region] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(20) NOT NULL,
    [Description] nvarchar(50) NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.Region] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-07-21 09:08:23.650 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.S7NetConfig] (
    [Id] uniqueidentifier NOT NULL,
    [S7Type] int NOT NULL,
    [Solt] smallint NOT NULL,
    [Rack] smallint NOT NULL,
    [ReadTimeOut] int NOT NULL,
    [WriteTimeOut] int NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    [Ip] nvarchar(max) NOT NULL,
    [Port] int NOT NULL,
    CONSTRAINT [PK_Wcs.S7NetConfig] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-07-21 09:08:23.655 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.TaskExecuteStep] (
    [Id] uniqueidentifier NOT NULL,
    [StepIndex] int NOT NULL,
    [Description] nvarchar(50) NULL,
    [ExecuteNodePath] uniqueidentifier NULL,
    [RegionId] uniqueidentifier NULL,
    [WcsTaskType] int NOT NULL,
    [Version] rowversion NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.TaskExecuteStep] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-07-21 09:08:23.659 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.ExecuteNodePath] (
    [Id] uniqueidentifier NOT NULL,
    [CurrentDeviceType] int NOT NULL,
    [CurrentDeviceName] nvarchar(20) NOT NULL,
    [RegionId] uniqueidentifier NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.ExecuteNodePath] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Wcs.ExecuteNodePath_Wcs.Region_RegionId] FOREIGN KEY ([RegionId]) REFERENCES [Wcs.Region] ([Id])
);
2025-07-21 09:08:23.664 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.S7EntityItem] (
    [Id] uniqueidentifier NOT NULL,
    [S7DataType] int NOT NULL,
    [DataOffset] int NOT NULL,
    [BitOffset] int NULL,
    [S7BlockType] int NOT NULL,
    [Index] int NOT NULL,
    [Description] nvarchar(50) NULL,
    [Name] nvarchar(20) NULL,
    [ArrtypeLength] int NULL,
    [DeviceId] uniqueidentifier NULL,
    [NetGuid] uniqueidentifier NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.S7EntityItem] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Wcs.S7EntityItem_Wcs.S7NetConfig_NetGuid] FOREIGN KEY ([NetGuid]) REFERENCES [Wcs.S7NetConfig] ([Id])
);
2025-07-21 09:08:23.670 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.WcsTask] (
    [Id] uniqueidentifier NOT NULL,
    [TaskCode] nvarchar(50) NULL,
    [SerialNumber] int NOT NULL,
    [TaskType] int NOT NULL,
    [TaskStatus] int NOT NULL,
    [Description] nvarchar(max) NULL,
    [GetLocation_GetTunnel] nvarchar(10) NULL,
    [GetLocation_GetFloor] nvarchar(10) NULL,
    [GetLocation_GetRow] nvarchar(10) NULL,
    [GetLocation_GetColumn] nvarchar(10) NULL,
    [GetLocation_GetDepth] nvarchar(10) NULL,
    [PutLocation_PutTunnel] nvarchar(10) NULL,
    [PutLocation_PutFloor] nvarchar(10) NULL,
    [PutLocation_PutRow] nvarchar(10) NULL,
    [PutLocation_PutColumn] nvarchar(10) NULL,
    [PutLocation_PutDepth] nvarchar(10) NULL,
    [IsRead] bit NOT NULL,
    [DeviceId] uniqueidentifier NULL,
    [RegionId] uniqueidentifier NULL,
    [TaskExecuteStepId] uniqueidentifier NOT NULL,
    [Version] rowversion NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.WcsTask] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Wcs.WcsTask_Wcs.TaskExecuteStep_TaskExecuteStepId] FOREIGN KEY ([TaskExecuteStepId]) REFERENCES [Wcs.TaskExecuteStep] ([Id]) ON DELETE CASCADE
);
2025-07-21 09:08:23.674 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.ExecuteNodePath_RegionId] ON [Wcs.ExecuteNodePath] ([RegionId]) WHERE [RegionId] IS NOT NULL;
2025-07-21 09:08:23.677 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.JobConfig_Name] ON [Wcs.JobConfig] ([Name]);
2025-07-21 09:08:23.680 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.Region_Code] ON [Wcs.Region] ([Code]);
2025-07-21 09:08:23.684 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Wcs.S7EntityItem_NetGuid] ON [Wcs.S7EntityItem] ([NetGuid]);
2025-07-21 09:08:23.687 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.WcsTask_SerialNumber] ON [Wcs.WcsTask] ([SerialNumber]);
2025-07-21 09:08:23.690 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.WcsTask_TaskCode] ON [Wcs.WcsTask] ([TaskCode]) WHERE [TaskCode] IS NOT NULL;
2025-07-21 09:08:23.693 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Wcs.WcsTask_TaskExecuteStepId] ON [Wcs.WcsTask] ([TaskExecuteStepId]);
2025-07-21 09:08:23.697 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [Wcs.].[__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250721010721_InitialCreate', N'8.0.0');
2025-07-21 09:08:23.741 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:08:23.745 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 09:08:23.747 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:08:23.754 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'User.') IS NULL EXEC(N'CREATE SCHEMA [User.];');
CREATE TABLE [User.].[__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-07-21 09:08:23.756 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:08:23.759 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User.].[__EFMigrationsHistory]');
2025-07-21 09:08:23.762 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 09:08:23.764 +08:00 [INF] Applying migration '20250721010636_InitialCreate'.
2025-07-21 09:08:23.772 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'User.') IS NULL EXEC(N'CREATE SCHEMA [User.];');
2025-07-21 09:08:23.778 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [User.].[Role] (
    [Id] uniqueidentifier NOT NULL,
    [RoleName] nvarchar(50) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-07-21 09:08:23.785 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [User.].[User] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [Phone] nvarchar(max) NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(20) NOT NULL,
    [LockoutEnd] datetimeoffset NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_User] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_User_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [User.].[Role] ([Id]) ON DELETE CASCADE
);
2025-07-21 09:08:23.789 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE NONCLUSTERED INDEX [IX_Role_RoleName] ON [User.].[Role] ([RoleName]);
2025-07-21 09:08:23.792 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_User_RoleId] ON [User.].[User] ([RoleId]);
2025-07-21 09:08:23.794 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE NONCLUSTERED INDEX [IX_User_Username] ON [User.].[User] ([Username]);
2025-07-21 09:08:23.799 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [User.].[__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250721010636_InitialCreate', N'8.0.0');
2025-07-21 09:08:23.890 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 09:08:23.899 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 09:08:23.900 +08:00 [INF] Quartz Scheduler created
2025-07-21 09:08:23.901 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 09:08:23.902 +08:00 [INF] RAMJobStore initialized.
2025-07-21 09:08:23.903 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '248283369' initialized
2025-07-21 09:08:23.904 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 09:08:23.905 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 09:08:23.916 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 09:08:24.123 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 09:08:24.169 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 09:08:24.231 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 09:08:24.418 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 09:08:24.422 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 09:08:24.481 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_cytyyynqz1igb47kbdqhxhazr5"
2025-07-21 09:08:24.481 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 09:08:24.485 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 09:08:24.615 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 09:08:24.617 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 09:08:24.626 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 09:08:24.794 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 09:08:24.795 +08:00 [INF] Hosting environment: Development
2025-07-21 09:08:24.796 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 09:08:24.797 +08:00 [INF] Scheduler JobScheduler_$_248283369 started.
2025-07-21 09:08:24.799 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:08:26.059 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 09:08:26.241 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 190.0445ms
2025-07-21 09:08:26.392 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 09:08:26.392 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 09:08:26.398 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 6.2469ms
2025-07-21 09:08:26.426 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.4149ms
2025-07-21 09:08:26.475 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 09:08:26.492 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 17.3203ms
2025-07-21 09:08:30.588 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminrole - null 0
2025-07-21 09:08:30.661 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminrole'
2025-07-21 09:08:30.728 +08:00 [INF] Executed DbCommand (17ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [User.].[Role] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[RoleName] = @__roleName_0
2025-07-21 09:08:30.854 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [User.].[Role] ([Id], [CreationTime], [Description], [IsDeleted], [LastModificationTime], [LastModifierUser], [RoleName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-07-21 09:08:30.876 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminrole'
2025-07-21 09:08:30.880 +08:00 [INF] HTTP POST /user/add-adminrole responded 200 in 269.0053 ms
2025-07-21 09:08:30.896 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminrole - 200 null application/json; charset=utf-8 308.0291ms
2025-07-21 09:08:51.227 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:10:39.110 +08:00 [INF] Executed DbCommand (463ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [Wcs.Source];
2025-07-21 09:10:39.257 +08:00 [INF] Executed DbCommand (113ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [Wcs.Source] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-07-21 09:10:39.274 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:10:39.320 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'Wcs.') IS NULL EXEC(N'CREATE SCHEMA [Wcs.];');
CREATE TABLE [Wcs.].[__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-07-21 09:10:39.323 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:10:39.333 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 09:10:39.339 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 09:10:39.349 +08:00 [INF] Applying migration '20250721011004_InitialCreate'.
2025-07-21 09:10:39.394 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.JobConfig] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(50) NOT NULL,
    [Description] nvarchar(50) NULL,
    [JobType] nvarchar(50) NOT NULL,
    [TimeOut] int NOT NULL,
    [Timer] int NOT NULL,
    [IsStart] bit NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.JobConfig] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-07-21 09:10:39.399 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.Region] (
    [Id] uniqueidentifier NOT NULL,
    [Code] nvarchar(20) NOT NULL,
    [Description] nvarchar(50) NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.Region] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-07-21 09:10:39.403 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.S7NetConfig] (
    [Id] uniqueidentifier NOT NULL,
    [S7Type] int NOT NULL,
    [Solt] smallint NOT NULL,
    [Rack] smallint NOT NULL,
    [ReadTimeOut] int NOT NULL,
    [WriteTimeOut] int NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    [Ip] nvarchar(max) NOT NULL,
    [Port] int NOT NULL,
    CONSTRAINT [PK_Wcs.S7NetConfig] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-07-21 09:10:39.407 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.TaskExecuteStep] (
    [Id] uniqueidentifier NOT NULL,
    [StepIndex] int NOT NULL,
    [Description] nvarchar(50) NULL,
    [ExecuteNodePath] uniqueidentifier NULL,
    [RegionId] uniqueidentifier NULL,
    [WcsTaskType] int NOT NULL,
    [Version] rowversion NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.TaskExecuteStep] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-07-21 09:10:39.412 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.ExecuteNodePath] (
    [Id] uniqueidentifier NOT NULL,
    [CurrentDeviceType] int NOT NULL,
    [CurrentDeviceName] nvarchar(20) NOT NULL,
    [RegionId] uniqueidentifier NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.ExecuteNodePath] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Wcs.ExecuteNodePath_Wcs.Region_RegionId] FOREIGN KEY ([RegionId]) REFERENCES [Wcs.Region] ([Id])
);
2025-07-21 09:10:39.420 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.S7EntityItem] (
    [Id] uniqueidentifier NOT NULL,
    [S7DataType] int NOT NULL,
    [DataOffset] int NOT NULL,
    [BitOffset] int NULL,
    [S7BlockType] int NOT NULL,
    [Index] int NOT NULL,
    [Description] nvarchar(50) NULL,
    [Name] nvarchar(20) NULL,
    [ArrtypeLength] int NULL,
    [DeviceId] uniqueidentifier NULL,
    [NetGuid] uniqueidentifier NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.S7EntityItem] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Wcs.S7EntityItem_Wcs.S7NetConfig_NetGuid] FOREIGN KEY ([NetGuid]) REFERENCES [Wcs.S7NetConfig] ([Id])
);
2025-07-21 09:10:39.428 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Wcs.WcsTask] (
    [Id] uniqueidentifier NOT NULL,
    [TaskCode] nvarchar(50) NULL,
    [SerialNumber] int NOT NULL,
    [TaskType] int NOT NULL,
    [TaskStatus] int NOT NULL,
    [Description] nvarchar(max) NULL,
    [GetLocation_GetTunnel] nvarchar(10) NULL,
    [GetLocation_GetFloor] nvarchar(10) NULL,
    [GetLocation_GetRow] nvarchar(10) NULL,
    [GetLocation_GetColumn] nvarchar(10) NULL,
    [GetLocation_GetDepth] nvarchar(10) NULL,
    [PutLocation_PutTunnel] nvarchar(10) NULL,
    [PutLocation_PutFloor] nvarchar(10) NULL,
    [PutLocation_PutRow] nvarchar(10) NULL,
    [PutLocation_PutColumn] nvarchar(10) NULL,
    [PutLocation_PutDepth] nvarchar(10) NULL,
    [IsRead] bit NOT NULL,
    [DeviceId] uniqueidentifier NULL,
    [RegionId] uniqueidentifier NULL,
    [TaskExecuteStepId] uniqueidentifier NOT NULL,
    [Version] rowversion NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Wcs.WcsTask] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_Wcs.WcsTask_Wcs.TaskExecuteStep_TaskExecuteStepId] FOREIGN KEY ([TaskExecuteStepId]) REFERENCES [Wcs.TaskExecuteStep] ([Id]) ON DELETE CASCADE
);
2025-07-21 09:10:39.433 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.ExecuteNodePath_RegionId] ON [Wcs.ExecuteNodePath] ([RegionId]) WHERE [RegionId] IS NOT NULL;
2025-07-21 09:10:39.436 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.JobConfig_Name] ON [Wcs.JobConfig] ([Name]);
2025-07-21 09:10:39.439 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.Region_Code] ON [Wcs.Region] ([Code]);
2025-07-21 09:10:39.443 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Wcs.S7EntityItem_NetGuid] ON [Wcs.S7EntityItem] ([NetGuid]);
2025-07-21 09:10:39.448 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.WcsTask_SerialNumber] ON [Wcs.WcsTask] ([SerialNumber]);
2025-07-21 09:10:39.452 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Wcs.WcsTask_TaskCode] ON [Wcs.WcsTask] ([TaskCode]) WHERE [TaskCode] IS NOT NULL;
2025-07-21 09:10:39.457 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Wcs.WcsTask_TaskExecuteStepId] ON [Wcs.WcsTask] ([TaskExecuteStepId]);
2025-07-21 09:10:39.478 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [Wcs.].[__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250721011004_InitialCreate', N'8.0.0');
2025-07-21 09:10:39.532 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:10:39.536 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 09:10:39.538 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:10:39.546 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'User') IS NULL EXEC(N'CREATE SCHEMA [User];');
CREATE TABLE [User].[__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-07-21 09:10:39.548 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:10:39.551 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 09:10:39.554 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 09:10:39.556 +08:00 [INF] Applying migration '20250721011027_InitialCreate'.
2025-07-21 09:10:39.565 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'User') IS NULL EXEC(N'CREATE SCHEMA [User];');
2025-07-21 09:10:39.571 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [User].[Role] (
    [Id] uniqueidentifier NOT NULL,
    [RoleName] nvarchar(50) NOT NULL,
    [Description] nvarchar(max) NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY NONCLUSTERED ([Id])
);
2025-07-21 09:10:39.577 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [User].[User] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [Phone] nvarchar(max) NULL,
    [Username] nvarchar(50) NOT NULL,
    [Password] nvarchar(20) NOT NULL,
    [LockoutEnd] datetimeoffset NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [CreationTime] datetime2 NOT NULL,
    [LastModifierUser] nvarchar(max) NULL,
    [LastModificationTime] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_User] PRIMARY KEY NONCLUSTERED ([Id]),
    CONSTRAINT [FK_User_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [User].[Role] ([Id]) ON DELETE CASCADE
);
2025-07-21 09:10:39.582 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE NONCLUSTERED INDEX [IX_Role_RoleName] ON [User].[Role] ([RoleName]);
2025-07-21 09:10:39.586 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_User_RoleId] ON [User].[User] ([RoleId]);
2025-07-21 09:10:39.589 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE NONCLUSTERED INDEX [IX_User_Username] ON [User].[User] ([Username]);
2025-07-21 09:10:39.594 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [User].[__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250721011027_InitialCreate', N'8.0.0');
2025-07-21 09:10:39.679 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 09:10:39.691 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 09:10:39.692 +08:00 [INF] Quartz Scheduler created
2025-07-21 09:10:39.693 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 09:10:39.694 +08:00 [INF] RAMJobStore initialized.
2025-07-21 09:10:39.695 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '836581607' initialized
2025-07-21 09:10:39.696 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 09:10:39.697 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 09:10:39.707 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 09:10:39.894 +08:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 09:10:39.943 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 09:10:39.999 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 09:10:40.183 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 09:10:40.187 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 09:10:40.243 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 09:10:40.243 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_nykyyynqz1igb3hcbdqhxh5ere"
2025-07-21 09:10:40.246 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 09:10:40.376 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 09:10:40.377 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 09:10:40.383 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 09:10:40.642 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 09:10:40.643 +08:00 [INF] Hosting environment: Development
2025-07-21 09:10:40.644 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 09:10:40.645 +08:00 [INF] Scheduler JobScheduler_$_836581607 started.
2025-07-21 09:10:40.646 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:10:41.162 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 09:10:41.367 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 210.8747ms
2025-07-21 09:10:41.378 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 09:10:41.387 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 9.5577ms
2025-07-21 09:10:41.523 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 09:10:41.575 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 51.9788ms
2025-07-21 09:10:41.617 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 09:10:41.633 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 17.0496ms
2025-07-21 09:10:45.154 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminrole - null 0
2025-07-21 09:10:45.221 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminrole'
2025-07-21 09:10:45.295 +08:00 [INF] Executed DbCommand (20ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [User].[Role] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[RoleName] = @__roleName_0
2025-07-21 09:10:45.401 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [User].[Role] ([Id], [CreationTime], [Description], [IsDeleted], [LastModificationTime], [LastModifierUser], [RoleName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-07-21 09:10:45.425 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminrole'
2025-07-21 09:10:45.429 +08:00 [INF] HTTP POST /user/add-adminrole responded 200 in 254.8432 ms
2025-07-21 09:10:45.445 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminrole - 200 null application/json; charset=utf-8 291.9579ms
2025-07-21 09:10:51.078 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminuser - null 0
2025-07-21 09:10:51.095 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 09:10:51.116 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username]
FROM [User].[User] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 09:10:51.127 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [User].[Role] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[RoleName] = @__roleName_0
2025-07-21 09:10:51.421 +08:00 [ERR] Failed executing DbCommand (237ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 50), @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 20), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [User].[Role] ([Id], [CreationTime], [Description], [IsDeleted], [LastModificationTime], [LastModifierUser], [RoleName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
INSERT INTO [User].[User] ([Id], [CreationTime], [Description], [Email], [IsDeleted], [LastModificationTime], [LastModifierUser], [LockoutEnd], [Name], [Password], [Phone], [RoleId], [Username])
VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-07-21 09:10:51.938 +08:00 [ERR] An exception occurred in the database while saving changes for context type 'User.Infrastructure.Database.UserDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 违反了 PRIMARY KEY 约束“PK_Role”。不能在对象“User.Role”中插入重复键。重复键值为 (0ae0a9df-2cdc-44c4-9c5c-a45793c57f3d)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:da35fd84-5424-40dd-94ec-b32e637f7673
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 违反了 PRIMARY KEY 约束“PK_Role”。不能在对象“User.Role”中插入重复键。重复键值为 (0ae0a9df-2cdc-44c4-9c5c-a45793c57f3d)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:da35fd84-5424-40dd-94ec-b32e637f7673
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-21 09:10:52.493 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 09:10:52.736 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 违反了 PRIMARY KEY 约束“PK_Role”。不能在对象“User.Role”中插入重复键。重复键值为 (0ae0a9df-2cdc-44c4-9c5c-a45793c57f3d)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:da35fd84-5424-40dd-94ec-b32e637f7673
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Infrastructure.EF.BaseDbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\BaseDbContext.cs:line 26
   at User.Application.AddHandler.AddUserEventHandler.Handle(AddUserEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\AddHandler\AddEventHandler.cs:line 32
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at User.Presentation.AddAdmin.AddAdminUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminUser.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 09:10:52.816 +08:00 [ERR] HTTP POST /user/add-adminuser responded 500 in 1721.4547 ms
2025-07-21 09:10:52.849 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminuser - 500 null application/json; charset=utf-8 1772.395ms
2025-07-21 09:11:04.210 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:11:27.332 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:11:40.805 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminuser - null 0
2025-07-21 09:11:40.813 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 09:11:40.819 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username]
FROM [User].[User] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 09:11:40.823 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [User].[Role] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[RoleName] = @__roleName_0
2025-07-21 09:12:04.731 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:12:04.829 +08:00 [ERR] Failed executing DbCommand (96ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 50), @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 20), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [User].[Role] ([Id], [CreationTime], [Description], [IsDeleted], [LastModificationTime], [LastModifierUser], [RoleName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
INSERT INTO [User].[User] ([Id], [CreationTime], [Description], [Email], [IsDeleted], [LastModificationTime], [LastModifierUser], [LockoutEnd], [Name], [Password], [Phone], [RoleId], [Username])
VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-07-21 09:12:05.082 +08:00 [ERR] An exception occurred in the database while saving changes for context type 'User.Infrastructure.Database.UserDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 违反了 PRIMARY KEY 约束“PK_Role”。不能在对象“User.Role”中插入重复键。重复键值为 (0ae0a9df-2cdc-44c4-9c5c-a45793c57f3d)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:da35fd84-5424-40dd-94ec-b32e637f7673
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 违反了 PRIMARY KEY 约束“PK_Role”。不能在对象“User.Role”中插入重复键。重复键值为 (0ae0a9df-2cdc-44c4-9c5c-a45793c57f3d)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:da35fd84-5424-40dd-94ec-b32e637f7673
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-21 09:12:05.402 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 09:12:05.495 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 违反了 PRIMARY KEY 约束“PK_Role”。不能在对象“User.Role”中插入重复键。重复键值为 (0ae0a9df-2cdc-44c4-9c5c-a45793c57f3d)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:da35fd84-5424-40dd-94ec-b32e637f7673
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Infrastructure.EF.BaseDbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\BaseDbContext.cs:line 26
   at User.Application.AddHandler.AddUserEventHandler.Handle(AddUserEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\AddHandler\AddEventHandler.cs:line 32
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at User.Presentation.AddAdmin.AddAdminUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminUser.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 09:12:25.549 +08:00 [ERR] HTTP POST /user/add-adminuser responded 500 in 44736.8034 ms
2025-07-21 09:12:25.554 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminuser - 500 null application/json; charset=utf-8 44749.5704ms
2025-07-21 09:12:28.660 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminuser - null 0
2025-07-21 09:12:28.668 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 09:12:28.681 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username]
FROM [User].[User] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 09:12:28.689 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [User].[Role] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[RoleName] = @__roleName_0
2025-07-21 09:12:58.407 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:13:00.414 +08:00 [ERR] Failed executing DbCommand (86ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 50), @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 20), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [User].[Role] ([Id], [CreationTime], [Description], [IsDeleted], [LastModificationTime], [LastModifierUser], [RoleName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
INSERT INTO [User].[User] ([Id], [CreationTime], [Description], [Email], [IsDeleted], [LastModificationTime], [LastModifierUser], [LockoutEnd], [Name], [Password], [Phone], [RoleId], [Username])
VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-07-21 09:13:00.592 +08:00 [ERR] An exception occurred in the database while saving changes for context type 'User.Infrastructure.Database.UserDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 违反了 PRIMARY KEY 约束“PK_Role”。不能在对象“User.Role”中插入重复键。重复键值为 (0ae0a9df-2cdc-44c4-9c5c-a45793c57f3d)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:da35fd84-5424-40dd-94ec-b32e637f7673
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 违反了 PRIMARY KEY 约束“PK_Role”。不能在对象“User.Role”中插入重复键。重复键值为 (0ae0a9df-2cdc-44c4-9c5c-a45793c57f3d)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:da35fd84-5424-40dd-94ec-b32e637f7673
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-21 09:13:00.800 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 09:13:00.878 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 违反了 PRIMARY KEY 约束“PK_Role”。不能在对象“User.Role”中插入重复键。重复键值为 (0ae0a9df-2cdc-44c4-9c5c-a45793c57f3d)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:da35fd84-5424-40dd-94ec-b32e637f7673
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Infrastructure.EF.BaseDbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\BaseDbContext.cs:line 26
   at User.Application.AddHandler.AddUserEventHandler.Handle(AddUserEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\AddHandler\AddEventHandler.cs:line 32
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at User.Presentation.AddAdmin.AddAdminUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminUser.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 09:15:22.269 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:15:22.270 +08:00 [ERR] HTTP POST /user/add-adminuser responded 500 in 173602.3701 ms
2025-07-21 09:15:22.326 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminuser - 500 null application/json; charset=utf-8 173666.8278ms
2025-07-21 09:15:34.916 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminuser - null 0
2025-07-21 09:15:34.930 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 09:15:34.938 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username]
FROM [User].[User] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 09:15:34.947 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [User].[Role] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[RoleName] = @__roleName_0
2025-07-21 09:15:37.406 +08:00 [ERR] Failed executing DbCommand (75ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 50), @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime2), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = DateTimeOffset), @p15='?' (Size = 4000), @p16='?' (Size = 20), @p17='?' (Size = 4000), @p18='?' (DbType = Guid), @p19='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [User].[Role] ([Id], [CreationTime], [Description], [IsDeleted], [LastModificationTime], [LastModifierUser], [RoleName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
INSERT INTO [User].[User] ([Id], [CreationTime], [Description], [Email], [IsDeleted], [LastModificationTime], [LastModifierUser], [LockoutEnd], [Name], [Password], [Phone], [RoleId], [Username])
VALUES (@p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19);
2025-07-21 09:15:37.710 +08:00 [ERR] An exception occurred in the database while saving changes for context type 'User.Infrastructure.Database.UserDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 违反了 PRIMARY KEY 约束“PK_Role”。不能在对象“User.Role”中插入重复键。重复键值为 (0ae0a9df-2cdc-44c4-9c5c-a45793c57f3d)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:da35fd84-5424-40dd-94ec-b32e637f7673
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 违反了 PRIMARY KEY 约束“PK_Role”。不能在对象“User.Role”中插入重复键。重复键值为 (0ae0a9df-2cdc-44c4-9c5c-a45793c57f3d)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:da35fd84-5424-40dd-94ec-b32e637f7673
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-21 09:15:37.967 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 09:15:38.049 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 违反了 PRIMARY KEY 约束“PK_Role”。不能在对象“User.Role”中插入重复键。重复键值为 (0ae0a9df-2cdc-44c4-9c5c-a45793c57f3d)。
语句已终止。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:da35fd84-5424-40dd-94ec-b32e637f7673
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Common.Infrastructure.EF.BaseDbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\EF\BaseDbContext.cs:line 26
   at User.Application.AddHandler.AddUserEventHandler.Handle(AddUserEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\AddHandler\AddEventHandler.cs:line 32
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at User.Presentation.AddAdmin.AddAdminUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminUser.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 09:18:06.848 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:18:06.900 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 09:18:06.904 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:18:06.906 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 09:18:06.914 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 09:18:06.923 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 09:18:06.959 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:18:06.962 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 09:18:06.965 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:18:06.967 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 09:18:06.973 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 09:18:06.975 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 09:18:07.062 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 09:18:07.071 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 09:18:07.072 +08:00 [INF] Quartz Scheduler created
2025-07-21 09:18:07.073 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 09:18:07.074 +08:00 [INF] RAMJobStore initialized.
2025-07-21 09:18:07.077 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '-277251333' initialized
2025-07-21 09:18:07.078 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 09:18:07.078 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 09:18:07.086 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 09:18:07.272 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 09:18:07.310 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 09:18:07.354 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 09:18:07.525 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 09:18:07.528 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 09:18:07.578 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_1tzoyynqz1igb879bdqhx7dubc"
2025-07-21 09:18:07.578 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 09:18:07.581 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 09:18:07.697 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 09:18:07.698 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 09:18:07.702 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 09:18:07.816 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 09:18:07.817 +08:00 [INF] Hosting environment: Development
2025-07-21 09:18:07.818 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 09:18:07.819 +08:00 [INF] Scheduler JobScheduler_$_-277251333 started.
2025-07-21 09:18:07.820 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:18:08.090 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 09:18:08.257 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 174.7276ms
2025-07-21 09:18:08.413 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 09:18:08.413 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 09:18:08.426 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 13.8746ms
2025-07-21 09:18:08.449 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.9532ms
2025-07-21 09:18:08.489 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 09:18:08.502 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 14.2134ms
2025-07-21 09:18:22.688 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminuser - null 0
2025-07-21 09:18:22.758 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 09:18:22.817 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username]
FROM [User].[User] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 09:18:22.827 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [User].[Role] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[RoleName] = @__roleName_0
2025-07-21 09:18:29.500 +08:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 4000), @p9='?' (Size = 20), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [User].[User] ([Id], [CreationTime], [Description], [Email], [IsDeleted], [LastModificationTime], [LastModifierUser], [LockoutEnd], [Name], [Password], [Phone], [RoleId], [Username])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-07-21 09:18:32.452 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 09:18:32.460 +08:00 [INF] HTTP POST /user/add-adminuser responded 200 in 9751.5209 ms
2025-07-21 09:18:32.471 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminuser - 200 null application/json; charset=utf-8 9782.8883ms
2025-07-21 09:18:34.478 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:18:59.036 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:19:22.266 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:19:48.243 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:20:11.673 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:20:35.613 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:21:01.753 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:21:29.076 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:21:53.585 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:22:44.864 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:22:44.913 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 09:22:44.920 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:22:44.922 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 09:22:44.931 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 09:22:44.940 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 09:22:44.974 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:22:44.976 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 09:22:44.978 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:22:44.980 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 09:22:44.984 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 09:22:44.985 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 09:22:45.070 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 09:22:45.081 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 09:22:45.082 +08:00 [INF] Quartz Scheduler created
2025-07-21 09:22:45.083 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 09:22:45.084 +08:00 [INF] RAMJobStore initialized.
2025-07-21 09:22:45.084 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '-1165322467' initialized
2025-07-21 09:22:45.085 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 09:22:45.086 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 09:22:45.092 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 09:22:45.279 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 09:22:45.318 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 09:22:45.368 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 09:22:45.555 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 09:22:45.559 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 09:22:45.615 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 09:22:45.615 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_4troyynqz1igyy7nbdqhx7ea8b"
2025-07-21 09:22:45.617 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 09:22:45.758 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 09:22:45.759 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 09:22:45.764 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 09:22:46.052 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 09:22:46.076 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 09:22:46.077 +08:00 [INF] Hosting environment: Development
2025-07-21 09:22:46.078 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 09:22:46.082 +08:00 [INF] Scheduler JobScheduler_$_-1165322467 started.
2025-07-21 09:22:46.083 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:22:46.243 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 199.248ms
2025-07-21 09:22:46.259 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 09:22:46.266 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 6.7936ms
2025-07-21 09:22:46.396 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 09:22:46.427 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.8266ms
2025-07-21 09:22:46.463 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 09:22:46.477 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 14.3623ms
2025-07-21 09:22:51.257 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminuser - null 0
2025-07-21 09:22:51.356 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 09:22:51.425 +08:00 [INF] Executed DbCommand (25ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username]
FROM [User].[User] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 09:22:51.437 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [User].[Role] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[RoleName] = @__roleName_0
2025-07-21 09:22:51.551 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 4000), @p9='?' (Size = 20), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [User].[User] ([Id], [CreationTime], [Description], [Email], [IsDeleted], [LastModificationTime], [LastModifierUser], [LockoutEnd], [Name], [Password], [Phone], [RoleId], [Username])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-07-21 09:22:51.576 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 09:22:51.580 +08:00 [INF] HTTP POST /user/add-adminuser responded 200 in 286.1866 ms
2025-07-21 09:22:51.597 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminuser - 200 null application/json; charset=utf-8 339.4795ms
2025-07-21 09:23:14.291 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:23:40.607 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:24:09.734 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:24:37.433 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:25:03.170 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:25:28.965 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:25:53.238 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:26:22.196 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:26:46.893 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:27:15.547 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:27:43.254 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:28:12.773 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:28:37.509 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:29:05.070 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:29:33.644 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:30:01.015 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:30:25.933 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:30:53.553 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:31:21.999 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:31:49.392 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:32:17.126 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:32:41.039 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:33:10.315 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:33:35.334 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:33:59.691 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:34:22.843 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:34:46.564 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:35:13.326 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:35:37.492 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:36:03.690 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:36:29.582 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:36:55.826 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:37:22.753 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:37:48.674 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:38:15.644 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:38:40.737 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:39:04.798 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:39:28.501 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:39:58.261 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:40:24.275 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:40:48.595 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:41:15.698 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:41:45.077 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:42:09.124 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:42:35.400 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:43:00.404 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:43:26.455 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:43:56.361 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:44:21.590 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:44:46.813 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:45:15.822 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:45:45.160 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:46:11.094 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:46:36.492 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:47:05.490 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:47:32.776 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:47:59.411 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:48:22.843 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:48:51.283 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:49:18.426 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:49:41.829 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:50:07.895 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:50:35.887 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:50:59.612 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:51:27.909 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:51:55.838 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:52:23.455 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:52:52.906 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:53:20.911 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:53:48.705 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:54:17.951 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:54:41.076 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:55:08.353 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:55:32.223 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:56:00.935 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:56:28.107 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:56:54.976 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:57:21.750 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:57:54.430 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:57:54.473 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 09:57:54.477 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:57:54.479 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 09:57:54.488 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 09:57:54.497 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 09:57:54.529 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:57:54.532 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 09:57:54.536 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:57:54.538 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 09:57:54.542 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 09:57:54.544 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 09:57:54.626 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 09:57:54.636 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 09:57:54.638 +08:00 [INF] Quartz Scheduler created
2025-07-21 09:57:54.639 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 09:57:54.640 +08:00 [INF] RAMJobStore initialized.
2025-07-21 09:57:54.642 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '1349196232' initialized
2025-07-21 09:57:54.644 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 09:57:54.645 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 09:57:54.653 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 09:57:54.832 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 09:57:54.870 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 09:57:54.915 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 09:57:55.098 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 09:57:55.104 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 09:57:55.155 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_7tayyynqz1igbdnubdqhx6onnr"
2025-07-21 09:57:55.155 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 09:57:55.157 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 09:57:55.299 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 09:57:55.300 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 09:57:55.306 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 09:57:55.667 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 09:57:55.677 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 09:57:55.679 +08:00 [INF] Hosting environment: Development
2025-07-21 09:57:55.681 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 09:57:55.685 +08:00 [INF] Scheduler JobScheduler_$_1349196232 started.
2025-07-21 09:57:55.688 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:57:55.853 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 196.5739ms
2025-07-21 09:57:55.869 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 09:57:55.876 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 6.3093ms
2025-07-21 09:57:55.997 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 09:57:56.032 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.9092ms
2025-07-21 09:57:56.081 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 09:57:56.093 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12.7292ms
2025-07-21 09:58:10.980 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/user-login - application/json 46
2025-07-21 09:58:11.057 +08:00 [INF] Executing endpoint 'HTTP: POST user/user-login'
2025-07-21 09:58:11.304 +08:00 [INF] Executed endpoint 'HTTP: POST user/user-login'
2025-07-21 09:58:11.357 +08:00 [ERR] An unhandled exception has occurred while executing the request.
FluentValidation.ValidationException: Validation failed: 
 -- Username: 'Username' 的长度必须在 8 到 20 字符，您输入了 5 字符。 Severity: Error
 -- Password: 'Password' 的长度必须在 8 到 20 字符，您输入了 3 字符。 Severity: Error
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 21
   at User.Presentation.Login.Login.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\Login\Login.cs:line 20
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfString>g__ExecuteAwaited|134_0(Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 09:58:22.495 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:58:22.510 +08:00 [ERR] HTTP POST /user/user-login responded 500 in 11505.6943 ms
2025-07-21 09:58:22.523 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/user-login - 500 null application/json; charset=utf-8 11542.7969ms
2025-07-21 09:58:46.290 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:58:46.341 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 09:58:46.346 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:58:46.351 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 09:58:46.368 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 09:58:46.382 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 09:58:46.416 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:58:46.423 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 09:58:46.427 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 09:58:46.430 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 09:58:46.435 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 09:58:46.438 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 09:58:46.529 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 09:58:46.539 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 09:58:46.540 +08:00 [INF] Quartz Scheduler created
2025-07-21 09:58:46.542 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 09:58:46.543 +08:00 [INF] RAMJobStore initialized.
2025-07-21 09:58:46.544 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '1109108848' initialized
2025-07-21 09:58:46.546 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 09:58:46.548 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 09:58:46.556 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 09:58:46.751 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 09:58:46.805 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 09:58:46.849 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 09:58:47.026 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 09:58:47.031 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 09:58:47.083 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_7bmoyynqz1igb9ajbdqhx6tbb3"
2025-07-21 09:58:47.083 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 09:58:47.086 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 09:58:47.230 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 09:58:47.233 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 09:58:47.242 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 09:58:47.367 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 09:58:47.372 +08:00 [INF] Scheduler JobScheduler_$_1109108848 started.
2025-07-21 09:58:47.373 +08:00 [INF] Hosting environment: Development
2025-07-21 09:58:47.374 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:58:47.379 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 09:58:47.969 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 09:58:48.171 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 208.0531ms
2025-07-21 09:58:48.179 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 09:58:48.197 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 17.7657ms
2025-07-21 09:58:48.313 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 09:58:48.346 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.0201ms
2025-07-21 09:58:48.401 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 09:58:48.421 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.9158ms
2025-07-21 09:58:57.388 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/user-login - application/json 46
2025-07-21 09:58:57.480 +08:00 [INF] Executing endpoint 'HTTP: POST user/user-login'
2025-07-21 09:58:57.661 +08:00 [INF] Executed DbCommand (55ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username], [t].[Id], [t].[CreationTime], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser], [t].[RoleName]
FROM [User].[User] AS [u]
INNER JOIN (
    SELECT [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
    FROM [User].[Role] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [u].[RoleId] = [t].[Id]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 09:58:58.068 +08:00 [INF] Executed endpoint 'HTTP: POST user/user-login'
2025-07-21 09:58:58.325 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Sequence contains no elements.
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at User.Domain.UserManager.GetUserAndRoleAsync(String userName) in D:\Program\仓库\Warehource.Modules\User.Domain\UserManager.cs:line 37
   at User.Application.LoginHandler.LoginEventHandler.Handle(LoginEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\LoginHandler\LoginEventHandler.cs:line 13
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at User.Presentation.Login.Login.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\Login\Login.cs:line 20
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfString>g__ExecuteAwaited|134_0(Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 09:59:05.893 +08:00 [ERR] HTTP POST /user/user-login responded 500 in 8472.2985 ms
2025-07-21 09:59:05.929 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/user-login - 500 null application/json; charset=utf-8 8542.066ms
2025-07-21 09:59:12.764 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:59:21.587 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/user-login - application/json 46
2025-07-21 09:59:21.606 +08:00 [INF] Executing endpoint 'HTTP: POST user/user-login'
2025-07-21 09:59:25.225 +08:00 [INF] Executed DbCommand (24ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username], [t].[Id], [t].[CreationTime], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser], [t].[RoleName]
FROM [User].[User] AS [u]
INNER JOIN (
    SELECT [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
    FROM [User].[Role] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [u].[RoleId] = [t].[Id]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 09:59:25.464 +08:00 [INF] Executed endpoint 'HTTP: POST user/user-login'
2025-07-21 09:59:25.535 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Sequence contains no elements.
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at User.Domain.UserManager.GetUserAndRoleAsync(String userName) in D:\Program\仓库\Warehource.Modules\User.Domain\UserManager.cs:line 37
   at User.Application.LoginHandler.LoginEventHandler.Handle(LoginEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\LoginHandler\LoginEventHandler.cs:line 13
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at User.Presentation.Login.Login.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\Login\Login.cs:line 20
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfString>g__ExecuteAwaited|134_0(Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 09:59:27.752 +08:00 [ERR] HTTP POST /user/user-login responded 500 in 6148.3527 ms
2025-07-21 09:59:27.758 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/user-login - 500 null application/json; charset=utf-8 6171.0572ms
2025-07-21 09:59:37.375 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 09:59:40.681 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/user-login - application/json 46
2025-07-21 09:59:40.708 +08:00 [INF] Executing endpoint 'HTTP: POST user/user-login'
2025-07-21 10:00:02.247 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:00:13.633 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username], [t].[Id], [t].[CreationTime], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser], [t].[RoleName]
FROM [User].[User] AS [u]
INNER JOIN (
    SELECT [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
    FROM [User].[Role] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [u].[RoleId] = [t].[Id]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 10:00:16.891 +08:00 [INF] Executed endpoint 'HTTP: POST user/user-login'
2025-07-21 10:00:16.962 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Sequence contains no elements.
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at User.Domain.UserManager.GetUserAndRoleAsync(String userName) in D:\Program\仓库\Warehource.Modules\User.Domain\UserManager.cs:line 37
   at User.Application.LoginHandler.LoginEventHandler.Handle(LoginEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\LoginHandler\LoginEventHandler.cs:line 13
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at User.Presentation.Login.Login.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\Login\Login.cs:line 20
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfString>g__ExecuteAwaited|134_0(Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-07-21 10:04:36.109 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:04:36.162 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 10:04:36.165 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:04:36.167 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 10:04:36.176 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 10:04:36.185 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 10:04:36.218 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:04:36.220 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 10:04:36.223 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:04:36.226 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 10:04:36.233 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 10:04:36.235 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 10:04:36.322 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 10:04:36.333 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 10:04:36.334 +08:00 [INF] Quartz Scheduler created
2025-07-21 10:04:36.334 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 10:04:36.335 +08:00 [INF] RAMJobStore initialized.
2025-07-21 10:04:36.336 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '-2069071548' initialized
2025-07-21 10:04:36.337 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 10:04:36.338 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 10:04:36.346 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 10:04:36.530 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 10:04:36.571 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 10:04:36.614 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 10:04:36.779 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 10:04:36.783 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 10:04:36.834 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_jy5yyynqz1igy1robdqhx6ztf1"
2025-07-21 10:04:36.834 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 10:04:36.836 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 10:04:36.958 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 10:04:36.961 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 10:04:36.967 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 10:04:37.081 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 10:04:37.083 +08:00 [INF] Hosting environment: Development
2025-07-21 10:04:37.084 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 10:04:37.085 +08:00 [INF] Scheduler JobScheduler_$_-2069071548 started.
2025-07-21 10:04:37.086 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:04:37.658 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 10:04:37.857 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 209.0025ms
2025-07-21 10:04:37.876 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 10:04:37.884 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 7.474ms
2025-07-21 10:04:38.010 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 10:04:38.046 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.6667ms
2025-07-21 10:04:38.091 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 10:04:38.114 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 23.211ms
2025-07-21 10:04:46.335 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminuser - null 0
2025-07-21 10:04:46.420 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 10:04:46.479 +08:00 [INF] Executed DbCommand (17ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username]
FROM [User].[User] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 10:04:46.622 +08:00 [ERR] Failed executing DbCommand (136ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [RoleUser] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[RoleName] = @__roleName_0
2025-07-21 10:04:46.675 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'User.Infrastructure.Database.UserDBContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'RoleUser' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:867a281b-1aba-46ed-ad34-c6654a749d3c
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'RoleUser' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:867a281b-1aba-46ed-ad34-c6654a749d3c
Error Number:208,State:1,Class:16
2025-07-21 10:04:46.983 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 10:04:47.082 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'RoleUser' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method47(Closure, QueryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at User.Domain.UserManager.GetRoleAsync(String roleName) in D:\Program\仓库\Warehource.Modules\User.Domain\UserManager.cs:line 12
   at User.Application.AddHandler.AddUserEventHandler.Handle(AddUserEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\AddHandler\AddEventHandler.cs:line 16
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at User.Presentation.AddAdmin.AddAdminUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminUser.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:867a281b-1aba-46ed-ad34-c6654a749d3c
Error Number:208,State:1,Class:16
2025-07-21 10:04:56.857 +08:00 [ERR] HTTP POST /user/add-adminuser responded 500 in 10501.4706 ms
2025-07-21 10:04:56.872 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminuser - 500 null application/json; charset=utf-8 10536.8813ms
2025-07-21 10:05:03.085 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:05:19.709 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminuser - null 0
2025-07-21 10:05:19.715 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 10:05:19.724 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username]
FROM [User].[User] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 10:05:19.799 +08:00 [ERR] Failed executing DbCommand (72ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [RoleUser] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[RoleName] = @__roleName_0
2025-07-21 10:05:19.819 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'User.Infrastructure.Database.UserDBContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'RoleUser' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:867a281b-1aba-46ed-ad34-c6654a749d3c
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'RoleUser' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:867a281b-1aba-46ed-ad34-c6654a749d3c
Error Number:208,State:1,Class:16
2025-07-21 10:05:19.938 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 10:05:19.977 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'RoleUser' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method47(Closure, QueryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at User.Domain.UserManager.GetRoleAsync(String roleName) in D:\Program\仓库\Warehource.Modules\User.Domain\UserManager.cs:line 12
   at User.Application.AddHandler.AddUserEventHandler.Handle(AddUserEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\AddHandler\AddEventHandler.cs:line 16
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at User.Presentation.AddAdmin.AddAdminUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminUser.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:867a281b-1aba-46ed-ad34-c6654a749d3c
Error Number:208,State:1,Class:16
2025-07-21 10:05:22.906 +08:00 [ERR] HTTP POST /user/add-adminuser responded 500 in 3191.3943 ms
2025-07-21 10:05:22.912 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminuser - 500 null application/json; charset=utf-8 3202.645ms
2025-07-21 10:05:27.625 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:05:32.203 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminuser - null 0
2025-07-21 10:05:32.213 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 10:05:36.319 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username]
FROM [User].[User] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 10:05:38.824 +08:00 [ERR] Failed executing DbCommand (67ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [RoleUser] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[RoleName] = @__roleName_0
2025-07-21 10:05:38.843 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'User.Infrastructure.Database.UserDBContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'RoleUser' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:867a281b-1aba-46ed-ad34-c6654a749d3c
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'RoleUser' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:867a281b-1aba-46ed-ad34-c6654a749d3c
Error Number:208,State:1,Class:16
2025-07-21 10:05:42.841 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 10:05:42.904 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'RoleUser' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method47(Closure, QueryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at User.Domain.UserManager.GetRoleAsync(String roleName) in D:\Program\仓库\Warehource.Modules\User.Domain\UserManager.cs:line 12
   at User.Application.AddHandler.AddUserEventHandler.Handle(AddUserEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\AddHandler\AddEventHandler.cs:line 16
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at User.Presentation.AddAdmin.AddAdminUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminUser.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:867a281b-1aba-46ed-ad34-c6654a749d3c
Error Number:208,State:1,Class:16
2025-07-21 10:05:44.786 +08:00 [ERR] HTTP POST /user/add-adminuser responded 500 in 12574.1903 ms
2025-07-21 10:05:44.789 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminuser - 500 null application/json; charset=utf-8 12586.1911ms
2025-07-21 10:05:47.674 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminuser - null 0
2025-07-21 10:05:47.679 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 10:05:52.734 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username]
FROM [User].[User] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 10:05:55.811 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:06:29.627 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:06:29.671 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 10:06:29.679 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:06:29.681 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 10:06:29.692 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 10:06:29.704 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 10:06:29.760 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:06:29.765 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 10:06:29.767 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:06:29.769 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 10:06:29.773 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 10:06:29.775 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 10:06:29.862 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 10:06:29.871 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 10:06:29.873 +08:00 [INF] Quartz Scheduler created
2025-07-21 10:06:29.875 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 10:06:29.875 +08:00 [INF] RAMJobStore initialized.
2025-07-21 10:06:29.876 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '-178160576' initialized
2025-07-21 10:06:29.877 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 10:06:29.878 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 10:06:29.885 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 10:06:30.080 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 10:06:30.133 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 10:06:30.180 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 10:06:30.348 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 10:06:30.351 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 10:06:30.401 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_obooyynqz1igbh7rbdqhx63idn"
2025-07-21 10:06:30.401 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 10:06:30.403 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 10:06:30.526 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 10:06:30.529 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 10:06:30.534 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 10:06:30.775 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 10:06:30.777 +08:00 [INF] Hosting environment: Development
2025-07-21 10:06:30.779 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 10:06:30.779 +08:00 [INF] Scheduler JobScheduler_$_-178160576 started.
2025-07-21 10:06:30.781 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:06:30.855 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 10:06:31.019 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 169.9425ms
2025-07-21 10:06:31.179 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 10:06:31.179 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 10:06:31.185 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 6.4868ms
2025-07-21 10:06:31.211 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.886ms
2025-07-21 10:06:31.268 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 10:06:31.294 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 25.9284ms
2025-07-21 10:06:36.274 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminuser - null 0
2025-07-21 10:06:36.363 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 10:06:39.147 +08:00 [INF] Executed DbCommand (16ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username]
FROM [User].[User] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 10:06:39.702 +08:00 [ERR] Failed executing DbCommand (81ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [RoleUser] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[RoleName] = @__roleName_0
2025-07-21 10:06:39.738 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'User.Infrastructure.Database.UserDBContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'RoleUser' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:84cf9112-b509-4031-8bb7-c9d9292473f1
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'RoleUser' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:84cf9112-b509-4031-8bb7-c9d9292473f1
Error Number:208,State:1,Class:16
2025-07-21 10:06:44.687 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 10:06:44.734 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'RoleUser' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method47(Closure, QueryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at User.Domain.UserManager.GetRoleAsync(String roleName) in D:\Program\仓库\Warehource.Modules\User.Domain\UserManager.cs:line 12
   at User.Application.AddHandler.AddUserEventHandler.Handle(AddUserEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\AddHandler\AddEventHandler.cs:line 16
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at User.Presentation.AddAdmin.AddAdminUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminUser.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:84cf9112-b509-4031-8bb7-c9d9292473f1
Error Number:208,State:1,Class:16
2025-07-21 10:06:59.699 +08:00 [ERR] HTTP POST /user/add-adminuser responded 500 in 23402.8008 ms
2025-07-21 10:06:59.714 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminuser - 500 null application/json; charset=utf-8 23439.8714ms
2025-07-21 10:07:00.329 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:07:01.970 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminuser - null 0
2025-07-21 10:07:01.977 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 10:07:06.980 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username]
FROM [User].[User] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 10:07:12.494 +08:00 [ERR] Failed executing DbCommand (81ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [RoleUser] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[RoleName] = @__roleName_0
2025-07-21 10:07:12.513 +08:00 [ERR] An exception occurred while iterating over the results of a query for context type 'User.Infrastructure.Database.UserDBContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'RoleUser' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:84cf9112-b509-4031-8bb7-c9d9292473f1
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'RoleUser' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
ClientConnectionId:84cf9112-b509-4031-8bb7-c9d9292473f1
Error Number:208,State:1,Class:16
2025-07-21 10:07:17.849 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 10:07:19.464 +08:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): 对象名 'RoleUser' 无效。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method47(Closure, QueryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at User.Domain.UserManager.GetRoleAsync(String roleName) in D:\Program\仓库\Warehource.Modules\User.Domain\UserManager.cs:line 12
   at User.Application.AddHandler.AddUserEventHandler.Handle(AddUserEvent request, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\User.Application\AddHandler\AddEventHandler.cs:line 16
   at Common.Application.MediatR.Behaviors.ValidationPipelineBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\Program\仓库\Warehource.Modules\Common.Application\MediatR\Behaviors\ValidationPipelineBehavior.cs:line 20
   at User.Presentation.AddAdmin.AddAdminUser.<>c.<<MapEndpoint>b__0_0>d.MoveNext() in D:\Program\仓库\Warehource.Modules\User.Presentation\AddAdmin\AddAdminUser.cs:line 16
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<ExecuteTaskOfT>g__ExecuteAwaited|133_0[T](Task`1 task, HttpContext httpContext, JsonTypeInfo`1 jsonTypeInfo)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
ClientConnectionId:84cf9112-b509-4031-8bb7-c9d9292473f1
Error Number:208,State:1,Class:16
2025-07-21 10:07:20.774 +08:00 [ERR] HTTP POST /user/add-adminuser responded 500 in 18798.4425 ms
2025-07-21 10:07:20.777 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminuser - 500 null application/json; charset=utf-8 18807.2981ms
2025-07-21 10:07:28.890 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:07:55.657 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:08:07.379 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:08:07.424 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 10:08:07.428 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:08:07.431 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 10:08:07.440 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 10:08:07.449 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 10:08:07.484 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:08:07.487 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 10:08:07.491 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:08:07.494 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 10:08:07.499 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 10:08:07.501 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 10:08:07.589 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 10:08:07.599 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 10:08:07.600 +08:00 [INF] Quartz Scheduler created
2025-07-21 10:08:07.601 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 10:08:07.602 +08:00 [INF] RAMJobStore initialized.
2025-07-21 10:08:07.603 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '345718373' initialized
2025-07-21 10:08:07.603 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 10:08:07.604 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 10:08:07.611 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 10:08:07.816 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 10:08:07.858 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 10:08:07.909 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 10:08:08.109 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 10:08:08.113 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 10:08:08.178 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 10:08:08.178 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_mtkoyynqz1igy9npbdqhx65xf8"
2025-07-21 10:08:08.180 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 10:08:08.310 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 10:08:08.312 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 10:08:08.318 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 10:08:08.428 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 10:08:08.429 +08:00 [INF] Hosting environment: Development
2025-07-21 10:08:08.430 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 10:08:08.431 +08:00 [INF] Scheduler JobScheduler_$_345718373 started.
2025-07-21 10:08:08.432 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:08:08.825 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 10:08:08.975 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 157.9535ms
2025-07-21 10:08:08.992 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 10:08:08.997 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 5.7832ms
2025-07-21 10:08:09.112 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 10:08:09.143 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.254ms
2025-07-21 10:08:09.189 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 10:08:09.202 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 13.5104ms
2025-07-21 10:08:16.116 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-adminuser - null 0
2025-07-21 10:08:16.177 +08:00 [INF] Executing endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 10:08:19.319 +08:00 [INF] Executed DbCommand (16ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username]
FROM [User].[User] AS [u]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 10:08:19.598 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@__roleName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [User].[Role] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit) AND [r].[RoleName] = @__roleName_0
2025-07-21 10:08:24.118 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 4000), @p9='?' (Size = 20), @p10='?' (Size = 4000), @p11='?' (DbType = Guid), @p12='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [User].[User] ([Id], [CreationTime], [Description], [Email], [IsDeleted], [LastModificationTime], [LastModifierUser], [LockoutEnd], [Name], [Password], [Phone], [RoleId], [Username])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-07-21 10:08:24.136 +08:00 [INF] Executed endpoint 'HTTP: POST user/add-adminuser'
2025-07-21 10:08:24.139 +08:00 [INF] HTTP POST /user/add-adminuser responded 200 in 8005.4202 ms
2025-07-21 10:08:24.151 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-adminuser - 200 null application/json; charset=utf-8 8035.6838ms
2025-07-21 10:08:36.732 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/user-login - application/json 46
2025-07-21 10:08:36.745 +08:00 [INF] Executing endpoint 'HTTP: POST user/user-login'
2025-07-21 10:08:40.312 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:08:40.377 +08:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username], [t].[Id], [t].[CreationTime], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser], [t].[RoleName]
FROM [User].[User] AS [u]
INNER JOIN (
    SELECT [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
    FROM [User].[Role] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [u].[RoleId] = [t].[Id]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 10:08:48.849 +08:00 [INF] Executed endpoint 'HTTP: POST user/user-login'
2025-07-21 10:08:48.860 +08:00 [INF] HTTP POST /user/user-login responded 200 in 12115.1959 ms
2025-07-21 10:08:48.869 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/user-login - 200 null text/plain; charset=utf-8 12136.7442ms
2025-07-21 10:09:05.381 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:09:32.652 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:13:04.499 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:13:04.540 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 10:13:04.543 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:13:04.545 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 10:13:04.553 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 10:13:04.562 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 10:13:04.597 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:13:04.600 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 10:13:04.602 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:13:04.604 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 10:13:04.607 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 10:13:04.610 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 10:13:04.689 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 10:13:04.697 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 10:13:04.698 +08:00 [INF] Quartz Scheduler created
2025-07-21 10:13:04.699 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 10:13:04.700 +08:00 [INF] RAMJobStore initialized.
2025-07-21 10:13:04.700 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '-1121319129' initialized
2025-07-21 10:13:04.701 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 10:13:04.702 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 10:13:04.710 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 10:13:04.874 +08:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 10:13:04.908 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 10:13:04.946 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 10:13:05.088 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 10:13:05.091 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 10:13:05.134 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_co6oyynqz1igbfx9bdqhx9byfp"
2025-07-21 10:13:05.134 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 10:13:05.138 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 10:13:05.255 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 10:13:05.257 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 10:13:05.261 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 10:13:05.358 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 10:13:05.360 +08:00 [INF] Hosting environment: Development
2025-07-21 10:13:05.361 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 10:13:05.362 +08:00 [INF] Scheduler JobScheduler_$_-1121319129 started.
2025-07-21 10:13:05.362 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:13:05.610 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 10:13:05.785 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 181.0593ms
2025-07-21 10:13:05.796 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 10:13:05.808 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 11.6531ms
2025-07-21 10:13:06.152 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 10:13:06.206 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 54.6074ms
2025-07-21 10:13:06.232 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 10:13:06.272 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 40.9543ms
2025-07-21 10:13:12.463 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/user/get-roles - null null
2025-07-21 10:13:12.551 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-21 10:13:12.556 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-21 10:13:12.560 +08:00 [INF] HTTP GET /user/get-roles responded 401 in 70.7888 ms
2025-07-21 10:13:12.564 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/user/get-roles - 401 0 null 101.1076ms
2025-07-21 10:13:31.534 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:13:41.881 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/user-login - application/json 46
2025-07-21 10:13:41.898 +08:00 [INF] Executing endpoint 'HTTP: POST user/user-login'
2025-07-21 10:13:42.050 +08:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username], [t].[Id], [t].[CreationTime], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser], [t].[RoleName]
FROM [User].[User] AS [u]
INNER JOIN (
    SELECT [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
    FROM [User].[Role] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [u].[RoleId] = [t].[Id]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 10:13:42.086 +08:00 [INF] Executed endpoint 'HTTP: POST user/user-login'
2025-07-21 10:13:42.088 +08:00 [INF] HTTP POST /user/user-login responded 200 in 194.5000 ms
2025-07-21 10:13:42.093 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/user-login - 200 null text/plain; charset=utf-8 211.9915ms
2025-07-21 10:13:55.659 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:14:03.667 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/user/get-roles - null null
2025-07-21 10:14:03.740 +08:00 [INF] Executing endpoint 'HTTP: GET user/get-roles'
2025-07-21 10:14:03.742 +08:00 [INF] Executed endpoint 'HTTP: GET user/get-roles'
2025-07-21 10:14:03.745 +08:00 [INF] HTTP GET /user/get-roles responded 200 in 62.9298 ms
2025-07-21 10:14:03.747 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/user/get-roles - 200 0 null 80.3121ms
2025-07-21 10:14:12.313 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/get/get-users - null null
2025-07-21 10:14:12.329 +08:00 [INF] Executing endpoint 'HTTP: GET get/get-users'
2025-07-21 10:14:12.334 +08:00 [INF] Executed endpoint 'HTTP: GET get/get-users'
2025-07-21 10:14:12.345 +08:00 [INF] HTTP GET /get/get-users responded 200 in 22.7754 ms
2025-07-21 10:14:12.352 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/get/get-users - 200 0 null 39.5218ms
2025-07-21 10:14:22.381 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:14:48.590 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:15:14.921 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:15:44.695 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:16:06.957 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:16:07.011 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 10:16:07.014 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:16:07.016 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 10:16:07.030 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 10:16:07.040 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 10:16:07.072 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:16:07.075 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 10:16:07.078 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:16:07.081 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 10:16:07.085 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 10:16:07.086 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 10:16:07.168 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 10:16:07.178 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 10:16:07.179 +08:00 [INF] Quartz Scheduler created
2025-07-21 10:16:07.180 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 10:16:07.180 +08:00 [INF] RAMJobStore initialized.
2025-07-21 10:16:07.181 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '1980448579' initialized
2025-07-21 10:16:07.182 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 10:16:07.183 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 10:16:07.191 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 10:16:07.384 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 10:16:07.430 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 10:16:07.484 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 10:16:07.656 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 10:16:07.659 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 10:16:07.713 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_houoyynqz1igya9xbdqhx9rpd7"
2025-07-21 10:16:07.713 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 10:16:07.716 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 10:16:07.842 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 10:16:07.843 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 10:16:07.850 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 10:16:07.955 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 10:16:07.956 +08:00 [INF] Hosting environment: Development
2025-07-21 10:16:07.957 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 10:16:07.958 +08:00 [INF] Scheduler JobScheduler_$_1980448579 started.
2025-07-21 10:16:07.959 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:16:08.493 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 10:16:08.677 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 192.4425ms
2025-07-21 10:16:08.693 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 10:16:08.699 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 6.272ms
2025-07-21 10:16:08.836 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 10:16:08.874 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 38.2001ms
2025-07-21 10:16:08.925 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 10:16:08.943 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 19.0474ms
2025-07-21 10:16:20.913 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/user/get-roles - null null
2025-07-21 10:16:21.028 +08:00 [INF] Executing endpoint 'HTTP: GET user/get-roles'
2025-07-21 10:16:21.130 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [User].[Role] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
2025-07-21 10:16:21.149 +08:00 [INF] Executed endpoint 'HTTP: GET user/get-roles'
2025-07-21 10:16:21.152 +08:00 [INF] HTTP GET /user/get-roles responded 200 in 213.8482 ms
2025-07-21 10:16:21.169 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/user/get-roles - 200 null application/json; charset=utf-8 256.1892ms
2025-07-21 10:16:27.798 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/get/get-users - null null
2025-07-21 10:16:27.816 +08:00 [INF] Executing endpoint 'HTTP: GET get/get-users'
2025-07-21 10:16:27.961 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username], [t].[Id], [t].[CreationTime], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser], [t].[RoleName]
FROM [User].[User] AS [u]
INNER JOIN (
    SELECT [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
    FROM [User].[Role] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [u].[RoleId] = [t].[Id]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
2025-07-21 10:16:27.972 +08:00 [INF] Executed endpoint 'HTTP: GET get/get-users'
2025-07-21 10:16:27.974 +08:00 [INF] HTTP GET /get/get-users responded 200 in 162.2955 ms
2025-07-21 10:16:27.976 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/get/get-users - 200 null application/json; charset=utf-8 177.4021ms
2025-07-21 10:16:37.473 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:17:00.815 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:17:24.550 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:17:50.270 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:18:16.992 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:18:46.567 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:30:08.499 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:30:08.553 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 10:30:08.556 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:30:08.559 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 10:30:08.571 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 10:30:08.583 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 10:30:08.625 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:30:08.634 +08:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 10:30:08.637 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:30:08.639 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 10:30:08.642 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 10:30:08.645 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 10:30:08.732 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 10:30:08.744 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 10:30:08.746 +08:00 [INF] Quartz Scheduler created
2025-07-21 10:30:08.748 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 10:30:08.749 +08:00 [INF] RAMJobStore initialized.
2025-07-21 10:30:08.750 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '1090916303' initialized
2025-07-21 10:30:08.751 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 10:30:08.751 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 10:30:08.759 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 10:30:08.984 +08:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 10:30:09.033 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 10:30:09.082 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 10:30:09.279 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 10:30:09.284 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 10:30:09.334 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 10:30:09.334 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_xndoyynqz1igbjqpbdqhx9wdbb"
2025-07-21 10:30:09.337 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 10:30:09.495 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 10:30:09.497 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 10:30:09.502 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 10:30:09.616 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 10:30:09.617 +08:00 [INF] Hosting environment: Development
2025-07-21 10:30:09.618 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 10:30:09.620 +08:00 [INF] Scheduler JobScheduler_$_1090916303 started.
2025-07-21 10:30:09.621 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:30:09.837 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 10:30:10.004 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 174.4137ms
2025-07-21 10:30:10.020 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 10:30:10.026 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 5.9677ms
2025-07-21 10:30:10.157 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 10:30:10.191 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.4096ms
2025-07-21 10:30:10.230 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 10:30:10.247 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 17.3213ms
2025-07-21 10:30:42.406 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:30:42.565 +08:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 10:30:42.626 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:30:42.629 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 10:30:42.640 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 10:30:42.653 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 10:30:42.821 +08:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:30:42.879 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 10:30:42.883 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:30:42.886 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 10:30:42.891 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 10:30:42.894 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 10:30:42.989 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 10:30:43.028 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 10:30:43.030 +08:00 [INF] Quartz Scheduler created
2025-07-21 10:30:43.031 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 10:30:43.032 +08:00 [INF] RAMJobStore initialized.
2025-07-21 10:30:43.034 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '508805914' initialized
2025-07-21 10:30:43.036 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 10:30:43.037 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 10:30:43.046 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 10:30:43.322 +08:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 10:30:43.386 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 10:30:43.501 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 10:30:43.871 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 10:30:43.959 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 10:30:44.014 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 10:30:44.014 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_eoioyynqz1igy7mrbdqhx9wzgy"
2025-07-21 10:30:44.017 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 10:30:44.232 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 10:30:44.303 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 10:30:44.313 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 10:30:44.462 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 10:30:44.465 +08:00 [INF] Hosting environment: Development
2025-07-21 10:30:44.468 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 10:30:44.468 +08:00 [INF] Scheduler JobScheduler_$_508805914 started.
2025-07-21 10:30:44.470 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:30:45.412 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 10:30:45.689 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 285.3066ms
2025-07-21 10:30:45.768 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 10:30:45.828 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 59.7925ms
2025-07-21 10:30:45.897 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 10:30:46.134 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 250.5087ms
2025-07-21 10:30:46.199 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 10:30:46.272 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 83.5721ms
2025-07-21 10:31:01.421 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/user-login - application/json 46
2025-07-21 10:31:01.608 +08:00 [INF] Executing endpoint 'HTTP: POST user/user-login'
2025-07-21 10:31:01.795 +08:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userName_0='?' (Size = 50)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username], [t].[Id], [t].[CreationTime], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser], [t].[RoleName]
FROM [User].[User] AS [u]
INNER JOIN (
    SELECT [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
    FROM [User].[Role] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [u].[RoleId] = [t].[Id]
WHERE [u].[IsDeleted] = CAST(0 AS bit) AND [u].[Username] = @__userName_0
2025-07-21 10:31:01.875 +08:00 [INF] Executed endpoint 'HTTP: POST user/user-login'
2025-07-21 10:31:01.879 +08:00 [INF] HTTP POST /user/user-login responded 200 in 404.7230 ms
2025-07-21 10:31:01.885 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/user-login - 200 null text/plain; charset=utf-8 464.9194ms
2025-07-21 10:31:13.510 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:31:21.198 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/user/get-roles - null null
2025-07-21 10:31:21.248 +08:00 [INF] Executing endpoint 'HTTP: GET user/get-roles'
2025-07-21 10:31:21.554 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
FROM [User].[Role] AS [r]
WHERE [r].[IsDeleted] = CAST(0 AS bit)
2025-07-21 10:31:21.575 +08:00 [INF] Executed endpoint 'HTTP: GET user/get-roles'
2025-07-21 10:31:21.577 +08:00 [INF] HTTP GET /user/get-roles responded 200 in 360.0249 ms
2025-07-21 10:31:21.588 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/user/get-roles - 200 null application/json; charset=utf-8 390.2816ms
2025-07-21 10:31:33.472 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/get/get-users - null null
2025-07-21 10:31:33.497 +08:00 [INF] Executing endpoint 'HTTP: GET get/get-users'
2025-07-21 10:31:33.771 +08:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username], [t].[Id], [t].[CreationTime], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser], [t].[RoleName]
FROM [User].[User] AS [u]
INNER JOIN (
    SELECT [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
    FROM [User].[Role] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [u].[RoleId] = [t].[Id]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
2025-07-21 10:31:33.786 +08:00 [INF] Executed endpoint 'HTTP: GET get/get-users'
2025-07-21 10:31:33.876 +08:00 [INF] HTTP GET /get/get-users responded 200 in 383.6757 ms
2025-07-21 10:31:33.881 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/get/get-users - 200 null application/json; charset=utf-8 433.3319ms
2025-07-21 10:31:41.742 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:31:42.771 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/get/get-users - null null
2025-07-21 10:31:42.842 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2025-07-21 10:31:42.848 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-21 10:31:42.850 +08:00 [INF] HTTP GET /get/get-users responded 401 in 9.0734 ms
2025-07-21 10:31:42.852 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/get/get-users - 401 0 null 100.2341ms
2025-07-21 10:32:08.249 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:32:31.587 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:32:59.899 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:34:08.152 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:34:08.202 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 10:34:08.206 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:34:08.208 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 10:34:08.216 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 10:34:08.227 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 10:34:08.260 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:34:08.263 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 10:34:08.265 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 10:34:08.267 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 10:34:08.271 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 10:34:08.272 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 10:34:08.344 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 10:34:08.354 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 10:34:08.355 +08:00 [INF] Quartz Scheduler created
2025-07-21 10:34:08.356 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 10:34:08.356 +08:00 [INF] RAMJobStore initialized.
2025-07-21 10:34:08.357 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '-2034192285' initialized
2025-07-21 10:34:08.358 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 10:34:08.359 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 10:34:08.365 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 10:34:08.549 +08:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 10:34:08.592 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 10:34:08.642 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 10:34:08.798 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 10:34:08.802 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 10:34:08.853 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_fbsyyynqz1igb9qpbdqhx9at88"
2025-07-21 10:34:08.853 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 10:34:08.856 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 10:34:08.977 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 10:34:08.978 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 10:34:08.984 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 10:34:09.215 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 10:34:09.291 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 10:34:09.292 +08:00 [INF] Hosting environment: Development
2025-07-21 10:34:09.293 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 10:34:09.295 +08:00 [INF] Scheduler JobScheduler_$_-2034192285 started.
2025-07-21 10:34:09.296 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 10:34:09.374 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 165.3296ms
2025-07-21 10:34:09.389 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 10:34:09.397 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 7.2159ms
2025-07-21 10:34:09.530 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 10:34:09.560 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.4714ms
2025-07-21 10:34:09.600 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 10:34:09.612 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 12.4741ms
2025-07-21 10:34:13.470 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/get/get-users - null null
2025-07-21 10:34:13.553 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-21 10:34:13.565 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-21 10:34:13.567 +08:00 [INF] HTTP GET /get/get-users responded 401 in 61.5974 ms
2025-07-21 10:34:13.571 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/get/get-users - 401 0 null 101.4727ms
2025-07-21 10:34:20.890 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/get/get-users - null null
2025-07-21 10:34:20.987 +08:00 [INF] Executing endpoint 'HTTP: GET get/get-users'
2025-07-21 10:34:21.134 +08:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[CreationTime], [u].[Description], [u].[Email], [u].[IsDeleted], [u].[LastModificationTime], [u].[LastModifierUser], [u].[LockoutEnd], [u].[Name], [u].[Password], [u].[Phone], [u].[RoleId], [u].[Username], [t].[Id], [t].[CreationTime], [t].[Description], [t].[IsDeleted], [t].[LastModificationTime], [t].[LastModifierUser], [t].[RoleName]
FROM [User].[User] AS [u]
INNER JOIN (
    SELECT [r].[Id], [r].[CreationTime], [r].[Description], [r].[IsDeleted], [r].[LastModificationTime], [r].[LastModifierUser], [r].[RoleName]
    FROM [User].[Role] AS [r]
    WHERE [r].[IsDeleted] = CAST(0 AS bit)
) AS [t] ON [u].[RoleId] = [t].[Id]
WHERE [u].[IsDeleted] = CAST(0 AS bit)
2025-07-21 10:34:21.166 +08:00 [INF] Executed endpoint 'HTTP: GET get/get-users'
2025-07-21 10:34:21.168 +08:00 [INF] HTTP GET /get/get-users responded 200 in 231.4027 ms
2025-07-21 10:34:21.183 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/get/get-users - 200 null application/json; charset=utf-8 293.2049ms
2025-07-21 12:49:33.709 +08:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 12:49:33.843 +08:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 12:49:33.848 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 12:49:33.851 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 12:49:33.864 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 12:49:33.878 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 12:49:33.935 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 12:49:33.938 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 12:49:33.941 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 12:49:33.942 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 12:49:33.945 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 12:49:33.947 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 12:49:34.114 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 12:49:34.129 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 12:49:34.130 +08:00 [INF] Quartz Scheduler created
2025-07-21 12:49:34.131 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 12:49:34.131 +08:00 [INF] RAMJobStore initialized.
2025-07-21 12:49:34.133 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '106508083' initialized
2025-07-21 12:49:34.134 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 12:49:34.134 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 12:49:34.143 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 12:49:34.374 +08:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 12:49:34.491 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 12:49:34.537 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 12:49:34.973 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 12:49:34.982 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 12:49:35.101 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 12:49:35.101 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_eneyyynqz1igyd3fbdqhorx7db"
2025-07-21 12:49:35.109 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 12:49:35.370 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 12:49:35.373 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 12:49:35.386 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 12:49:35.555 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 12:49:35.557 +08:00 [INF] Hosting environment: Development
2025-07-21 12:49:35.558 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 12:49:35.565 +08:00 [INF] Scheduler JobScheduler_$_106508083 started.
2025-07-21 12:49:35.566 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:49:36.092 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 12:49:36.317 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 233.0706ms
2025-07-21 12:49:36.468 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 12:49:36.468 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 12:49:36.490 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 21.3554ms
2025-07-21 12:49:36.522 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 54.1185ms
2025-07-21 12:49:36.562 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 12:49:36.591 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 28.5272ms
2025-07-21 12:49:39.968 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/user/get-roles - null null
2025-07-21 12:49:48.657 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.ArgumentNullException.Throw(String paramName)
   at System.ArgumentNullException.ThrowIfNull(Object argument, String paramName)
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Common.Infrastructure.Middleware.GlobalResponseMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalResponseMiddleware.cs:line 22
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-21 12:49:48.790 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/user/get-roles - 500 null application/problem+json 8822.96ms
2025-07-21 12:50:05.527 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:50:22.728 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/user-login - application/json 50
2025-07-21 12:50:32.629 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:50:34.569 +08:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.ArgumentNullException.Throw(String paramName)
   at System.ArgumentNullException.ThrowIfNull(Object argument, String paramName)
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Common.Infrastructure.Middleware.GlobalResponseMiddleware.InvokeAsync(HttpContext context) in D:\Program\仓库\Warehource.Modules\Common.Infrastructure\Middleware\GlobalResponseMiddleware.cs:line 22
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-07-21 12:50:42.053 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/user-login - 500 null text/plain; charset=utf-8 19324.718ms
2025-07-21 12:50:57.875 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:51:27.146 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:51:52.960 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:52:22.331 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:52:46.054 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:53:11.886 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:53:39.439 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:54:06.696 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:54:30.155 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:54:58.751 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:55:23.981 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:55:51.872 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:56:18.562 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:56:42.951 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:57:11.379 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:57:38.274 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:58:06.292 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:58:31.849 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:58:57.922 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:59:23.229 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 12:59:51.860 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 13:00:14.917 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 13:00:41.941 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 13:01:06.671 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 13:01:34.748 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 13:01:59.400 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 13:02:27.957 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 13:02:52.050 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 13:03:19.443 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 13:03:42.674 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 13:04:06.152 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 13:04:32.892 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 13:05:00.425 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 13:05:30.097 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 13:05:59.195 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 13:06:27.372 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 13:06:54.020 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 13:07:19.328 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 13:07:44.616 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 13:08:14.609 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 15:32:40.800 +08:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 15:32:40.856 +08:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 15:32:40.889 +08:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 15:32:40.919 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 15:32:40.952 +08:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 15:32:40.977 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 15:32:41.022 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 15:32:41.027 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 15:32:41.029 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 15:32:41.033 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 15:32:41.093 +08:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 15:32:41.126 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 15:32:41.208 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 15:32:41.223 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 15:32:41.226 +08:00 [INF] Quartz Scheduler created
2025-07-21 15:32:41.233 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 15:32:41.240 +08:00 [INF] RAMJobStore initialized.
2025-07-21 15:32:41.249 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '546664942' initialized
2025-07-21 15:32:41.262 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 15:32:41.270 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 15:32:41.285 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 15:32:41.503 +08:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 15:32:41.552 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 15:32:41.601 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 15:32:41.797 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 15:32:41.804 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 15:32:41.873 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_ittoyynqz1igy7sqbdqhokggg6"
2025-07-21 15:32:41.873 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 15:32:41.877 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 15:32:42.049 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 15:32:42.053 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 15:32:42.069 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 15:32:42.209 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 15:32:42.212 +08:00 [INF] Hosting environment: Development
2025-07-21 15:32:42.214 +08:00 [INF] Scheduler JobScheduler_$_546664942 started.
2025-07-21 15:32:42.214 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 15:32:42.215 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 15:32:42.695 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 15:32:42.865 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 178.2906ms
2025-07-21 15:32:42.886 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 15:32:42.897 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 10.6255ms
2025-07-21 15:32:43.018 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 15:32:43.056 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.7029ms
2025-07-21 15:32:43.115 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 15:32:43.143 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 28.4689ms
2025-07-21 15:32:46.313 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/user/get-roles - null null
2025-07-21 15:32:48.091 +08:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-21 15:32:48.109 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-21 15:32:48.119 +08:00 [INF] HTTP GET /user/get-roles responded 401 in 1749.3582 ms
2025-07-21 15:32:48.125 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/user/get-roles - 401 0 null 1812.6246ms
2025-07-21 15:32:58.364 +08:00 [INF] Request starting HTTP/2 POST https://localhost:7162/user/add-role - application/json 53
2025-07-21 15:32:58.395 +08:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2025-07-21 15:32:58.403 +08:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-21 15:32:58.408 +08:00 [INF] HTTP POST /user/add-role responded 401 in 20.4550 ms
2025-07-21 15:32:58.414 +08:00 [INF] Request finished HTTP/2 POST https://localhost:7162/user/add-role - 401 0 null 49.5497ms
2025-07-21 16:50:23.344 +08:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 16:50:23.385 +08:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 16:50:23.396 +08:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 16:50:23.399 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[Wcs.].[__EFMigrationsHistory]');
2025-07-21 16:50:23.409 +08:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [Wcs.].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 16:50:23.419 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 16:50:23.456 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 16:50:23.459 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 16:50:23.461 +08:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-21 16:50:23.463 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[User].[__EFMigrationsHistory]');
2025-07-21 16:50:23.467 +08:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [User].[__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-21 16:50:23.469 +08:00 [INF] No migrations were applied. The database is already up to date.
2025-07-21 16:50:23.545 +08:00 [DBG] TaskSchedulingThreadPool configured with max concurrency of 10 and TaskScheduler ThreadPoolTaskScheduler.
2025-07-21 16:50:23.554 +08:00 [INF] Initialized Scheduler Signaller of type: Quartz.Core.SchedulerSignalerImpl
2025-07-21 16:50:23.555 +08:00 [INF] Quartz Scheduler created
2025-07-21 16:50:23.556 +08:00 [INF] JobFactory set to: Quartz.Simpl.MicrosoftDependencyInjectionJobFactory
2025-07-21 16:50:23.557 +08:00 [INF] RAMJobStore initialized.
2025-07-21 16:50:23.557 +08:00 [INF] Quartz Scheduler 3.8.1.0 - 'JobScheduler' with instanceId '-82149033' initialized
2025-07-21 16:50:23.558 +08:00 [INF] Using thread pool 'Quartz.Simpl.DefaultThreadPool', size: 10
2025-07-21 16:50:23.559 +08:00 [INF] Using job store 'Quartz.Simpl.RAMJobStore', supports persistence: False, clustered: False
2025-07-21 16:50:23.565 +08:00 [INF] Adding 0 jobs, 0 triggers.
2025-07-21 16:50:23.731 +08:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[CreationTime], [w].[Description], [w].[IsDeleted], [w].[IsStart], [w].[JobType], [w].[LastModificationTime], [w].[LastModifierUser], [w].[Name], [w].[TimeOut], [w].[Timer]
FROM [Wcs.JobConfig] AS [w]
WHERE [w].[IsDeleted] = CAST(0 AS bit)
2025-07-21 16:50:23.795 +08:00 [INF] User profile is available. Using 'C:\Users\吴\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-21 16:50:23.840 +08:00 [INF] Configured endpoint SendWmsTasksIntegrationEvent, Consumer: Common.Application.Event.Custom.IntegrationEventConsumer<Wcs.Application.Custom.SendWmsTasksIntegrationEvent>
2025-07-21 16:50:24.010 +08:00 [DBG] Starting bus instances: IBus
2025-07-21 16:50:24.015 +08:00 [DBG] Starting bus: "loopback://localhost/"
2025-07-21 16:50:24.071 +08:00 [DBG] Endpoint Ready: "loopback://localhost/_WarehourceSource_bus_5nhoyynqz1igb4mcbdqhoc7bg8"
2025-07-21 16:50:24.071 +08:00 [DBG] Endpoint Ready: "loopback://localhost/SendWmsTasksIntegrationEvent"
2025-07-21 16:50:24.073 +08:00 [INF] Bus started: "loopback://localhost/"
2025-07-21 16:50:24.206 +08:00 [INF] Now listening on: https://localhost:7162
2025-07-21 16:50:24.207 +08:00 [INF] Now listening on: http://localhost:5050
2025-07-21 16:50:24.214 +08:00 [INF] No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-07-21 16:50:24.366 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 16:50:24.367 +08:00 [INF] Hosting environment: Development
2025-07-21 16:50:24.368 +08:00 [INF] Content root path: D:\Program\仓库\Warehource.Modules\Warehource.Source
2025-07-21 16:50:24.369 +08:00 [INF] Scheduler JobScheduler_$_-82149033 started.
2025-07-21 16:50:24.370 +08:00 [DBG] Batch acquisition of 0 triggers
2025-07-21 16:50:24.735 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/index.html - null null
2025-07-21 16:50:24.935 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/index.html - 200 null text/html;charset=utf-8 206.4323ms
2025-07-21 16:50:24.958 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - null null
2025-07-21 16:50:24.966 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 8.463ms
2025-07-21 16:50:25.087 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/_vs/browserLink - null null
2025-07-21 16:50:25.152 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.3708ms
2025-07-21 16:50:25.188 +08:00 [INF] Request starting HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - null null
2025-07-21 16:50:25.206 +08:00 [INF] Request finished HTTP/2 GET https://localhost:7162/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 18.6337ms
